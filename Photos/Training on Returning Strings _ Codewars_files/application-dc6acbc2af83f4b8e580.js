/*! For license information please see application-dc6acbc2af83f4b8e580.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[34],{1676:(e,t,s)=>{var i={"./auth_controller.js":3375,"./code_challenge_controller.js":6647,"./project_controller.js":4446,"./project_solution_controller.js":6538,"./solution_group_controller.js":1872,"controllers/auth_controller.js":3375,"controllers/code_challenge_controller.js":6647,"controllers/project_controller.js":4446,"controllers/project_solution_controller.js":6538,"controllers/solution_group_controller.js":1872};function n(e){var t=a(e);return s(t)}function a(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id=1676},7787:()=>{Element.prototype.toggleAttribute||(Element.prototype.toggleAttribute=function(e,t){return void 0!==t&&(t=!!t),this.hasAttribute(e)?!!t||(this.removeAttribute(e),!1):!1!==t&&(this.setAttribute(e,""),!0)})},3375:(e,t,s)=>{"use strict";s.r(t);var i=s(9755),n=s.n(i),a=s(2380),o=s(2918),r=s.n(o),l=s(680);t.default=class extends a.Qr{async linkGitHub(e){const t=e.currentTarget.dataset.currentPath||"";c(e,`/users/auth/github?intent=link&back=${t}`)}async unlinkGitHub(e){c(e,"/users/unauth/github")}async githubSignIn(e){c(e,"/users/auth/github")}};const c=(e,t)=>{const s=e.currentTarget;(0,l.Q)(s),e.stopPropagation(),r().clearCache();const i=s.dataset.token,a=n()([`<form method="post" action="${t}">`,'<input name="_method" value="POST" type="hidden" />',`<input name="authenticity_token" value="${i}" type="hidden" />`,"</form>"].join(""));a.hide().appendTo("body"),a.trigger("submit")}},6647:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var i=s(2380),n=s(9669),a=s.n(n),o=s(2918),r=s.n(o),l=s(6737),c=s.n(l),d=s(680);class h extends i.Qr{async checkVotes(e){(0,d.Q)(e.currentTarget),e.stopPropagation();try{const e=await a().post(`/api/v1/code-challenges/${this.idValue}/check-beta-votes`);if(e.data.success)return void await c()({icon:"info",text:"Successfully enqueued a job. Try refreshing the page in a bit."})}catch(t){console.error(t.message)}await c()({icon:"error",text:"Something went wrong. Check the console for any error messages, and let the admin know if the problem persists."})}async unpublishBeta(e){(0,d.Q)(e.currentTarget),e.stopPropagation();try{const e=await a().post(`/api/v1/code-challenges/${this.idValue}/unpublish-beta`);if(e.data.success)return await c()({icon:"info",text:"Successfully unpublished"}),void r().visit()}catch(t){console.error(t.message)}await c()({icon:"error",text:"Something went wrong. Check the console for any error messages, and let the admin know if the problem persists."})}}h.values={id:String}},4446:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var i=s(2380),n=s(9669),a=s.n(n),o=s(2918),r=s.n(o),l=s(680);class c extends i.Qr{initialize(){this.solution=null}disconnect(){this.solution=null}async invalidate(e){(0,l.Q)(e.currentTarget),e.stopPropagation(),await a().post(`/api/v1/code-challenges/projects/${this.idValue}/invalidate`),r().visit()}async revalidate(e){(0,l.Q)(e.currentTarget),e.stopPropagation(),await a().post(`/api/v1/code-challenges/projects/${this.idValue}/revalidate`),r().visit()}async removeBetaVote(e){(0,l.Q)(e.currentTarget),e.stopPropagation(),await a().delete(`/api/v1/code-challenges/projects/${this.idValue}/beta-vote`),r().visit()}async removeRankAssessment(e){(0,l.Q)(e.currentTarget),e.stopPropagation(),await a().delete(`/api/v1/code-challenges/projects/${this.idValue}/rank-assessment`),r().visit()}toggleSolution(e){e.stopPropagation();const t=e.currentTarget.closest("tr").nextSibling;this.solution&&(d(this.solution),this.solution===t)?this.solution=null:(this.solution=t,h(this.solution))}}c.values={id:String};const d=e=>e.classList.add("hidden"),h=e=>e.classList.remove("hidden")},6538:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var i=s(2380),n=s(9669),a=s.n(n),o=s(2918),r=s.n(o),l=s(6737),c=s.n(l),d=s(680);class h extends i.Qr{async group(e){(0,d.Q)(e.currentTarget),e.stopPropagation();const t=e.currentTarget.dataset.solutionId;try{const e=await a().post(`/api/v1/code-challenges/projects/${this.projectIdValue}/solutions/${t}/group`);await c()({icon:"info",text:e.data.message})}catch(s){let e="Failed!";s.response&&(e=s.response.data.reason),await c()({icon:"error",text:e})}r().visit()}}h.values={projectId:String}},1872:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var i=s(2380),n=s(9669),a=s.n(n),o=s(2918),r=s.n(o),l=s(6737),c=s.n(l),d=s(680);class h extends i.Qr{async verify(e){await this.doAction(e,"verify",(async()=>{await m("Try refreshing the page in a bit.")}))}async invalidate(e){await this.doAction(e,"invalidate")}async flag(e){await this.doAction(e,"cheat_detected")}async unflag(e){await this.doAction(e,"cheat_corrected")}async hide(e){await this.doAction(e,"hide")}async unhide(e){await this.doAction(e,"unhide")}async delete(e){(0,d.Q)(e.target),e.stopPropagation();if("confirm"===await c()({title:"Deleting Solution Group",text:"Deletion is permanent. Are you sure to delete this group?",icon:"warning",buttons:{cancel:"No",confirm:"Yes"}})){try{const e=await a().delete(this.solutionGroupUrl);if(e.data.success)return p(),void r().visit(this.reviewUrl)}catch(t){console.error(t.message)}await g()}}async doAction(e,t,s=u){(0,d.Q)(e.currentTarget),e.stopPropagation();try{const e=await a().post(`${this.solutionGroupUrl}/${t}`);if(e.data.success)return await s()}catch(i){console.error(i.message)}await g()}get reviewUrl(){return`/kata/reviews/${this.reviewIdValue}`}get solutionGroupUrl(){return`${this.reviewUrl}/groups/${this.groupIdValue}`}}h.values={reviewId:String,groupId:String};const u=async()=>{await m(),p(),r().visit()},p=()=>{const e=document.scrollingElement.scrollTop;e>0&&(r().clearCache(),r().scrollTop=e)},m=async(e="")=>{await c()({icon:"info",text:e||"Action Successful"})},g=async(e="")=>{await c()({icon:"error",text:e||"Something went wrong. Check the console for any error messages, and let the admin know if the problem persists."})}},680:(e,t,s)=>{"use strict";s.d(t,{Q:()=>i});const i=e=>{e.setAttribute("disabled",""),e.classList.add("cursor-not-allowed")}},8721:(e,t,s)=>{"use strict";s(6486);var i=s(2918),n=s.n(i),a=s(9755),o=s.n(a),r=s(9669),l=s.n(r),c=s(722),d=s(9666);s(7787);const h={},u=e=>(h[e]||(h[e]=new m(e)),h[e]);function p(e,t){try{const s=JSON.stringify(t);return"{}"===s?window.localStorage.removeItem(e):window.localStorage.setItem(e,s),!0}catch(s){return!1}}class m{constructor(e){this.ns=e,this._=function(e){try{return JSON.parse(e)}catch(t){return console.log("Failed to process local stored JSON."),{}}}(window.localStorage.getItem(e)||"{}")}set(e,t){return this._[e]={value:t,e:0},p(this.ns,this._)||this.remove(e),t}get(e){return this._[e]?this._[e].value:void 0}remove(e){delete this._[e],p(this.ns,this._)}clear(){this._={},p(this.ns,this._)}isEmpty(){return 0===Object.keys(this._||{}).length}}var g=s(8351);const f={client:null,registrations:{},status:"disconnected",connect({key:e,clientId:t,privateChannelName:s}){if("disconnected"===this.status)if(this.status="connecting",this.client)this.client.connect();else if(t){this.client=new g.Realtime({key:e,clientId:t}),this.client.connection.on("connected",(()=>{this.status="connected",this.register("private","model_update",(e=>{e.updates&&Object.keys(e.updates).forEach((t=>{o()(`[data-rt='${e.id}:${t}']`).text(e.updates[t])}))}),{key:e,clientId:t,privateChannelName:s})}));const i=()=>{this.disconnect()};this.client.connection.on("disconnected",i),this.client.connection.on("failed",i),this.client.connection.on("suspended",i)}},disconnect(){"disconnected"!==this.status&&(this.client&&this.client.close(),this.status="disconnected"),this.client=null,this.registrations={}},register(e,t,s,{key:i,clientId:n,privateChannelName:a}){if(!this.client)return!1;const o="private"===e?a:e,r=`/${o}/${t}`;if(this.registrations[r])return!1;if(this.registrations[r]=s,this.connect({key:i,clientId:n}),!this.client)return!1;const l=this.client.channels.get(o),c=e=>{s(e.data||e)};return l.subscribe(t,c),()=>{delete this.registrations[r],l.unsubscribe(t,c)}}},_=(e,t={})=>{const s=e.split("."),i=s.length;return s.reduce(((e,t,s)=>"App"===t&&0===s?e:(s<i-1&&!e[t]&&(e[t]={}),e[t])),t)},w=()=>(e=>{const t={};for(const[s,i]of new URL(e).searchParams.entries())if(s.endsWith("[]")){const e=s.slice(0,-2);t[e]||(t[e]=[]),t[e].push(i)}else t[s]=i;return t})(window.location.href),v=e=>{window.history.replaceState(window.history.state,document.title,e)},b=e=>e[0].toUpperCase()+e.substr(1),x=e=>y(e,"-"),y=(e,t)=>{const s=e.replace(/([A-Z])/g,(e=>t+e.toLowerCase()));return s.startsWith(t)?s.substr(1):s},k=(e,t)=>{const s=(e=>{const t=e.slice();let s,i,n=t.length;for(;n;)s=Math.random()*n|0,i=t[--n],t[n]=t[s],t[s]=i;return t})(e);return"number"==typeof t?s.slice(0,t):s[0]},C=(e={})=>Object.keys(e).map((t=>{const s=e[t];if(!Array.isArray(s))return encodeURIComponent(t)+"="+encodeURIComponent(s);const i=[];for(let e=0;e<s.length;e++)i.push(encodeURIComponent(t+"[]")+"="+encodeURIComponent(s[e]));return i.join("&")})).join("&"),T={escape_html(e){if(e.value)return(e.value+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescape_html(e){if(e.value)return(e.value+"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&#39;/g,"'")},strip_scripts(e){if(e.value)return(e.value+"").replace(/<script.*?>[\s\S]*<\/script>/gi,"")},pluralize(e){const t=1===e.value?e.args[0]:e.args[1];return`${e.value} ${t}`},stringify:e=>JSON.stringify(e.value),count:e=>S(e.value),string:e=>e.value+"","any?":e=>S(e.value)>0,"many?":e=>S(e.value)>1,"one?":e=>1===S(e.value),"none?":e=>!e.value||0===S(e.value),"zero?":e=>0===S(e.value),"contains?":e=>e.value.indexOf(e.args[0])>=0,"false?":e=>!1===e.value,"true?":e=>!0===e.value,"null?":e=>null===e.value,"el_is_active?":e=>o()(e.args[0]).is(".is-active"),disabled_class(e){if(e.value)return"is-disabled"},active_class(e){if(e.value)return"is-active"},hidden_class(e){if(e.value)return"is-hidden"},"current_user_is_admin?":e=>"admin"===e.currentUser.role,"guest_user?"(e){const t=e.currentUser;return!t.id||t.guest},"is_current_user?"(e){const t=e.currentUser;return!!t&&(e.value===t.id||e.value===t.username)},prepend:e=>e.args[0]+e.value,append:e=>e.value+e.args[0],lt:e=>e.value<e.args[0],gt:e=>e.value>e.args[0],eq:e=>e.value===e.args[0],ne:e=>e.value!==e.args[0],in:e=>(e.args[0]||[]).indexOf(e.value)>=0,nin:e=>-1===(e.args[0]||[]).indexOf(e.value),lower_case(e){if(null!=e.value)return e.value.toString().toLowerCase()},upper_case(e){if(null!=e.value)return e.value.toString().toUpperCase()},upper_first(e){if(null!=e.value)return b(e.value.toString())},take(e){if(null!=e.value)return e.value.slice(0,Math.max(0,e.args[0]||0))},skip(e){if(null!=e.value)return e.value.slice(e.args[0])},split(e){if(e.value){return e.value.split(e.args.length>0?e.args[0]:/,[ ]*/).filter((e=>!!e))}return[]}},S=e=>Array.isArray(e)?e.length:e||0;class E{constructor(e,t={}){this.options=Object.assign({},t),this._app=this.options._app,delete this.options._app,this.$template=o()(e),this.$template.data("template",this),this.name=this.$template.attr("class")||this.$template.attr("id")}context(){return this.contexts?this.contexts[this.contexts.length-1]:null}parentContext(e){return this.contexts?this.contexts[this.contexts.length-((e||1)+1)]:null}render(e,t,s,i){null==t&&(t={}),null==i&&(i={}),this._initFilters(s),this.contextMap=i.contextMap||{},this.includeData=i.includeData||{},this.debug=!!i.debug;const n=o()(this.$template.html());this.data=i.rootData||t,this._initContexts(t,i);const a=[];n.each(((e,t)=>{const s=o()(t);this._processNode(s),a.push(j(s))}));const r=o()(e);r.html(a.join("")),r.attr("data-context","root"),r.data("context",this.data),i.contextMap||r.find("[data-context-key]").each(((e,s)=>{const i=o()(s);(t=this.contextMap[i.data("context-key")])&&i.data("context",t)}))}_initFilters(e){this.filters=this.options.filters||T,e&&(this.filters=Object.assign({},this.filters,e)),!this.filters._controller&&this._app.controller&&(this.filters._controller=this._app.controller)}_initContexts(e,t){if(t.contexts)this.contexts=t.contexts;else{const s=t.parentContext||this.parentContext();this.contexts=s?[s,e]:[e]}}_processNode(e,t){if(e.is("script"))return;const s=e.data();if(s&&Object.keys(s).length>0){if(s.bindEach&&!t)return void this._processBindEach(e,s.bindEach);s.template&&(s.bindTo?this._withChildContext(this._processBindingValue(s.bindTo),(()=>{this.context()&&this._processTemplate(e,s)})):this._processTemplate(e,s)),Object.keys(s).forEach((t=>{this._processBinding(e,t,s)}))}e.children().each(((e,t)=>{s.bindTo?this._withChildContext(this._processBindingValue(s.bindTo),(()=>{this._processNode(o()(t))})):this._processNode(o()(t))})),e===this.$caseNode&&(this.caseValue=this.prevCaseValue),e.is("include")&&e.replaceWith(j(e))}_processBindEach(e,t){const s=this._processBindingValue(t);if(s&&Array.isArray(s)){const t=[];s.forEach((s=>{this._withChildContext(s,(()=>{const s=e.clone();s.removeAttr("data-bind-each"),this._processContextMapping(s),this._processNode(s,!0),t.push(j(s))}))}));const i=t.join("");e.html(i),e.replaceWith(i)}else e.remove()}_withChildContext(e,t){this.contexts.push(e),t(),this.contexts.pop()}_processTemplate(e,t){const s=this.$template.parent();A.call(this,e,t.template,s).render(e,this.context()||e.data("context"),this.filters,{root:s,contextMap:this.contextMap,includeData:t,contexts:this.contexts}),e.attr("data-template-selector",t.template),this._processContextMapping(e)}_processContextMapping(e){if(!e.data("context-key")){const t=Math.random().toString(36).substr(2);this.contextMap[t]=this.context(),e.attr("data-context-key",t)}}_processBinding(e,t,s){if(this.$node=e,this._currentBinding=`data-${x(t)}`,!t.match(/bind[A-Z]/))return;let i;const n=t.substr(4);"When"!==n&&(i=this._processBindingValue(s[t])),e.removeAttr(this._currentBinding);const a=null!=i;switch(n){case"Each":case"To":break;case"Class":a&&e.addClass(i);break;case"Text":a&&e.text(i);break;case"Html":a&&e.html(i);break;case"ReplaceWith":a&&e.replaceWith(i);break;case"Value":a&&(e.is("textarea")?e.html(i):e.attr("value",i));break;case"Case":this.prevCaseValue=this.caseValue,this.caseValue=(i||"").toString(),this.$caseNode=e;break;case"When":(e.data("bind-case")?this.prevCaseValue:this.caseValue)!==(s[t]||"").toString()&&$(e);break;case"ShowIf":i?e.show():e.hide();break;case"HideIf":case"ShowUnless":i?e.hide():e.show();break;case"HideUnless":i?e.show():e.hide();break;case"If":i||$(e);break;case"Unless":i&&$(e);break;default:if(n.match(/^Data[A-Z]/))a&&(e.data((o=n.substr(4))[0].toLowerCase()+o.substr(1),i),e.attr(x(n),i));else if(a){const t=x(n);"checked"===t?(e.prop("checked",i),i&&e.attr("checked",!0)):e.attr(t,i)}}var o}_processBindingValue(e){if(!e)return null;if((e=e.toString()).includes("{{")){for(;e.includes("{{");)e=this._processNextBindingToken(e);if(!e.includes("::")&&!e.includes("|"))return e}return this._processValuePaths(e)}_processNextBindingToken(e){const t=e.indexOf("{{")+2,s=e.indexOf("}}"),i=e.substr(t,s-t),n=this._processValuePaths(i)||"";return e.replace(new RegExp(`{{${a=i,a.replace(/([\\/'*+?|()\[\]{}.^$])/g,"\\$1")}}}`,"g"),n);var a}_processValuePaths(e){const t=e.split("||");if(t.length>1){let e=null;for(const s of t)if(e=this._processValuePaths(s.trim()),e)break;return e}const s=e.split("&&");if(s.length>1){let e=null;for(const t of s)if(e=this._processValuePath(t.trim()),!e)return!1;return e}return this._processValuePath(e.trim())}_processValuePath(e){if(!e)return;const[t,...s]=e.split("|"),i=this._getValue(t.trim(),e);return s.reduce(((t,s)=>this._processFilter(s,t,e)),i)}_getValue(e,t){switch(e){case"@":return this.context();case"@@":return this.parentContext();case"true":return!0;case"false":return!1;case".":return this.data;default:const s=parseInt(e,10);if(!isNaN(s))return s;if(e.startsWith("@@"))return this._processValue(_(e.substr(2),this.parentContext()));if(e.startsWith("@"))return this._processValue(_(e.substr(1),this.context()));if(e.startsWith("%"))return this._processValue(_(e.substr(1),this.includeData||{}));if(e.startsWith("="))return e.substr(1);if(e.startsWith('"'))return e.split('"')[1];if(e.startsWith("'"))return e.split("'")[1];if(e.startsWith("App."))return this._processValue(_(e,this._app));if(e.startsWith("$"))return this._processValue(_(e.substr(1),this._app.data));if(e.startsWith("!"))return!this._processValuePath(e.substr(1));let i=this._processValue(_(e,this.data));return void 0===i&&this.filters[e.split("::")[0]]&&(i=this._processFilter(e,void 0,t)),i}}_processValue(e){return"function"===typeof e?e(this.context()):e}_processFilter(e,t,s){const[i,...n]=e.split("::"),a=i.trim();if(!a||!this.filters[a])return t;const o={value:t,valuePath:s,data:this.data,parentContext:this.parentContext(),context:this.context(),includeData:this.includeData,element:this.$node,binding:this._currentBinding,template:this,appData:this._app.data,currentUser:this._app.currentUser,args:n.map((e=>this._processValuePath(e.trim()))),filter:e=>this.filters[e](o),expr:e=>this._processValuePath(e)};return o.filter(a)}}const $=function(e){e.remove(),e.data("template-removed",!0)},j=function(e){return e.is("include")?(e.attr("data-context-key")&&e.children().attr("data-context-key",e.attr("data-context-key")),e.children().attr("data-template-selector",e.attr("data-template-selector")),e.html()):e.data("template-removed")?"":O(e)},O=e=>o()("<div></div>").append(e).html();function A(e,t,s){if(t instanceof E)return t;let i;return s?(i=s.find(t),0===i.length&&(i=o()(t))):i=o()(t),i=i.eq(0),i.data("template")||new E(i,{_app:this._app})}class F{constructor(e,t={}){this.options=Object.assign({},t),this._app=this.options._app,delete this.options._app,this.element=o()(e),this.placeholder=this.element.find(".view-placeholder").eq(0),this.$templates=this.element.children('script[type="template"]'),this.template=new E(this.options.template?o()(this.options.template):this.$templates.eq(0),{_app:this._app}),this.options.target?this.target=this.options.target:(this.target=this.element.find(".view").eq(0),0===this.target.length&&(this.target=o()('<div class="view"></div>').appendTo(this.element))),this.data=this.options.data||this.element.data("view-data"),this.filters=this.filters||this.options.filters||{},this.options.render&&this.on("render",this.options.render),this._controllers=[],this.element.data("view",this),document.addEventListener("turbolinks:visit",(()=>{this.destroy()}),{once:!0})}destroy(){if(!this.destroyed){for(this._bindings&&this._bindings.forEach((e=>{e()}));this._controllers.length>0;){const e=this._controllers.pop();e&&!e.destroyed&&e.destroy()}this.element.data("view",null),this.destroyed=!0}}render(e){return null==e&&(e={}),this.setFilters(e.filters),e.data&&(this.data=e.data),ot(),this.template.render(this.target,this.data||this.target.data("context"),this.filters,e),this.target.show(),this.target.data("view",this),this.placeholder.hide(),this._updateUi(),this._callChildPartialRenderEvents({partial:!1}),this.renderEvents.view&&this.renderEvents.view.call(this,{options:e}),this.trigger("view:render",{options:e}),this.rendered=!0,this.element.addClass("js-rendered"),this}trigger(e,t){(t=t||{}).view=this,this.element.trigger(e,t)}on(e,t){return e=`view:${e}`,this._bindings=this._bindings||[],this._bindings.push((()=>this.element.off(e,null,t))),this.element.on(e,null,t)}renderPartial(e,t,s){"string"===typeof t?s=s||{}:t instanceof E||(s=t||{}),s=s||{},this.setFilters(s.filters),ot();let i="string"===typeof e?this.element.find(e):o()(e);i=I.call(this,i,i.data("context"),t,this.filters,s),t=i.data("template").name;const n={element:i,template:t,partial:!0,options:s};return this._callPartialRenderEvent(i,n),this._callChildPartialRenderEvents(n),this.renderEvents.partial&&this.renderEvents.partial.call(this,n),this.trigger("view:render",n),this._updateUi(),i.attr("data-context","partial"),i}setFilters(e){e&&(this.filters=Object.assign({},this.filters,e))}_callChildPartialRenderEvents(e){this.target.find("[data-template-selector]").each(((t,s)=>{this._callPartialRenderEvent(o()(s),e)}))}_callPartialRenderEvent(e,t){const s=Object.assign({},t);e.data("template-selector")&&(s.template=e.data("template-selector").substr(1));const i=this.renderEvents[s.template];i&&(s.element=e,i.call(this,s))}_updateUi(){Ke(),et(),Qe(),Be(this._app),rt()}}F.prototype.renderEvents={};const D=(e,t,s)=>{e.each(((e,i)=>{const n=o()(i),a=n.data("view")||n.closest("view").data("view");a&&(s&&a.setFilters(s),a.render({data:t}))}))};function I(e,t,s,i,n={}){if(!(s=s||e.data("template")||e.data("template-selector")))return e;if(!(s instanceof E)){const e=o()(s).eq(0);s=e.data("template")||new E(e,{_app:this._app})}t=t||e.data("context")||{};const a=o()("<div></div>");s.render(a,t,i,n);const r=a.children();return r.data("template",s),r.data("context",t),e.replaceWith(r),o()(r)}var M=s(7084),R=s.n(M),V=s(7856),L=s.n(V),N=s(527),P=s.n(N);class U{constructor(e,t){if(this.element=o()(e),this.options=Object.assign({},this.constructor.defaults,t||{}),this._app=this.options._app,delete this.options._app,this._controllers=[],this._unregisters=[],this.element.length>0){let e=this.element.data("controls");e||(e=[],this.element.data("controls",e)),e.push(this),H.call(this),document.addEventListener("turbolinks:visit",(()=>{this.destroy()}),{once:!0})}}destroy(){if(this.destroyed)return;W.call(this);const e=this.element.data("controls");if(e){const t=e.indexOf(this);-1!==t&&e.splice(t,1)}for(;this._controllers.length>0;){const e=this._controllers.pop();e&&!e.destroyed&&e.destroy()}for(;this._unregisters.length>0;){const e=this._unregisters.pop();e&&e()}this.destroyed=!0}renderViews(e){null==e&&(e=this.data);const t=this.filters?z(this):null;this.element.find("view").each(((s,i)=>D(o()(i),e,t))),Ke(),et(),Qe(),Be(this._app),rt()}}const H=function(){this.events&&(this._bindings=[],Object.keys(this.events).forEach((e=>{const t=this.events[e];e.split(",").forEach((e=>{this._bindings.push(q.call(this,e,t))}))})))},q=function(e,t){const s=e.split(" "),i=s[s.length-1],n=i.replace("|"," "),a=this,r=function(e,s){return t.call(a,o()(this),e,s)};if(e===n)return this.element.on(n,r),()=>this.element.off(n,r);{let t=this.element;return e.startsWith("window")?(t=o()(window),e=null):e.startsWith("#")?t=o()("body"):e.startsWith("body")&&(t=o()("body"),e=e.replace("body ","")),e&&(e=e.replace(` ${i}`,"")),t.on(n,e,r),()=>t.off(n,e,r)}},W=function(){this._bindings&&this._bindings.forEach((e=>{e()}))},z=e=>Object.keys(e.filters).reduce(((t,s)=>{const i=e.filters[s];return"function"===typeof i&&(t[s]=i.bind(e)),t}),{});class B extends U{constructor(e,t){super(e,t),this.emptyText=this.options.emptyText||this.element.html()||"",this.setLanguage(this.options.lang||this.options.language||this.element.data("language")||this._app.data.language),this.setMarkdown(this.options.markdown||this.element.data("markdown"))}setMarkdown(e){null==e&&(e=this.markdown),this.markdown=e;const t=Object.assign({},K,{renderer:new Y({language:this.lang})});this.element.html(L().sanitize(R()(e||this.emptyText,t))),this._processCodeBlocks(),this._processLinks()}setLanguage(e){this.lang=e,this.markdown&&this.setMarkdown()}_processLinks(){this.element.find("a").each(((e,t)=>{t.target="_blank",o()(t).on("click",(e=>e.stopPropagation()))}))}_processCodeBlocks(){if(!this.lang||!this.markdown)return;const e=(this.markdown.match(/^``` ?([a-z]*) *$/gm)||[]).map((e=>e.replace(/``` */g,""))).filter(((e,t,s)=>e&&s.indexOf(e)===t));if(e.length<=1)return;const t=e[0],s=s=>{if(!s.is("pre"))return;const i=s.find("code");if(0===i.length)return;const n=i.prop("className").replace(/lang(?:uage)?-/,"");n!==this.lang&&(e.includes(this.lang)||n!==t)&&s.hide()};this.element.find("pre").each(((e,t)=>{const i=o()(t);(i.next().is("pre")||i.prev().is("pre"))&&s(i)}))}}const G=(e,t)=>e.replace(/^if(-not)?:/,"").split(",").includes(t),K={gfm:!0,breaks:!1,smartLists:!0,highlight:(e,t)=>tt(e,t)};class Y extends R().Renderer{constructor(e={}){let t="";e.language&&(t=e.language,delete e.language),super(e),this._language=t}codespan(e){if(e&&e.length>2&&e.startsWith("$")&&e.endsWith("$")){const t=J(e.slice(1,-1));if(t)return t}return super.codespan(e)}code(e,t,s){if(t){if(/^if:/.test(t))return G(t,this._language)?R()(e,K):"";if(/^if-not:/.test(t))return G(t,this._language)?"":R()(e,K);if("%"===t[0])return`<div class="block block--${t.substr(1)}">`+R()(e,K)+"</div>";if("math"===t){const t=J(e);if(t)return`<div>${t}</div>`}}try{return super.code(e,t,s)}catch(i){return console.warn("Failed to highlight markdown code block",i.message),`<pre><code>${e}</code></pre>`}}}const J=e=>P().renderToString(e,{throwOnError:!1});class Q extends F{}Q.prototype.renderEvents={view(){const e=this.target||this.element;e&&window.requestAnimationFrame((()=>{const t=new B(e.find(".markdown"),{_app:this._app});this._controllers.push(t)}))}};var X=s(4631),Z=s.n(X),ee=(s(7165),s(2801),s(4328),s(8657),s(9700),s(5688),s(9898),s(1699),s(2095),s(5292),s(17),s(4504),s(6154),s(790),s(1707),s(9589),s(6876),s(9460),s(9762),s(3693),s(5542),s(44),s(9073),s(6149),s(9570),s(842),s(6392),s(7566),s(8859),s(4874),s(4750),s(3123),s(8176),s(9889),s(6531),s(8059),s(7745),s(2587),s(3057),s(24),s(6702),s(5321),s(7196),s(853),s(5420),s(911),s(6629),s(1201),s(2372),s(4086),s(1149),s(7355),s(9047),s(8919),s(2660),s(785),s(3412),s(2585),s(3986),s(167),s(2792)),te=s(8944),se=s(1512);const ie=Z().Pos;function ne(e,t){const s=e.getCursor("head"),i=e.getCursor("anchor");e.operation((()=>{const n=function(e,t,s,i){if(!i||t>s)return 0;const n=e.clipPos(ie(t,0)),a=e.clipPos(ie(s)),o=e.getRange(n,a);t<=e.firstLine()?e.replaceRange("",n,ie(a.line+1,0)):e.replaceRange("",ie(n.line-1),a);const r=n.line+i;if(r<=e.firstLine())return e.replaceRange(o+"\n",ie(r,0)),e.firstLine()-n.line;const l=e.clipPos(ie(r-1));return e.replaceRange("\n"+o,l),l.line+1-n.line}(e,Math.min(s.line,i.line),Math.max(s.line,i.line),t);e.setSelection(ie(i.line+n,i.ch),ie(s.line+n,s.ch))}))}Z().commands.moveLinesUp=e=>{ne(e,-1)},Z().commands.moveLinesDown=e=>{ne(e,1)},Z().keyMap.default["Alt-Up"]="moveLinesUp",Z().keyMap.default["Alt-Down"]="moveLinesDown",Z().defineMode("coq",(function(e,t){var s={};function i(e,t){if(e.eatSpace())return null;var i=e.next();if(t.begin_sentence&&/[-*+{}]/.test(i))return"coq-bullet";if("("===i)return"*"===e.peek()?(e.next(),t.commentLevel++,t.tokenize=a,t.tokenize(e,t)):(t.begin_sentence=!1,"parenthesis");if(/\s/.test(i)||(t.begin_sentence=!1),"."===i)return"."!==e.peek()?(t.tokenize=o,t.tokenize(e,t)):(e.next(),"operator");if('"'===i)return t.tokenize=n,t.tokenize(e,t);if(")"===i)return"parenthesis";if("~"===i)return e.eatWhile(/\w/),"variable-2";if("`"===i)return e.eatWhile(/\w/),"quote";if(/\d/.test(i))return e.eatWhile(/[\d]/),"number";if(/[+\-*&%=<>!?|]/.test(i))return"operator";if(/[\[\]]/.test(i))return"bracket";e.eatWhile(/\w/);var r=e.current();return s.hasOwnProperty(r)?s[r]:"variable"}function n(e,t){for(var s,n=!1,a=!1;null!=(s=e.next());){if('"'===s&&!a){n=!0;break}a=!a&&"\\"===s}return n&&!a&&(t.tokenize=i),"string"}function a(e,t){for(var s;t.commentLevel&&(s=e.next());)"("===s&&"*"===e.peek()&&(e.next(),t.commentLevel++),"*"===s&&")"===e.peek()&&(e.next(),t.commentLevel--);return t.commentLevel||(t.tokenize=i),"comment"}function o(e,t){if(t.tokenize=i,e.eol()||e.match(/\s/,!1))return t.begin_sentence=!0,"statementend"}return["as","at","cofix","crush","else","end","False","fix","for","forall","fun","if","in","is","let","match","of","Prop","return","struct","then","True","Type","when","with"].map((function(e){s[e]="keyword"})),["admit","Admitted"].map((function(e){s[e]="keyword"})),["Abort","About","Add","All","Arguments","Asymmetric","Axiom","Bind","Canonical","Check","Class","Close","Coercion","CoFixpoint","Comments","CoInductive","Context","Constructors","Contextual","Corollary","Defined","Definition","Delimit","Fail","Eval","End","Example","Export","Fact","Fixpoint","From","Global","Goal","Graph","Hint","Hypotheses","Hypothesis","Implicit","Implicits","Import","Inductive","Infix","Instance","Lemma","Let","Local","Ltac","Module","Morphism","Next","Notation","Obligation","Open","Parameter","Parameters","Prenex","Print","Printing","Program","Patterns","Projections","Proof","Proposition","Qed","Record","Relation","Remark","Require","Reserved","Resolve","Rewrite","Save","Scope","Search","SearchAbout","Section","Set","Show","Strict","Structure","Tactic","Time","Theorem","Types","Unset","Variable","Variables","View"].map((function(e){s[e]="builtin"})),["after","apply","assert","auto","autorewrite","case","change","clear","compute","congruence","constructor","congr","cut","cutrewrite","dependent","destruct","eapply","eassumption","eauto","econstructor","elim","exists","field","firstorder","fold","fourier","generalize","have","hnf","induction","injection","instantiate","intro","intros","inversion","left","move","pattern","pose","refine","remember","rename","replace","revert","rewrite","right","ring","set","simpl","specialize","split","subst","suff","symmetry","transitivity","trivial","unfold","unlock","using","vm_compute","where","wlog"].map((function(e){s[e]="tactic"})),["assumption","by","contradiction","discriminate","exact","now","omega","reflexivity","tauto"].map((function(e){s[e]="terminator"})),{startState:function(){return{begin_sentence:!0,tokenize:i,commentLevel:0}},token:function(e,t){return t.tokenize(e,t)},blockCommentStart:"(*",blockCommentEnd:"*)",lineComment:null}})),Z().defineMIME("text/x-coq",{name:"coq"}),Z().defineMode("nasm",(function(){function e(e){for(var t={},s=e.split(" "),i=0;i<s.length;++i)t[s[i]]=!0;return t}var t=e("aaa aad aam aas adc add and arpl bound bsf bsr bswap bt btc btr bts call cbw cdq clc cld cli clts cmc cmp cmps cmpxchg cwd cwde daa das dec div enter esc hlt idiv imul in inc ins int into invd invlpg iret iretd ja jae jb jbe jc jcxz je jecxz jg jge jl jle jmp jna jnae jnb jnbe jnc jne jng jnge jnl jnle jno jnp jns jnz jo jp jpe jpo js jz lahf lar lds lea leave les lfs lgdt lidt lgs lldt lmsw lock lods loop loope loopz loopnz loopne lsl lss ltr mov movs movsx movzx mul near neg nop not or out outs pop popa popad popf popfd push pusha pushad pushf pushfd rcl rcr rep repe repz repne repnz ret retf rol ror sahf sal sar sbb scas section setae setnb setb setnae setbe setna sete setz setne setnz setl setnge setge setng setle setng setg setnle sets setns setc setnc seto setno setp setpe setnp setpo sgdt sidt shl shld shr shrd sldt smsw stc std sti stos str sub test verr verw wait fwait wait fwait wbinvd xchg xlat xlatb xor equ"),s=e("db dw dd dq dt do dy dz resb resw resd resq rest reso resy resz"),i=e("section segment .data .text .bss"),n=e("ip eip eax ebx ecx edx edi esi ebp esp ax bx cx dx di si bp sp ah al bh bl ch cl dh dl ax bx cx dx cs ds ss es fs gs cr0 cr2 cr3 db0 db1 db2 db3 db6 db7 tr6 tr7 st rax rcx rdx rbs rsp rbp rsi rdi");return{startState:function(){return{tokenize:null}},token:function(e,a){if(a.tokenize)return a.tokenize(e,a);var o,r=e.next();if(";"===r)return e.skipToEnd(),"comment";if("'"===r)return e.skipTo("'"),"string";if('"'===r)return e.eatWhile(/\w/),"string";if("."===r&&(e.eatWhile(/\w/),o=e.current().toLowerCase(),i.propertyIsEnumerable(o)))return"tag";if(/\d/.test(r))return"0"===r&&e.eat("x")?(e.eatWhile(/[0-9a-fA-F]/),"number"):(e.eatWhile(/\d/),"number");if(/\w/.test(r)){if(e.eatWhile(/\w/),e.eat(":"))return"tag";if(o=e.current().toLowerCase(),i.propertyIsEnumerable(o))return"tag"}return t.propertyIsEnumerable(o)?(e.eatWhile(/\w/),"keyword"):s.propertyIsEnumerable(o)?(e.eatWhile(/\w/),"tag"):n.propertyIsEnumerable(o)?(e.eatWhile(/\w/),"builtin"):void 0},lineComment:";"}})),Z().defineMIME("text/x-nasm","nasm"),Z().defineMode("perl6",(function(e,t){var s={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,"==":4,"!=":4,"<=>":4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,BEGIN:[5,1],END:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],$ARG:5,$_:5,"@ARG":5,"@_":5,'$"':5,$$:5,"$(":5,$EGID:5,"$)":5,$0:5,$SUBSEP:5,"$;":5,$UID:5,"$<":5,$EUID:5,"$>":5,$a:5,$b:5,"$^C":5,"$^D":5,$ENV:5,"%ENV":5,"$^F":5,"@F":5,"$^H":5,"%^H":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,if:[1,1],elsif:[1,1],else:[1,1],while:[1,1],unless:[1,1],for:[1,1],foreach:[1,1],q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,y:null},i=function(e,t){var i,n,a;for(i=0;i<e.length;i++)for(a=e[i].split(" "),n=0;n<a.length;n++)s[a[n]]=t};i(["macro sub submethod method multi proto only rule token regex category"],1),i(["module class role package enum grammar slang subset"],1),i(["self"],1),i(["use require"],1),i(["if else elsif unless"],1),i(["let my our state temp has constant"],2),i(["for loop repeat while until gather given"],1),i(["take do when next last redo return contend maybe defer","default exit make continue break goto leave async lift"],1),i(["is as but trusts of returns handles where augment supersede"],1),i(["BEGIN CHECK INIT START FIRST ENTER LEAVE KEEP","UNDO NEXT LAST PRE POST END CATCH CONTROL TEMP"],1),i(["die fail try warn"],1),i(["prec irs ofs ors export deep binary unary reparsed rw parsed cached","readonly defequiv will ref copy inline tighter looser equiv assoc","required"],1),i(["NaN Inf"],1),i(["oo fatal"],1),i(["Object Any Junction Whatever Capture Match","Signature Proxy Matcher Package Module Class","Grammar Scalar Array Hash KeyHash KeySet KeyBag","Pair List Seq Range Set Bag Mapping Void Undef","Failure Exception Code Block Routine Sub Macro","Method Submethod Regex Str Blob Char Byte","Codepoint Grapheme StrPos StrLen Version Num","Complex num complex Bit bit bool True False","Increasing Decreasing Ordered Callable AnyChar","Positional Associative Ordering KeyExtractor","Comparator OrderingPair IO KitchenSink Role","Int int int1 int2 int4 int8 int16 int32 int64","Rat rat rat1 rat2 rat4 rat8 rat16 rat32 rat64","Buf buf buf1 buf2 buf4 buf8 buf16 buf32 buf64","UInt uint uint1 uint2 uint4 uint8 uint16 uint32","uint64 Abstraction utf8 utf16 utf32"],2),i(["eager hyper substr index rindex grep map sort join lines hints chmod","split reduce min max reverse truncate zip cat roundrobin classify","first sum keys values pairs defined delete exists elems end kv any","all one wrap shape key value name pop push shift splice unshift floor","ceiling abs exp log log10 rand sign sqrt sin cos tan round strand","roots cis unpolar polar atan2 pick chop p5chop chomp p5chomp lc","lcfirst uc ucfirst capitalize normalize pack unpack quotemeta comb","samecase sameaccent chars nfd nfc nfkd nfkc printf sprintf caller","evalfile run runinstead nothing want bless chr ord gmtime time eof","localtime gethost getpw chroot getlogin getpeername kill fork wait","perl graphs codes bytes clone print open read write readline say seek","close opendir readdir slurp pos fmt vec link unlink symlink uniq pair","asin atan sec cosec cotan asec acosec acotan sinh cosh tanh asinh","acos acosh atanh sech cosech cotanh sech acosech acotanh asech ok","plan_ok dies_ok lives_ok skip todo pass flunk force_todo use_ok isa_ok","diag is_deeply isnt like skip_rest unlike cmp_ok eval_dies_ok nok_error","eval_lives_ok approx is_approx throws_ok version_lt plan eval succ pred","times nonce once signature new connect operator undef undefine sleep","from to infix postfix prefix circumfix postcircumfix minmax lazy count","unwrap getc pi e context void quasi body each contains rewinddir subst","can isa flush arity assuming rewind callwith callsame nextwith nextsame","attr eval_elsewhere none srand trim trim_start trim_end lastcall WHAT","WHERE HOW WHICH VAR WHO WHENCE ACCEPTS REJECTS does not true iterator by","re im invert flip"],3),i(["div x xx mod also leg cmp before after eq ne le lt","gt ge eqv ff fff and andthen Z X or xor","orelse extra m mm rx s tr"],4);var n="string-2",a=/[goseximacplud]/;function o(e,t,s,i,n){return t.chain=null,t.style=null,t.tail=null,t.tokenize=function(e,t){for(var a,o=!1,r=0;a=e.next();){if(a===s[r]&&!o)return void 0!==s[++r]?(t.chain=s[r],t.style=i,t.tail=n):n&&e.eatWhile(n),t.tokenize=l,i;o=!o&&"\\"==a}return i},t.tokenize(e,t)}function r(e,t,s){return t.tokenize=function(e,t){return e.string==s&&(t.tokenize=l),e.skipToEnd(),"string"},t.tokenize(e,t)}function l(e,t){if(e.eatSpace())return null;if(t.chain)return o(e,t,t.chain,t.style,t.tail);if(e.match(/^\-?[\d\.]/,!1)&&e.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))return"number";if(e.match(/^<<(?=\w)/))return e.eatWhile(/\w/),r(e,t,e.current().substr(2));if(e.sol()&&e.match(/^\=item(?!\w)/))return r(e,t,"=cut");var i=e.next();if('"'==i||"'"==i){if(e.prefix(3)=="<<"+i){var l=e.pos;e.eatWhile(/\w/);var c=e.current().substr(1);if(c&&e.eat(i))return r(e,t,c);e.pos=l}return o(e,t,[i],"string")}if("q"==i&&(!(d=e.look(-2))||!/\w/.test(d)))if("x"==(d=e.look(0))){if("("==(d=e.look(1)))return e.eatSuffix(2),o(e,t,[")"],n,a);if("["==d)return e.eatSuffix(2),o(e,t,["]"],n,a);if("{"==d)return e.eatSuffix(2),o(e,t,["}"],n,a);if("<"==d)return e.eatSuffix(2),o(e,t,[">"],n,a);if(/[\^'"!~\/]/.test(d))return e.eatSuffix(1),o(e,t,[e.eat(d)],n,a)}else if("q"==d){if("("==(d=e.look(1)))return e.eatSuffix(2),o(e,t,[")"],"string");if("["==d)return e.eatSuffix(2),o(e,t,["]"],"string");if("{"==d)return e.eatSuffix(2),o(e,t,["}"],"string");if("<"==d)return e.eatSuffix(2),o(e,t,[">"],"string");if(/[\^'"!~\/]/.test(d))return e.eatSuffix(1),o(e,t,[e.eat(d)],"string")}else if("w"==d){if("("==(d=e.look(1)))return e.eatSuffix(2),o(e,t,[")"],"bracket");if("["==d)return e.eatSuffix(2),o(e,t,["]"],"bracket");if("{"==d)return e.eatSuffix(2),o(e,t,["}"],"bracket");if("<"==d)return e.eatSuffix(2),o(e,t,[">"],"bracket");if(/[\^'"!~\/]/.test(d))return e.eatSuffix(1),o(e,t,[e.eat(d)],"bracket")}else if("r"==d){if("("==(d=e.look(1)))return e.eatSuffix(2),o(e,t,[")"],n,a);if("["==d)return e.eatSuffix(2),o(e,t,["]"],n,a);if("{"==d)return e.eatSuffix(2),o(e,t,["}"],n,a);if("<"==d)return e.eatSuffix(2),o(e,t,[">"],n,a);if(/[\^'"!~\/]/.test(d))return e.eatSuffix(1),o(e,t,[e.eat(d)],n,a)}else if(/[\^'"!~\/(\[{<]/.test(d)){if("("==d)return e.eatSuffix(1),o(e,t,[")"],"string");if("["==d)return e.eatSuffix(1),o(e,t,["]"],"string");if("{"==d)return e.eatSuffix(1),o(e,t,["}"],"string");if("<"==d)return e.eatSuffix(1),o(e,t,[">"],"string");if(/[\^'"!~\/]/.test(d))return o(e,t,[e.eat(d)],"string")}if("m"==i&&((!(d=e.look(-2))||!/\w/.test(d))&&(d=e.eat(/[(\[{<\^'"!~\/]/)))){if(/[\^'"!~\/]/.test(d))return o(e,t,[d],n,a);if("("==d)return o(e,t,[")"],n,a);if("["==d)return o(e,t,["]"],n,a);if("{"==d)return o(e,t,["}"],n,a);if("<"==d)return o(e,t,[">"],n,a)}if("s"==i&&(!(d=/[\/>\]})\w]/.test(e.look(-2)))&&(d=e.eat(/[(\[{<\^'"!~\/]/))))return o(e,t,"["==d?["]","]"]:"{"==d?["}","}"]:"<"==d?[">",">"]:"("==d?[")",")"]:[d,d],n,a);if("y"==i&&(!(d=/[\/>\]})\w]/.test(e.look(-2)))&&(d=e.eat(/[(\[{<\^'"!~\/]/))))return o(e,t,"["==d?["]","]"]:"{"==d?["}","}"]:"<"==d?[">",">"]:"("==d?[")",")"]:[d,d],n,a);if("t"==i&&(!(d=/[\/>\]})\w]/.test(e.look(-2)))&&(d=e.eat("r"))&&(d=e.eat(/[(\[{<\^'"!~\/]/))))return o(e,t,"["==d?["]","]"]:"{"==d?["}","}"]:"<"==d?[">",">"]:"("==d?[")",")"]:[d,d],n,a);if("`"==i)return o(e,t,[i],"variable-2");if("/"==i)return/~\s*$/.test(e.prefix())?o(e,t,[i],n,a):"operator";if("$"==i){l=e.pos;if(e.eatWhile(/\d/)||e.eat("{")&&e.eatWhile(/\d/)&&e.eat("}"))return"variable-2";e.pos=l}if(/[$@%]/.test(i)){l=e.pos;if(e.eat("^")&&e.eat(/[A-Z]/)||!/[@$%&]/.test(e.look(-2))&&e.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var d=e.current();if(s[d])return"variable-2"}e.pos=l}if(/[$@%&]/.test(i)&&(e.eatWhile(/[\w$\[\]]/)||e.eat("{")&&e.eatWhile(/[\w$\[\]]/)&&e.eat("}"))){d=e.current();return s[d]?"variable-2":"variable"}if("#"==i&&"$"!=e.look(-2))return e.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(i)){l=e.pos;if(e.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),s[e.current()])return"operator";e.pos=l}if("_"==i&&1==e.pos){if("_END__"==e.suffix(6))return o(e,t,["\0"],"comment");if("_DATA__"==e.suffix(7))return o(e,t,["\0"],"variable-2");if("_C__"==e.suffix(7))return o(e,t,["\0"],"string")}if(/\w/.test(i)){l=e.pos;if("{"==e.look(-2)&&("}"==e.look(0)||e.eatWhile(/\w/)&&"}"==e.look(0)))return"string";e.pos=l}if(/[A-Z]/.test(i)){var h=e.look(-2);l=e.pos;if(e.eatWhile(/[A-Z_]/),!/[\da-z]/.test(e.look(0)))return(d=s[e.current()])?(d[1]&&(d=d[0]),":"!=h?1==d?"keyword":2==d?"def":3==d?"atom":4==d?"operator":5==d?"variable-2":"meta":"meta"):"meta";e.pos=l}if(/[a-zA-Z_]/.test(i)){h=e.look(-2);return e.eatWhile(/\w/),(d=s[e.current()])?(d[1]&&(d=d[0]),":"!=h?1==d?"keyword":2==d?"def":3==d?"atom":4==d?"operator":5==d?"variable-2":"meta":"meta"):"meta"}return null}return{startState:function(){return{tokenize:l,chain:null,style:null,tail:null}},token:function(e,t){return(t.tokenize||l)(e,t)},electricChars:"{}"}})),Z().defineMIME("text/x-perl6","perl6"),Z().StringStream.prototype.look=function(e){return this.string.charAt(this.pos+(e||0))},Z().StringStream.prototype.prefix=function(e){if(e){var t=this.pos-e;return this.string.substr(t>=0?t:0,e)}return this.string.substr(0,this.pos-1)},Z().StringStream.prototype.suffix=function(e){var t=this.string.length,s=t-this.pos+1;return this.string.substr(this.pos,e&&e<t?e:s)},Z().StringStream.prototype.nsuffix=function(e){var t=this.pos,s=e||this.string.length-this.pos+1;return this.pos+=s,this.string.substr(t,s)},Z().StringStream.prototype.eatSuffix=function(e){var t,s=this.pos+e;s<=0?this.pos=0:s>=(t=this.string.length-1)?this.pos=t:this.pos=s},Z().defineSimpleMode("prolog",{start:[{regex:/"/,token:"string",next:"string_double_quote"},{regex:/`/,token:"string",next:"string_back_quote"},{regex:/'/,token:"atom",next:"atom"},{regex:/[a-z][0-9a-zA-Z_]*/,token:"atom"},{regex:/\s*(?:(?:%.*)|(?:\s+))\s*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/(?:[A-Z_][a-zA-Z0-9_]*)/,token:"variable"},{regex:/(?:0o[0-7]+|0x[0-9a-f]+|0b[01]+|0'(?:''|\\[abfnrtv\\'"`]|\\x?\d+\\|.)|\d+(?:\.\d+(?:e[+-]?\d+)?)?)/,token:"number"},{regex:/([#\$\&\*\+\-\.\/\:\<\=\>\?@\^\~\\]+)/,token:"graphic"},{regex:/\./,token:"point"},{regex:/\!/,token:"cut"},{regex:/[,;\(\)]/,token:"paren"},{regex:/\s+/,token:null}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],atom:[{regex:/'/,token:"atom",next:"start"},{regex:/(?:\\(?:x?\d+)?\\)|(?:'')|(?:\\')|[^']/,token:"atom"}],string_double_quote:[{regex:/"/,token:"string",next:"start"},{regex:/[^"]|""|\\"/,token:"string"}],string_back_quote:[{regex:/`/,token:"string",next:"start"},{regex:/[^`]|``|\\`/,token:"string"}]}),Z().defineMIME("text/x-prolog","prolog"),Z().defineMIME("text/x-purescript","haskell");var ae="and as assert begin class constraint done downto exception external fun esfun function functor include inherit initializer lazy let pub mutable new nonrec object of open or pri rec then to type val virtualtry catch finally do else for if switch while import library export part of show hide is as".split(" "),oe="try catch match with else for if switch while do begin end in module sig struct".split(" "),re="unit int char exn string int32 int64 float bool option mod land lor lxor lsl lsr asr".split(" "),le="true false Error Ok None Some".split(" ");function ce(e){for(var t={},s=0;s<e.length;++s)t[e[s]]=!0;return t}function de(e,t){for(var s=0;null!=e.next();){if(e.eat("'")&&s<=4)return t.tokenize=null,"string";if(!/\w/.test(e.peek()))return t.tokenize=null,"variable-2";s++}return t.tokenize=null,null}function he(e,t){for(var s,i=!1,n=!1;null!=(s=e.next());){if('"'===s&&!n){i=!0;break}n=!n&&"\\"===s}return i&&!n&&(t.tokenize=!1),"string"}function ue(e){return function(t,s){for(var i;i=t.next();){if("*"==i&&t.eat("/")){if(1==e){s.tokenize=null;break}return s.tokenize=ue(e-1),s.tokenize(t,s)}if("/"==i&&t.eat("*"))return s.tokenize=ue(e+1),s.tokenize(t,s)}return"comment"}}function pe(e,t){for(var s,i;t.longString&&null!=(i=e.next());)"|"===s&&"}"===i&&(t.longString=!1),s=i;return t.longString||(t.tokenize=!1),"string"}Z().defineMIME("application/reason",{name:"clike",keywords:ce(ae),blockKeywords:ce(oe),atoms:ce(re),builtin:ce(le),hooks:{"{":function(e,t){if(e.eat("|"))return t.longString=!0,t.tokenize=pe,t.tokenize(e,t)},"[":function(e,t){return e.eat("|")?"operator":null},"|":function(e,t){return e.eat("]"),"operator"},'"':function(e,t){return t.tokenize=he,t.tokenize(e,t)},"'":function(e,t){return t.tokenize=de,t.tokenize(e,t)},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=ue(1),t.tokenize(e,t))}}}),Z().registerHelper("hintWords","application/reason",ae.concat(re).concat(le)),Z().defineMode("reason",(function(e){return Object.assign(Z().getMode(e,"application/reason"),{lineComment:void 0})}),"clike"),se.register(Z()),(0,ee.r)(Z()),Z().registerGlobalHelper("hint","agda-input",((e,t)=>e&&"agda"===e.name),(0,te.N)(ee.H)),Z().registerGlobalHelper("hint","julia-helper",((e,t)=>e&&"julia"===e.name),te.r);var me=Z();class ge extends U{constructor(e,t){super(e,t)}cache(){return this._cache||(this._cache=u(this.stashGroup()),this._cache._=this._cache._||{}),this._cache}stashGroup(){return this.options.stashGroup||"default_group"}getStash(){if(this.stashId)return this.cache().get(this.stashId)}updateStash(){let e=this.getValue();""===e&&(e=" "),e===this.originalValue&&(e=null),(e||this.cache().get(this.stashId))&&this.stashId&&this.cache().set(this.stashId,e)}setStashId(e){this.stashId!==e&&this.setValue(this.getValue(),e,!0)}emptyStash(){this.cache().clear()}setValue(e,t,s){return e!==this.getValue()&&(this.updateStash(),this.originalValue=e,t&&(this.stashId=t),s&&(e=this.getStash()||e)," "===e&&(e=""),this._setValue(e))}isDirty(){return!!this.originalValue&&this.getValue()!==this.originalValue}markClean(){this.originalValue=this.getValue(),this.updateStash()}}var fe=s(5780),_e=s.n(fe);const we=(e,t)=>{const s=new AbortController;return(async()=>{try{await _e()(e,{signal:s.signal}),t&&t()}catch(i){if("AbortError"===i.name)return;throw i}})(),s};const ve=(e,{duration:t=400,finish:s}={})=>{if(e)return e.style.opacity=0,e.style.display="inline-block",e.style.visibility="visible",Se({step:t=>{e.style.opacity=t},finish:s,duration:t})},be=(e,{duration:t=400,finish:s}={})=>{if(e)return Se({step:t=>{e.style.opacity=1-t},finish:()=>{e.style.display="none",e.style.visibility="hidden","function"===typeof s&&s()},duration:t})},xe=(e,{duration:t=400,finish:s}={})=>{if(!e)return;e.style.height=0,e.style.display="block",ke(e);const i=e.scrollHeight;return Se({step:t=>{e.style.height=`${(i*t).toFixed(2)}px`},finish:()=>{e.style.display="block",e.style.height=null,Ce(e),"function"===typeof s&&s()},duration:t})},ye=(e,{duration:t=400,finish:s}={})=>{if(!e)return;const i=e.scrollHeight;return e.style.display="block",ke(e),Se({step:t=>{e.style.height=`${(i*(1-t)).toFixed(2)}px`},finish:()=>{e.style.display="none",e.style.height=null,Ce(e),"function"===typeof s&&s()},duration:t})},ke=e=>Object.assign(e.style,{overflow:"hidden",marginTop:"0",marginBottom:"0",paddingTop:"0",paddingBottom:"0"}),Ce=e=>Object.assign(e.style,{overflow:null,marginTop:null,marginBottom:null,paddingTop:null,paddingBottom:null}),Te=e=>.5-Math.cos(e*Math.PI)/2,Se=({step:e,finish:t,timing:s=Te,duration:i=400})=>{if("function"!==typeof e)throw new TypeError("step must be a function");if("function"!==typeof s)throw new TypeError("timing must be a function");const n=performance.now(),a={id:0};return a.id=requestAnimationFrame((function o(r){const l=0===i?1:Math.max(Math.min((r-n)/i,1),0);e(s(l)),l<1?a.id=requestAnimationFrame(o):"function"===typeof t&&t()})),a};class Ee extends U{constructor(e,t){super(e,t),this.$box=this.element.find(".alert-box"),this.currentAnimation=null,0===this.$box.length&&(this.element.is(".alert-box")?this.$box=this.element:this.$box=o()("<div></div>").addClass("alert-box").appendTo(this.element)),this.$msgContainer=this.$box.find(".message"),0===this.$msgContainer.length&&(this.$msgContainer=this.$box)}container(){return this.options.boxContainer?this.$box:(this.$box.show(),this.element)}sanitize(e,t){return this.options.sanitize?this.options.sanitize(e,t):e}pickMessage(e){const t=this.options[`${e}Message`];return Array.isArray(t)?k(t):"function"===typeof t?t(this):t}showResult(e,t,s){e?this.success(t,s):this.fail(t,s)}success(e,t){e=this.sanitize(e,"success"),this.$box.removeClass(this.options.failClassName).removeClass(this.options.workingClassName).removeClass(this.options.warnClassName).addClass(this.options.successClassName),this.show(e||this.pickMessage("success"),t)}fail(e,t){e=this.sanitize(e,"fail"),this.$box.addClass(this.options.failClassName).removeClass(this.options.successClassName).removeClass(this.options.warnClassName).removeClass(this.options.workingClassName),this.show(e||this.pickMessage("fail"),t)}warn(e,t){e=this.sanitize(e,"fail"),this.$box.addClass(this.options.warnClassName).removeClass(this.options.failClassName).removeClass(this.options.successClassName).removeClass(this.options.workingClassName),this.show(e,t)}working(e,t){e=this.sanitize(e,"working"),this.$box.addClass(this.options.workingClassName).removeClass(this.options.successClassName).removeClass(this.options.failClassName).removeClass(this.options.warnClassName),this.show(e,t)}show(e,t){if(this.update(e,t),this.cancelWaitHide(),!e)return this.hide();const s=this.container();if(0===t)return void s.show();s.hide();const i=()=>this.waitHide(t);this.stopCurrentAnimation(),this.currentAnimation=this.options.useSlide?xe(s.get(0),{finish:i}):ve(s.get(0),{finish:i})}hide(){const e=this.container();this.stopCurrentAnimation(),this.currentAnimation=this.options.useSlide?ye(e.get(0)):be(e.get(0))}cancelWaitHide(){null!=this._waitHide&&this._waitHide.abort()}waitHide(e){(e>0||0!==e&&this.options.displayDuration>0)&&(this.cancelWaitHide(),this._waitHide=we(e||this.options.displayDuration,(()=>this.hide())))}update(e,t){if(!e)return;if(this.element.show(),this.options.showClose&&(e+="<a class='close'>&times;</a>"),this.$msgContainer.html(e),0===t)return;const s=this.container();this.stopCurrentAnimation(),this.currentAnimation=this.options.useSlide?xe(s.get(0)):ve(s.get(0))}stopCurrentAnimation(){this.currentAnimation&&(cancelAnimationFrame(this.currentAnimation.id),this.currentAnimation=null)}}Ee.prototype.events={"a.close click"(e,t){t.preventDefault(),t.stopPropagation(),this.hide()}},Ee.defaults={displayDuration:5e3,successClassName:"success",warnClassName:"warning",failClassName:"alert",workingClassName:"working",successMessage:"",failMessage:"",showClose:!1,boxContainer:!0,useSlide:!1,sanitize:null};const $e={white:"#FFF",yellow:"#ECB613",blue:"#3C7EBB",purple:"#9574E6",black:"#333"},je=["Good Job!","Impressive!","Outstanding!","Correct!","Great!","Correctamundo!","Excellent!"],Oe="default",Ae=function(e,t){return!(null==t.options.commands||!t.options.commands[e])&&(t.options.commands[e](),!0)};me.commands.save=e=>Ae("save",e),me.commands.test=e=>Ae("test",e);const Fe=e=>{e.somethingSelected()?e.indentSelection("add"):e.getOption("indentWithTabs")?e.replaceSelection("\t","end","+input"):e.execCommand("insertSoftTab")},De=e=>{e.indentSelection("subtract")};me.keyMap["vim-insert"].Tab=Fe,me.keyMap["vim-insert"]["Shift-Tab"]=De;const Ie={"\\"(e){e.replaceSelection("\\"),e.execCommand("autocomplete")}},Me={extraKeys:{Space(e){const t=e.state.completionActive;t&&(t.widget.pick(),e.replaceSelection(" "))}},closeCharacters:/[\s]/,completeSingle:!1},Re=function(e,t){t?(e.addKeyMap(Ie),e.setOption("hintOptions",Me)):(e.removeKeyMap(Ie),e.setOption("hintOptions",null))};class Ve extends ge{constructor(e,t){super(e,t),this.options.mode||(this.options.mode=this._app.data.language),this.keyMap=this.options.keyMap||this._app.localStorage.get("editorKeyMap")||Oe,this.options.theme=this.options.theme||this._app.data.editorTheme||"codewars",this.width=this.options.width,this.height=this.element.height(),this.element.addClass("text-editor-container"),this.textarea=this.element.find("textarea"),1===this.textarea.length&&(this.options.value=this.textarea.val(),this.textarea.hide()),this.container=this.element.find(".js-editor"),this.config=Le();const s=this.options.tabSize;this.editor=new me(this.container.get(0),{value:this.options.value||"",mode:this.options.mode,tabSize:s,indentUnit:s,smartIndent:this.options.smartIndent??!0,autoCloseBrackets:this.options.autoCloseBrackets??!0,indentWithTabs:!1,readOnly:this.options.readOnly,lineNumbers:this.options.lineNumbers,lineWrapping:this.options.lineWrapping,foldGutter:this.options.foldGutter,styleActiveLine:this.options.styleActiveLine,electricChars:!1,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],keyMap:this.keyMap,extraKeys:this.extraKeys(),commands:this.options.commands,matchBrackets:!0,undoDepth:600}),"agda"!==this.options.mode&&"julia"!==this.options.mode||Re(this.editor,!0),this.setTheme(this.options.theme),this.editor.on("change",(()=>this.element.trigger("texteditor.change"))),this.editor.on("focus",(()=>{this.focused=!0,this.element.trigger("texteditor.focus")})),this.editor.on("blur",(()=>{this.focused=!1,this.element.trigger("texteditor.blur")})),this.editor.on("scroll",(()=>this.element.trigger("texteditor.scroll"))),(this.options.value||this.options.stashId)&&this.setValue(this.options.value,this.options.stashId,this.options.preferStash),setTimeout((()=>{this.resize(),this.keyMap!==Oe&&this.setBindings(this.keyMap)}),0);const i=this.element.find(".editor-msg-container");i.appendTo(this.container),this.messages=new Ee(i,{boxContainer:!1,showClose:!0,displayDuration:0,successMessage:this.options.successMessage,sanitize:(e,t)=>e?e.replace("Test::Error: ",""):e}),this._controllers.push(this.messages),this.minHeight=this.element.height()}extraKeys(){const e=me.keyMap.default===me.keyMap.macDefault?"Cmd":"Ctrl",t={[`${e}-Enter`]:()=>this.onSubmit(),[`${e}-/`]:()=>this.editor.toggleComment(),Tab:Fe,"Shift-Tab":De};return"vim"!==this.keyMap&&(t.Esc=()=>{this.options.esc?this.options.esc(this):this.toggleFullScreen()}),this.options.extraKeys?Object.assign(t,this.options.extraKeys):t}setExtraKeys(e){this.options.extraKeys=e,this.editor.setOption("extraKeys",this.extraKeys())}toggleBindings(e){this.setBindings(this.keyMap!==e?e:Oe)}setBindings(e){"default"===e&&(e="sublime"),e=e||Oe,this.keyMap=e,this.editor.setOption("keyMap",e),this.editor.setOption("extraKeys",this.extraKeys()),this._app.localStorage.set("editorKeyMap",this.keyMap)}setOption(e,t){this.options.name=t;const s=`set${b(e)}`;this[s]?this[s](t):this.editor.setOption(e,t)}onSubmit(){this.element.trigger("texteditor.submit",this,this.getValue())}getCursorLineStart(){return this.editor.getCursor("from").line}getCursorLineEnd(){return this.editor.getCursor("to").line}selectAllCurrentLines(){this.editor.setSelection(me.Pos(this.getCursorLineStart(),0),this.editor.getCursor("end"))}setTheme(e){this.editor.setOption("theme",e)}setMode(e,t){switch(e){case"nasm":t||(e="c");break;case"bf":t||(e="javascript");break;case"shell":case"sql":t||(e="ruby")}const s=Ne(this.config,e,"smartIndent",!0),i=Ne(this.config,e,"autoCloseBrackets",!0),n=Ne(this.config,e,"indentWithTabs",!1),a=Ne(this.config,e,"tabSize",Ze(e)),o=Xe(e);Re(this.editor,"agda"===o||"julia"===o),this.editor.setOption("mode",o),this.editor.setOption("tabSize",a),this.editor.setOption("indentUnit",a),this.editor.setOption("smartIndent",s),this.editor.setOption("autoCloseBrackets",i),this.editor.setOption("indentWithTabs",n)}setReadOnly(e){this.editor.setOption("readOnly",e)}setCursor(e=0,t=0){this.editor.setCursor(me.Pos(e,t))}scrollToLine(e=0){this.editor.scrollIntoView(me.Pos(e,0))}focus(){this.editor.focus()}getValue(){return this.editor.getValue()}_setValue(e){return""===e&&this.editor.setValue(" "),this.editor.setValue(e||"")}refresh(){const e=this.getValue();this.editor.setValue(""),this._setValue(e)}resize(){const e=this.element.parent();let t=this.fullScreenEnabled?o()(window).height()-20:e.height();this.container.siblings().each((function(e,s){const i=o()(s);"static"===i.css("position")&&i.is(":visible")&&(t-=i.outerHeight(!0))})),t>0&&this.setHeight(t)}setHeight(e,t){if(e<1)throw"height cannot be less than 1";null!=this._setHeightWait&&this._setHeightWait.reject(),t&&(!0===t&&(t=this.minHeight),e<t)||(this.height=e,this.container.height(e),this.editor.setSize({width:"100%",height:Pe(this.height)}))}save(){this.textarea.val(this.getValue()),this.options.emptyStashOnSave&&this.emptyStash(),"function"===typeof this.options.save&&this.options.save(this)}change(e){this.editor.on("change",(()=>e(this)))}enterFullScreen(){this.fullScreenEnabled||(this.fullScreenEnabled=!0,this.options.enterFullScreen?this.options.enterFullScreen():(this.originalScroll=o()(window).scrollTop(),this.originalParent=this.element.parent(),this.element.addClass("is-full-screen"),this.element.appendTo("#app"),this.resize()),this.element.find("li.shrink").show(),this.element.find("li.expand").hide(),o()("#uvTab, #shell, #main_header, #main_footer, #intercom-container").hide(),o()("html").addClass("has-full-screen-control"),this.focus())}exitFullScreen(){this.fullScreenEnabled&&(this.fullScreenEnabled=!1,this.options.exitFullScreen?this.options.exitFullScreen():(this.element.removeClass("is-full-screen"),this.element.appendTo(this.originalParent),this.element.height("")),setTimeout((()=>o()(window).trigger("resize")),0),this.element.find("li.expand").show(),this.element.find("li.shrink").hide(),o()("#uvTab, #shell, #main_header, #main_footer, #intercom-container").show(),o()(window).scrollTop(this.originalScroll),o()("html").removeClass("has-full-screen-control"),this.focus())}toggleFullScreen(){this.fullScreenEnabled?this.exitFullScreen():this.enterFullScreen()}setBorder(e){const t=this.element.find(".CodeMirror").removeClass(`has-${this.currentBorder}-border`);this.currentBorder=e,e&&t.addClass(`has-${e}-border`)}}Ve.prototype.events={"texteditor.change"(){this.updateStash(),this.options.change&&this.options.change(this),this.textarea.text(this.editor.getValue()),null!=this.textarea&&this.textarea.length>0&&this.textarea.val(this.getValue())},"li.expand click"(){this.enterFullScreen()},"li.shrink click"(){this.exitFullScreen()},"window resize"(){this.resize()}},Ve.defaults={value:null,allowFullScreen:!0,tabSize:2,indentUnit:2,theme:null,mode:null,lineNumbers:!0,readOnly:!1,highlightActiveLine:!0,emptyStashOnSave:!1,save:null,change:null,stashGroup:"code_editor",successMessage:je,foldGutter:!0,lineWrapping:!1,styleActiveLine:!0,width:"100%",height:null,esc:null};const Le=()=>{try{const e=localStorage.getItem("editorOptions");return e?JSON.parse(e):{}}catch(e){return{}}},Ne=(e,t,s,i)=>{const n=e[`[${t}]`];return n&&s in n?n[s]:s in e?e[s]:i},Pe=e=>"number"===typeof e?`${e}px`:e;class Ue extends U{constructor(e,t){super(e,t);const s=()=>{this.editor=new Ve(this.element.find(".text-editor-container"),{_app:this._app,mode:"markdown",theme:this.options.theme,lineNumbers:!1,lineWrapping:!0,stashGroup:this.options.stashGroup,value:this.options.originalValue,styleActiveLine:this.options.styleActiveLine,allowFullScreen:this.options.allowFullScreen,enterFullScreen:this.onEnterFullScreen.bind(this),exitFullScreen:this.onExitFullScreen.bind(this),smartIndent:!1,autoCloseBrackets:!1,change:()=>this.refresh(),extraKeys:{End:"goLineRight",Home:"goLineLeft"}}),this.previewDisplay=new B(this.element.find(".markdown").eq(0),{_app:this._app,emptyText:this.options.emptyPreviewText,language:this.options.language}),this._controllers.push(this.editor,this.previewDisplay),this.originalValue=this.options.originalValue||this.editor.getValue(),this.refreshHeight(),setTimeout((()=>this.updatePreview()),0),this.panels=[this.editor.element,this.previewDisplay.element],"function"===typeof this.ready&&this.ready()},i=()=>{this.options.alwaysVisible||this.element.is(":visible")?s():this.destroyed||setTimeout(i,500)};i()}focus(){this.editor.focus()}refreshHeight(e){null==e&&(e=this.options.editorHeight||this.element.height()),this.element.is(":visible")&&(this.fullScreenEnabled||this.editor.setHeight(e))}refresh(){this.updatePreview(),this.isDirty()?this.dirtyFired||(this.element.trigger("markdowneditor.dirty",this,this.getValue()),this.dirtyFired=!0):this.dirtyFired&&this.markClean()}isDirty(){return this.getValue()!==this.originalValue}markClean(){this.originalValue=this.editor.getValue(),this.dirtyFired=!1,this.element.trigger("markdowneditor.clean",this,this.getValue())}getValue(){return this.editor.getValue()}setValue(...e){this.editor.setValue(...e)}setStashId(e){this.editor.setStashId(e)}updatePreview(){this.previewDisplay.setMarkdown(this.getValue())}setLanguage(e){this.previewDisplay.setLanguage(e)}setTheme(e){this.editor.setTheme(e)}appendToParent(e){o()(this).appendTo(e)}resize(){let e=o()(window).height();if(this.fullScreenEnabled){e-=Object.values(this.element.css(["paddingTop","paddingBottom"])).reduce(((e,t)=>parseInt(t,10)),0)}for(let t of this.panels)o()(t).height(e);this.editor.resize()}onEnterFullScreen(){if(!this.fullScreenEnabled){this.fullScreenEnabled=!0,this.originalParents=[],this.originalHeight=this.editor.element.height(),this.fullScreenContainer().appendTo("#app").hide(),this.collapseLink().on("click",(()=>this.editor.exitFullScreen()));for(let e of this.panels)this.originalParents.push(e.parent()),e.addClass("is-full-screen").appendTo(this.fullScreenContainer());ve(this.fullScreenContainer().get(0)),setTimeout((()=>this.resize()),0)}}onExitFullScreen(){if(this.fullScreenEnabled){this.fullScreenEnabled=!1,this.editor.setHeight(this.originalHeight);for(let e=0;e<this.panels.length;e++){this.panels[e].removeClass("is-full-screen").height("").appendTo(this.originalParents[e])}this.fullScreenContainer().remove(),"function"===typeof this.options.exitFullScreen&&this.options.exitFullScreen()}}fullScreenContainer(){return this._fullScreenContainer||(this._fullScreenContainer=o()('<div id="markdown_full_screen"></div>')),this._fullScreenContainer}collapseLink(){return this._collapseLink||(this._collapseLink=o()('<a class="collapse-btn"><i class="icon-moon-collapse"></i>Exit Full Screen</a>').appendTo(this.fullScreenContainer())),this._collapseLink}}Ue.prototype.events={".btn-expand click, .js-expand click"(e,t){t.preventDefault(),t.stopPropagation(),this.editor.enterFullScreen()}},Ue.defaults={allowFullScreen:!0,emptyPreviewText:null,stashGroup:"markdown",language:null,styleActiveLine:!0,editorHeight:null,theme:null,alwaysVisible:!1};var He={agda:"{-# OPTIONS --safe #-}\nmodule Test where\n\nopen import Example\n\ncheck : {A : Set} {a b c : A} \u2192 a \u2261 b \u2192 b \u2261 c \u2192 a \u2261 c\ncheck = _\u21c6_\n",bf:'// You can use the Mocha (JavaScript) framework for testing BF.\n// TODO: replace with your own tests (TDD), these are just here to demonstrate usage.\n\ndescribe("Your Test Suite", function () {\n  it("should return Hello World!", function () {\n    // use runBF() to run your program, you can pass it arguments\n    Test.assertEquals(runBF(), "Hello World!");\n  });\n});\n',c:"// TODO: Replace examples and use TDD by writing your own tests. The code provided here is just a how-to example.\n\n#include <criterion/criterion.h>\n\n// replace with the actual method being tested\nint foo(int,int);\n\nTest(the_multiply_function, should_pass_all_the_tests_provided) {\n    cr_assert_eq(foo(1, 1), 1);\n}\n",cfml:'// https://testbox.ortusbooks.com/\ncomponent extends="CodewarsBaseSpec" {\n    // Submitted solution is written to Solution.cfc\n    function beforeAll(){\n        SUT = createObject( \'Solution\' );\n    }\n\n    function run(){\n        describe( "Example", function(){\n            it( "returns sum", function(){\n                expect( SUT.add(1, 1) ).toBe( 2 );\n            });\n        });\n    }\n}\n',clojure:";; TODO: TDD using clojure.test framework\n",cobol:"123456*8901\n      * ZUT (zOS Unit Test)\n      * See https://github.com/neopragma/cobol-unit-test\n           TESTSUITE 'example tests'\n           TESTCASE 'one plus one equals two'\n           MOVE 1 TO SUMMAND-1\n           MOVE 1 TO SUMMAND-2\n           PERFORM F01-ADD\n           EXPECT RESULT TO BE NUMERIC 2\n",coffeescript:"# Create your own tests here. These are some of the methods available:\n#  Test.expect(boolean, [optional] message)\n#  Test.assertEquals(actual, expected, [optional] message)\n#  Test.assertSimilar(actual, expected, [optional] message)\n#  Test.assertNotEquals(actual, expected, [optional] message)\n",commonlisp:'(in-package #:cl-user)\n(defpackage #:challenge/tests/solution\n  (:use #:cl\n        #:rove\n        #:challenge/solution))\n(in-package #:challenge/tests/solution)\n; Solution can be imported from `challenge/solution`.\n; Optional preloaded package (`challenge/preloaded`) can be provided by kata authors.\n\n; Write tests with Rove (https://github.com/fukamachi/rove).\n; The use of `testing` is recommended for better output on Codewars.\n(deftest test-solution\n  (testing "add"\n    (ok (= (add 1 1) 2))))\n',coq:'Require Solution.\nRequire Import Preloaded.\nFrom CW Require Import Loader.\n\nCWGroup "Solution.example".\n  CWTest "should have the correct type".\n    CWAssert Solution.example : (forall (A : Type) (a b c : A),\n      a = b -> b = c -> a = c).\n  CWTest "should be closed under the global context".\n    CWAssert Solution.example Assumes.\nCWEndGroup.\n',cpp:'// TODO: Replace examples and use TDD by writing your own tests\n\nDescribe(any_group_name_you_want)\n{\n    It(should_do_something)\n    {\n        Assert::That("some value", Equals("another value"));\n    }\n};\n',crystal:'# Spec example:\n# TODO: replace with your own tests (TDD), these are just how-to examples.\n\ndescribe "Solution" do\n  it "should test something" do\n     foo.should eq "bar"\n  end\nend\n',csharp:'namespace Solution {\n  using NUnit.Framework;\n  using System;\n\n  // TODO: Replace examples and use TDD by writing your own tests\n\n  [TestFixture]\n  public class SolutionTest\n  {\n    [Test]\n    public void MyTest()\n    {\n      Assert.AreEqual("expected", "actual");\n    }\n  }\n}\n',dart:'// See https://pub.dartlang.org/packages/test\nimport "package:test/test.dart";\nimport "package:solution/solution.dart";\n\nvoid main() {\n  test("add", () {\n    expect(add(1, 1), equals(2));\n  });\n}\n',elixir:'# TODO: Replace examples and use TDD by writing your own tests\n\ndefmodule TestSolution do\n  use ExUnit.Case\n\n  test "some test description" do\n    assert "actual" == "expected"\n  end\nend\n',elm:'module ExampleTest exposing (..)\n-- Codewars uses [elm-test](https://package.elm-lang.org/packages/elm-explorations/test/1.1.0).\n-- Replace this with your own tests.\n\nimport Expect exposing (Expectation)\nimport Test exposing (..)\n\nimport Example\n\nsuite : Test\nsuite =\n  describe "Example"\n    [ test "add" <|\n      \\_ -> (Example.add 1 1) |> Expect.equal 2\n    ]\n',erlang:'% Test using EUnit (http://erlang.org/doc/apps/eunit/chapter.html)\n% TODO: replace with your own tests (TDD), these are just here to demonstrate usage.\n-module(example_tests).\n-include_lib("eunit/include/eunit.hrl").\n\nexample_test_() ->\n  {"Two Oldest Ages",\n    [{"returns [45, 87] for [1,5,87,45,8,8]", ?_assertMatch([45, 87], [45])}]}.\n',factor:'! Use vocabulary tools.testest for testing.\n! See https://github.com/codewars/testest\n\nUSING: example tools.testest ;\nIN: example.tests\n\n: run-tests ( -- )\n  "Example" describe#{\n    "test case" it#{\n      <{ 1 1 example ->  1 }>\n    }#\n  }#\n;\n\nMAIN: run-tests\n',forth:'\\ ttester.fs with extension for Codewars\n\\ See https://github.com/codewars/ttester-codewars\n\ns" example" describe#{\n  s" returns sum" it#{\n    <{ 1 1 example -> 2 }>\n  }#\n}#\n',fortran:'! CW2 example\nprogram TestCases\n  use CW2\n  use Solution\nimplicit none\n  call describe("add")\n    call it("adds integers")\n      call assertEquals(2, add(1, 1))\n    call endContext()\n  call endContext()\nend program\n',fsharp:'// Fuchu Spec example:\n// TODO: replace with your own tests (TDD), these are just how-to examples.\n// See https://github.com/mausch/Fuchu for documentation\n\nmodule Tests = begin\n    open Fuchu\n    let suite =\n        testList "Solution" [\n            testCase "Example Test" <|\n              fun _ -> Assert.Equal("2+2", 4, 2+2)\n        ]\nend\n',go:'// TODO: replace with your own tests (TDD). An example to get you started is included below.\n// Ginkgo BDD Testing Framework <http://onsi.github.io/ginkgo/>\n// Gomega Matcher Library <http://onsi.github.io/gomega/>\n\npackage kata_test\nimport (\n  . "github.com/onsi/ginkgo"\n  . "github.com/onsi/gomega"\n  . "codewarrior/kata"\n)\nvar _ = Describe("Test Example", func() {\n//   It("should test that the solution returns the correct value", func() {\n//     Expect(Solution(1)).To(Equal(2))\n//   })\n})\n',groovy:"// You can test using JUnit or Spock. JUnit is shown below\n// TODO: replace this example test with your own, this is just here to demonstrate usage.\nimport org.junit.Test\n\nclass TestExample {\n  @Test\n  void returnsProduct() {\n    assert Example.multiply(2, 2) == 4\n  }\n}\n",haskell:'module ExampleSpec where\n-- Tests can be written using Hspec http://hspec.github.io/\n-- Replace this with your own tests.\n\nimport Test.Hspec\nimport Example\n\n-- `spec` of type `Spec` must exist\nspec :: Spec\nspec = do\n    describe "add" $ do\n        it "adds Nums" $ do\n            (add 1 1) `shouldBe` (2 :: Integer)\n\n-- the following line is optional for 8.2\nmain = hspec spec\n',haxe:"// Tests are written using https://github.com/haxe-utest/utest\nimport utest.Assert;\nimport Solution;\n\nclass SolutionTest extends utest.Test {\n  function testExample() {\n    Assert.equals(2, Example.add(1, 1));\n  }\n}\n",idris:'module ExampleSpec\n-- Tests can be written using [specdris](https://github.com/pheymann/specdris)\n-- `specSuite : IO ()` is required.\n\nimport Specdris.Spec\nimport Example\n\n%access export\n%default total\n\nspecSuite : IO ()\nspecSuite = spec $ do\n  describe "add" $ do\n    it "adds two natural numbers" $ do\n      (1 `add` 1) `shouldBe` 2\n',java:'import org.junit.Test;\nimport static org.junit.Assert.assertEquals;\nimport org.junit.runners.JUnit4;\n\n// TODO: Replace examples and use TDD by writing your own tests\n\npublic class SolutionTest {\n    @Test\n    public void testSomething() {\n        // assertEquals("expected", "actual");\n    }\n}\n',javascript:'// Since Node 10, we\'re using Mocha.\n// You can use `chai` for assertions.\nconst chai = require("chai");\nconst assert = chai.assert;\n// Uncomment the following line to disable truncating failure messages for deep equals, do:\n// chai.config.truncateThreshold = 0;\n// Since Node 12, we no longer include assertions from our deprecated custom test framework by default.\n// Uncomment the following to use the old assertions:\n// const Test = require("@codewars/test-compat");\n\ndescribe("Solution", function() {\n  it("should test for something", function() {\n    // Test.assertEquals(1 + 1, 2);\n    // assert.strictEqual(1 + 1, 2);\n  });\n});\n',julia:'# FactCheck example:\n# TODO: replace with your own tests (TDD), these are just how-to examples.\nusing FactCheck\nfacts("Testing basics") do\n  @fact 1 --\x3e 1\n  @fact 2*2 --\x3e 4\n  @fact uppercase("foo") --\x3e "FOO"\n  @fact 2*[1,2,3] --\x3e [2,4,6]\nend\n',kotlin:"// You can test using JUnit or KotlinTest. JUnit is shown below\n// TODO: replace this example test with your own, this is just here to demonstrate usage.\n\n// TODO: replace with whatever your package is called\npackage solution\n\nimport kotlin.test.assertEquals\nimport org.junit.Test\n\nclass TestExample {\n  @Test\n  fun multiply() {\n    assertEquals(4, multiply(2, 2))\n  }\n}\n",lean:"import Preloaded Solution\n\ntheorem submission : SUBMISSION := immediate\n#print axioms submission\n",lua:'-- TODO: Replace examples and use TDD by writing your own tests\nlocal solution = require \'solution\'\ndescribe("solution", function()\n  it("test for something", function()\n    assert.are.same("expected", solution.foo())\n  end)\nend)\n',nasm:"; this is just an example. See https://docs.codewars.com/languages/nasm\n#include <criterion/criterion.h>\nint add(int, int);\nTest(add_test, should_add_integers) {\n  cr_assert_eq(add(1, 1), 2);\n}\n",objc:'// TODO: replace with your own tests, these are just how-to examples.\n// Codewars uses UnitKit unit testing framework.\n// See https://docs.codewars.com/languages/objc/unitkit\n@implementation TestSuite\n- (void) testsIfReturnsActual\n{\n  UKStringsEqual(@"expected", Solution(@"value"));\n  UKStringsNotEqual(@"expected", Solution(@"value"));\n}\n@end\n',ocaml:'(* TODO: replace with your own tests, these are just how-to examples.\n * OUnit Spec example:\n * See http://ounit.forge.ocamlcore.org/api-ounit-2.0.0 for documentation\n *)\n\nmodule Tests = struct\n    open OUnit\n    let suite = [\n        "Suite Name" >:::\n            [\n                "Test Name" >:: (fun _ ->\n                    assert_equal "Expected" "Actual"\n                )\n            ]\n        ]\n    ;;\nend\n',pascal:"unit ExampleTests;\n// Tests are written with [FPTest](https://github.com/graemeg/fptest).\n\n{$mode objfpc}{$H+}\n\ninterface\n\nuses\n  TestFramework,\n  Example;\n\ntype TExampleTests = class(TTestCase)\n  published\n    procedure TestAdd;\nend;\n\nprocedure RegisterTests;\n\nimplementation\n\nprocedure RegisterTests;\nbegin\n  TestFramework.RegisterTest(TExampleTests.Suite);\nend;\n\nprocedure TExampleTests.TestAdd;\nbegin\n  CheckEquals(2, Add(1, 1));\nend;\nend.\n",perl:'# You can use `Test::More` to write tests.\n# https://metacpan.org/pod/Test::More\n# use strict;\n# use warnings;\n# use Test::More;\n# `Test::Most` can be used to load commonly needed features.\n# See https://metacpan.org/pod/Test::Most\nuse Test::Most;\n\n# The name of the solution package is inferred from the code.\nuse Solution;\n\nsubtest "examples" => sub {\n  is(Solution::add(1, 1), 2);\n};\n\ndone_testing();\n',php:'<?php\nuse PHPUnit\\Framework\\TestCase;\n\n// PHPUnit Test Examples:\n// TODO: Replace examples and use TDD by writing your own tests\nclass ExampleTest extends TestCase\n{\n    // test function names should start with "test"\n    public function testThatSomethingShouldHappen() {\n      $this->assertEquals("a", "a");\n      $this->assertEquals([0], [0]);\n    }\n}\n',powershell:"# You can test with Pester (https://github.com/pester/Pester)\n# TODO: replace with your own tests (TDD), these are just here to demonstrate usage.\n$Results = answer_to_life @(4,2)\n\nDescribe 'My Solution' {\n  It 'Should return 42' {\n    $Results[0] | Should be 42\n  }\n}\n",prolog:"% plunit can be used to test solution\n:- begin_tests(example).\n:- include(example).\n\ntest(example_test) :-\n        X is 1+1,\n        assertion(X == 2).\n\n:- end_tests(example).\n",purescript:'module ExampleSpec where\n-- Tests can be written using spec https://purescript-spec.github.io/purescript-spec\n-- Replace this with your own tests.\n\nimport Prelude\n\nimport Test.Spec (Spec, describe, it)\nimport Test.Spec.Assertions (shouldEqual)\n\nimport Example (add\')\n\nspec :: Spec Unit\nspec =\n  describe "Example" do\n    describe "add\'" do\n      it "returns sum" do\n        (add\' 1 1) `shouldEqual` 2\n',python:'import codewars_test as test\n# TODO Write tests\nimport solution # or from solution import example\n\n# test.assert_equals(actual, expected, [optional] message)\n@test.describe("Example")\ndef test_group():\n    @test.it("test case")\n    def test_case():\n        test.assert_equals(1 + 1, 2)\n',r:'# You can test with testthat (http://r-pkgs.had.co.nz/tests.html#test-structure)\n# TODO: replace with your own tests (TDD), these are just here to demonstrate usage.\n\ntest_that("example", {\n  expect_equal(actual, expected)\n})\n',racket:'#lang racket\n(require "solution.rkt")\n(require rackunit\n         codewars/rackunit)\n\n;; codewars/rackunit provides `run-tests`.\n;; See RackUnit documentation. https://docs.racket-lang.org/rackunit\n(run-tests\n  (test-suite\n   "example"\n   (test-case\n    "add"\n    (check-equal? (add 1 1) 2))))\n',raku:'use v6;\n# You can write tests using the standard Test module.\n# https://docs.raku.org/language/testing\nuse Test;\n# The name of the solution module is inferred from the code.\nuse Solution;\n\nsubtest "examples", {\n    is(add(1, 1), 2);\n}\ndone-testing;\n',reason:'/* You can write tests using Jest.\n * See https://github.com/glennsl/bs-jest\n * Replace with your own tests.\n */\nopen Jest;\n\ndescribe("add", () => {\n  open Expect;\n  test("1 + 1", () =>\n    expect(Solution.add(1, 1)) |> toBe(2));\n});\n',ruby:'# From Ruby 3.0, RSpec is used under the hood.\n# See https://rspec.info/\n# Defaults to the global `describe` for backwards compatibility, but `RSpec.desribe` works as well.\ndescribe "Example" do\n  it "should return the sum" do\n    expect(add(1, 1)).to eq(2)\n    # The following is still supported, but new tests should now use them.\n    # Test.assert_equals(add(1, 1), 2)\n  end\nend\n',rust:"// Add your tests here.\n// See https://doc.rust-lang.org/stable/rust-by-example/testing/unit_testing.html\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_add() {\n        assert_eq!(add(1, 2), 3);\n    }\n}\n",scala:'// You can test using ScalaTest (http://www.scalatest.org/).\nimport org.scalatest._\n\n// TODO: replace this example test with your own, this is just here to demonstrate usage.\n// See http://www.scalatest.org/at_a_glance for example usages\nclass ExampleSpec extends FlatSpec with Matchers {\n  "multiply(2, 2)" should "return 4" in {\n    Example.multiply(2, 2) should be (4)\n  }\n}\n',shell:"# TODO: replace with your own tests (TDD). An example to get you started is included below.\n\n# run the solution and store its result\n# output = run_shell args: ['my_arg']\n\n# describe \"Solution\" do\n#   it \"should return the argument passed in\" do\n#     expect(output).to include('my_arg')\n#   end\n# end\n",solidity:'// You can test using JavaScript/Truffle\n// TODO: replace this example test with your own, this is just here to demonstrate usage.\n\nconst Example = artifacts.require("ExampleToken");\ncontract(\'Example\', function(accounts) {\n  it("should put 10000 in the first account", async function() {\n    const m = await Example.deployed();\n\n    const balance = await m.balanceOf.call(accounts[0]);\n    assert.equal(balance.valueOf(), 10000, "10000 wasn\'t in the first account");\n  });\n});\n',sql:"# TODO: replace with your own tests (TDD), these are just how-to examples to get you started.\n\n# Ruby/Rspec/Sequel Example:\n# While the code section is pure SQL, for testing we use Ruby & Rspec.\n# Sequel (https://github.com/jeremyevans/sequel) is used to setup the database and run queries.\n# The connection is already made for you, use DB to access.\n\nDB.create_table :items do\n  primary_key :id\n  String :name\n  Float :price\nend\n\nitems = DB[:items] # Create a dataset\n\n# Populate the table\nitems.insert(:name => 'a', :price => 10)\nitems.insert(:name => 'b', :price => 35)\nitems.insert(:name => 'c', :price => 20)\n\n# calling run_sql will print the results and return them so that you can test data within them.\n# if you want to test different sets of data, then its best to move this code into its own top level describe\n# block. If you are only testing one set though, its better to set the results before you enter a describe block\n# so that the results are presented at the top of the output.\nresults = run_sql\n\ndescribe :items do\n   it \"should return 3 items\" do\n    expect(results.count).to eq 3\n   end\nend\n\n# Other tips about using run_sql:\n# The SQL/code section supports multiple statements, seperated of course by a \";\".\n# When multiple SELECT statements are issued:\n#    run_sql will return an array of arrays, unless only one SELECT statement returned results\n#    INSERT and UPDATE results will not be included in the list\n#    SELECT statements that return no results will not be included in the list\n",swift:'import XCTest\n// XCTest Spec Example:\n// TODO: replace with your own tests (TDD), these are just how-to examples to get you started\n\nclass SolutionTest: XCTestCase {\n    static var allTests = [\n        ("Test Example", testExample),\n    ]\n\n    func testExample() {\n        let actual = 1\n        XCTAssertEqual(actual, 1)\n    }\n}\n\nXCTMain([\n    testCase(SolutionTest.allTests)\n])\n',typescript:'// See https://www.chaijs.com for how to use Chai.\nimport { assert } from "chai";\n\nimport { example } from "./solution";\n\n// TODO Add your tests here\ndescribe("example", function() {\n  it("test", function() {\n    // assert.strictEqual(1 + 1, 2);\n  });\n});\n',vb:"Imports NUnit.Framework\n\n<TestFixture>\nPublic Class AdderTest\n    <Test>\n    Public Sub ShouldAddInts()\n        Assert.AreEqual(2, Adder.Add(1, 1))\n    End Sub\nEnd Class\n"};class qe extends Ve{constructor(e,t){super(e,t)}emptyCodeMsg(){return k(["Code is missing!","Where is the code?","Why you no send me any code?","Present must your code be before run it we can","Code is missing that is why you fail","Code you must!","Feed me code!","Where did the code go?","Some code would be nice...","There seems to be a lack of code going on here","The idea here would be to code something...","Well this isn't going very well. We need some code..."])}defaultFixtureText(e){return He[e]}}qe.prototype.events=Object.assign({},Ve.prototype.events),qe.defaults=Object.assign({},Ve.defaults);class We extends F{configureDisabled(e){if(e.element.parent(".is-disabled").length>0){const t=e.element.find("input");t.addClass("is-disabled"),t.attr("disabled",!0)}}configureMarkdownField(e,t){const s=e.element.find(".markdown-editor"),i=new Ue(s,Object.assign({},t||{},{_app:this._app}));i.ready=function(){e.element.parent(".is-disabled").length>0&&i.editor.setReadOnly(!0)},s.on("texteditor.change",(()=>{e.element.data("context").value=i.getValue()})),s.data("editor",i),s.addClass("js-markdown-editor")}configureCodeEditorField(e,t){const s=new qe(e.element,Object.assign({},t||{},{_app:this._app}));e.element.on("texteditor.change",(()=>{e.element.data("context").value=s.getValue()})),e.element.data("editor",s),e.element.addClass("js-code-editor")}}We.prototype.filters={field_class(e){let t="field";return e.context.id&&(t+=` ${e.context.id}`),e.includeData.required&&(t+=" required"),e.context.errors&&e.context.errors.length>0&&(t+=" has-error"),t},field_value_class(e){let t="field";return e.context.errors&&e.context.errors.length>0&&(t+=" has-error"),t}},We.prototype.renderEvents={view(){this.element.find("select").each(((e,t)=>{const s=o()(t);s.attr("value")&&s.val(s.attr("value"))}))},hidden_field(e){e.element.on("change",(function(){e.element.data("context").value=o()(this).val()}))},input_field(e){e.element.find("input").on("change, keyup",(function(){e.element.data("context").value=o()(this).val()})),this.configureDisabled(e)},checkbox_field(e){e.element.find("input").on("change",(function(){e.element.data("context").value=o()(this).is(":checked")})),this.configureDisabled(e)},markdown_field(e){this.configureMarkdownField(e)},code_editor_field(e){this.configureCodeEditorField(e)}};class ze extends F{constructor(e,t){super(e,t),window.location.hash&&!window.location.hash.includes("/")&&this.element.one("view:render",(()=>{this._app.comments&&setTimeout((()=>{this._app.comments.focus(window.location.hash)}),100)}))}}ze.prototype.filters={"blocked_new?":e=>!!e.appData.created_by_id&&(!(!e.currentUser||!e.currentUser.blocked_by_user_ids)&&e.currentUser.blocked_by_user_ids.indexOf(e.appData.created_by_id)>=0),"blocked_comment?"(e){const t=e.currentUser&&e.currentUser.blocked_user_ids||[];return t.indexOf(e.context.user_id)>=0||t.indexOf(e.context.user_id)>=0},"hide_content?":e=>e.context.masked&&!e.context.markdown,post_label:e=>e.context.id?"Update":1===e.context.nest_level?"Reply":"Post",masked_flag_title:e=>e.context.masked?"Un-flag this comment as having spoilers within it.":"Flag this comment as a spoiler. It will be hidden from users who have not yet solved the kata.","current_user_comment?":e=>e.context.user_id===e.currentUser.id,"has_replies?":e=>null!=e.context.comments&&e.context.comments.length>0,"allow_reply?":e=>!e.filter("blocked_new?")&&0===e.context.nest_level&&(!e.filter("hide_content?")||e.filter("current_user_is_admin?")||e.filter("current_user_comment?")||e.filter("has_replies?")),"can_edit?":e=>e.filter("current_user_comment?")&&!e.filter("has_replies?")||e.filter("current_user_is_admin?"),"can_remove?"(e){const t=0===e.context.nest_level&&e.filter("can_edit?");return!e.context.type&&(t||e.filter("current_user_is_admin?"))},"can_resolve?"(e){if(!e.currentUser)return!1;const t=e.value||e.context;return t["resolvable?"]&&(null!=t.allowed_resolver_ids&&t.allowed_resolver_ids.indexOf(e.currentUser.id)>=0||e.filter("current_user_is_admin?")||e.currentUser.can_resolve_comments)},"labels_allowed?":e=>1!==e.context.nest_level&&null!=e.data.allowedLabels&&e.data.allowedLabels.length>0,new_comment_class(e){let t="";return(e.context.id||e.context.active)&&(t+="is-active"),e.context.modal||(t+=" mt-5"),t},nested_comments_class(e){if(e.context.collapsed||e.expr("@comments | none?"))return"is-hidden"},hr_class(e){if(0===e.data.totalComments)return"is-hidden"},label_tag_class(e){if(!e.context["resolvable?"])return"is-low-light";switch(e.context.label){case"issue":return"is-red";default:return"is-lightened"}},"no_markdown?":e=>!(e.context.masked||e.context.markdown),comment_class(e){let t=e.expr("@type | lower_case");return e.filter("no_markdown?")&&(t+=" no-markdown"),t},label_name:e=>e.context.label_text?e.context.label_text:"No Label",spoiler_class:e=>e.context.masked?"is-active":"is-auto-hidden","show_mark_closed?"(e){if(e.expr("@@ | can_resolve?")&&e.context.nest_level>0)return e.expr("current_user_is_admin?")||!e.context.id}},ze.prototype.renderEvents={view(){this._app.labelVotes.updateVotes(),setTimeout((()=>rt()),100)},partial(e){this._app.votes.updateVotes()},_comment_new(e){if(!(!this._app.currentUser.id||this._app.currentUser.guest)&&!e.element.data("editor")){const t=new Ue(e.element,{_app:this._app,styleActiveLine:!1,editorHeight:135,alwaysVisible:!0});e.element.data("editor",t)}o()("body").find("select").each(((e,t)=>{const s=o()(t);s.attr("value")&&s.val(s.attr("value"))})),this.options.focusEditor&&setTimeout((()=>e.element.data("editor").focus()),100)}};const Be=e=>o()("view").each(((t,s)=>{const i=o()(s);if(!i.data("view")&&0===i.closest("template").length){new(Ge(i.data("view-type")))(i,{_app:e})}})),Ge=e=>{switch(e){case"MarkdownView":return Q;case"CommentsView":return ze;case"FormView":return We;default:return F}},Ke=()=>{o()("[data-vertical-fill]").each(((e,t)=>{const s=o()(t),i=s.height("auto").height();if(s.data("ignoreVerticalFill"))return;let n=s.data("vertical-fill");if(!1===n.mobile&&o()(window).width()<768)s.height("auto");else{"parent"===n&&(n={min:s.parent().height()},n.max=n.min),"number"===typeof n&&(n={min:n});const e=s.offset();n.offset&&(e.top+=n.offset),n.offsetParent&&(e.top-=s.parent().offset().top);let t=Math.max(n.min,o()(window).height()-e.top-((o()("#main_footer").height()||0)+30));n.fitWithinView||(t=Math.max(t,i)),n.max&&(t=Math.min(t,n.max)),s.height(t)}}))};var Ye=s(3372),Je=s.n(Ye);const Qe=()=>{o()("[data-text-time]").each(((e,t)=>{const s=o()(t),i=s.data("text-time");if(i)try{const e=new Date(1e3*parseInt(i,10)),t=e.toISOString();s.text(Je()(e)),s.attr("datetime",t),s.attr("title",t)}catch(n){s.text("unknown")}})),setTimeout((()=>Qe()),2e4)},Xe=e=>{if(!e||/^if(?:-not)?:/.test(e))return"text/plain";switch(e){case"bash":case"shell":return"shell";case"bf":return"text/x-brainfuck";case"c":return"text/x-c";case"cpp":return"text/x-c++src";case"cfml":case"chapel":return"javascript";case"csharp":return"text/x-csharp";case"sql":return"text/x-pgsql";case"solidity":case"typescript":return"application/typescript";case"php":return"text/x-php";case"scala":return"text/x-scala";case"java":return"text/x-java";case"objc":return"text/x-objectivec";case"kotlin":return"text/x-kotlin";case"racket":return"scheme";case"lisp":case"commonlisp":return"text/x-common-lisp";case"ocaml":return"text/x-ocaml";case"fsharp":return"text/x-fsharp";case"nim":return"text/x-nim";case"python":case"python3":return"python";case"purescript":case"idris":return"text/x-haskell";case"elm":return"text/x-elm";case"perl6":case"raku":return"text/x-perl6";case"d":return"text/x-d";case"factor":return"text/x-factor";case"forth":return"text/x-forth";case"coq":return"text/x-coq";case"vb":return"text/x-vb";case"prolog":return"text/x-prolog";case"lean":return"agda";case"math":case"latex":return"text/x-latex";case"cobol":return"text/x-cobol";case"haxe":return"text/x-haxe";case"json":return"application/json";default:return e}},Ze=e=>{switch(e){case"kotlin":case"python":case"python3":case"rust":case"vb":case"cfml":case"raku":case"perl":return 4;default:return 2}},et=function(e){null==e&&(e=o()("body")),e.find("code").each((function(e,t){const s=o()(t);if(s.data("highlighted")||!s.html())return;let i=s.data("language")||s.parent().attr("lang");!i&&/lang(?:uage)?-/.test(s.attr("class")||"")&&(i=s.attr("class").split(" ")[0].replace(/lang(?:uage)?-/,""));try{s.html(tt(s.text(),i)),s.data("highlighted",!0)}catch(n){console.warn(`Failed to highlight: ${n.message}`),console.warn(n)}}))},tt=function(e,t){const s=st(e)?"text/plain":Xe(t),i=document.createElement("div");return me.runMode(e,s,i,{tabSize:Ze(t)}),i.innerHTML},st=e=>{const t=e.split("\n");return t.length>2e3||t.some((e=>e.length>500))};var it=s(3861);const nt="[data-tippy-content]",at=()=>{for(const e of document.querySelectorAll(nt))e._tippy||(0,it.ZP)(e,{delay:[400,0],theme:"codewars",arrow:it.ki})},ot=()=>window.requestAnimationFrame((()=>{for(const e of document.querySelectorAll(nt))e._tippy&&e._tippy.hide()})),rt=()=>o()(window).trigger("resize");class lt extends U{constructor(e,t){super(e,t),this.renderViews()}}class ct extends U{constructor(e,t){super(e,t),this.renderViews()}}class dt extends U{constructor(e,t){super(e,t),this.renderViews()}}class ht extends U{constructor(e,t){super(e,t),this.descriptionShown=!1,this.fixtureShown=!1}postVote(e,t){e.closest("ul").addClass("is-disabled").find("li.is-active").removeClass("is-active"),l().post(this._app.route("challenge_vote"),{vote:t}).then((t=>{const s=t.data;e.closest("ul").removeClass("is-disabled"),s.success?(this._app.data.vote=s.vote,this.renderFeedback()):this._app.alerts.fail(s.message||"Failed to cast vote, please try again later")}))}renderFeedback(){const e=o()("#vote_feedback").data("view");e&&e.render()}isDiscussView(){return o()("body").hasClass("discuss_view")}}ht.prototype.events={"#toggle_description a click"(e){this.descriptionShown?(ye(o()("#description_panel").get(0)),this.descriptionShown=!1,e.text("Show Kata Description")):(this.descriptionMarkdown||(this.descriptionMarkdown=new B("#description",{_app:this._app,language:this._app.data.activeLanguage}),this.descriptionMarkdown.setMarkdown(this._app.data.description),this._controllers.push(this.descriptionMarkdown)),xe(o()("#description_panel").get(0)),this.descriptionShown=!0,e.text("Hide Kata Description"))},"#toggle_fixture a click"(e){"Hide Kata Test Cases"===e.text()?(ye(o()("#fixture_panel").get(0)),e.text("Show Kata Test Cases"),this.fixtureShown=!1):(xe(o()("#fixture_panel").get(0)),e.text("Hide Kata Test Cases"),this.fixtureShown=!0)},"#show_beta_info a click"(){ye(o()("#show_beta_info").get(0)),xe(o()("#beta_info").get(0))},"#show_beta_about a click"(){ye(o()("#show_beta_about").get(0)),xe(o()("#beta_about").get(0))},"ul.vote-assessment li:not(.is-disabled) click"(e,t){let s=e.data("value");(s===this._app.data.vote||1===s&&this._app.data.vote>0)&&(s=null),this.postVote(e,s)},".js-add-suggestion click"(e){this._app.comments.showNewCommentModal({comments:this.isDiscussView()?o()(".comments .new-comment"):o()(""),title:"Please provide constructive feedback explaining the suggestion you have.",label:"enhancement",confirmHtml:"Add Suggestion"})},".js-add-issue click"(e){this._app.comments.showNewCommentModal({comments:this.isDiscussView()?o()(".comments .new-comment"):o()(""),title:"Please provide constructive feedback explaining the issue you found.",label:"issue",confirmHtml:"Add Issue"})},".assessment-ranks .ranks li click"(e){e.closest(".assessment-ranks").find("li.is-active").removeClass("is-active");let t=e.data("rank");t===this._app.data.assessed_rank&&(t=null),l().post(this._app.route("assess_rank"),{rank:t}).then((e=>{const s=e.data;s.success?(this._app.data.assessed_rank=t,this.renderFeedback()):this._app.alerts.fail(s.message||"Failed to cast vote, please try again later")}))}};class ut extends U{constructor(e,t){super(e,t)}}ut.prototype.events={".js-compare-solutions click"(e){const t=e.closest(".js-result-group, .js-solution-group").find(".js-compare");if(t.is(":visible"))ye(t.get(0)),e.removeClass("is-red-text");else{if(e.addClass("is-red-text"),!t.html()){const e=o()(t.data("template"));(e.data("template")||new E(e,{_app:this._app})).render(t,{solution:this._app.data.solution}),et(t)}xe(t.get(0))}ot()}};const pt=e=>{const t=document.createElement("script");t.innerHTML=e,document.body.appendChild(t)},mt=e=>{document.addEventListener("turbolinks:request-start",(e=>{e.data.xhr.setRequestHeader("X-Refreshed","true")}),{once:!0}),n().visit(e)},gt="Show Variations",ft="Hide Variations",_t=(e,t)=>{if(e.text()===gt)if(t.data("fetched"))xe(t.get(0)),e.text(ft);else{const s=o()("<p>Fetching variations...</p>");t.append(s),xe(t.get(0));const i=e.data("reviewId"),n=e.data("groupId");l().get(`/kata/reviews/${i}/groups/${n}/variations`).then((i=>{const n=i.data;if(n.variations.length>0){const e=n.language;for(const s of n.variations){const i=tt(s,e);t.append(o()(`<pre lang="${e}" class="p-2"><code>${i}</code></pre>`))}}t.data("fetched",!0),s.remove(),e.text(ft)}))}else ye(t.get(0)),e.text(gt)};class wt extends U{constructor(e,t){super(e,t),this.renderViews();const s=new ht(this.element,{_app:this._app}),i=new ut(this.element,{_app:this._app});this._controllers.push(s,i),this.commentFilters={showSpoiler:()=>!0}}}wt.prototype.events={".js-show-dups click"(e){_t(e,o()(".js-variations"))},".js-unlock-solutions click"(e){l().post(this._app.route("unlock_solutions"),{},{responseType:"text"}).then((e=>{pt(e.data)}))},".js-unlock-test-cases click"(e){l().post(this._app.route("unlock_test_cases"),{},{responseType:"text"}).then((e=>{pt(e.data)}))}};var vt=s(4989),bt=s(6737),xt=s.n(bt);class yt extends U{constructor(e,t){super(e,t),this.src="",this.connection=null,this.connectionDestroyed=!1,this.darkMode=this._app.darkMode;const s=this.element.data("src");s&&this.connect(this.darkMode?s:s.replace("theme=dark","theme=day"))}destroy(){this.destroyConnection(),n().clearCache(),super.destroy()}connect(e){this.src=e;const t=this.element.get(0),s=t.cloneNode();this.element=o()(s),this.element.attr("src",e),this.connection=(0,vt.vL)({timeout:2e4,iframe:s,methods:{onReady:()=>{},onReceipt:e=>{this.element.trigger("message.notifyReceipt",e)},authorize:async()=>{try{return(await l().post("/api/v1/runner/authorize")).data.token}catch(e){d.Tb(e,{response:e.response&&e.response.data}),this._app.alerts.fail("Authorization Failed")}}}}),this.connectionDestroyed=!1,t.parentNode.replaceChild(s,t)}async run(e){if(!this.connection)return;this.request=e;const t=await this.getChild();if(t){this.element.show();try{const s=await t.run(e);s.result?(this.response=s.result,this.element.trigger("message.notifyResponse",this.response)):s.error&&d.uT(s.error)}catch(s){if(s.code===vt.jK.ConnectionDestroyed&&this.connectionDestroyed)return;d.Tb(s),console.error(s)}}}async display(e){if(!this.connection)return;const t=await this.getChild();if(t)try{t.display(e)}catch(s){if(s.code===vt.jK.ConnectionDestroyed&&this.connectionDestroyed)return;d.Tb(s),console.error(s)}}expand(){if(this.expanded)return;const e=this.element.data("expand");e&&(this.connect(e),this.expanded=!0)}async setTheme(e){if(!this.connection)return;if(this.darkMode===e)return;this.element.show();const t=await this.getChild();if(t)try{t.setOptions({theme:e?"night":"day"}),this.darkMode=e}catch(s){if(s.code===vt.jK.ConnectionDestroyed&&this.connectionDestroyed)return;d.Tb(s),console.error(s)}}async getChild(){if(!this.connection)return null;try{return await this.connection.promise}catch(e){if(e.code===vt.jK.ConnectionDestroyed)return this.connectionDestroyed||(d.Tb(e),console.error(e)),null;if(e.code===vt.jK.ConnectionTimeout){if(this.connectionDestroyed)return null;d.uT("Runner frame connection timed out");const e=new URL(this.src),t=`${e.protocol}//${e.host}`;return this.onConnectionFailure({title:"Connection Timed Out",content:["<p>Timed out while loading the runner frame.</p>","<p>Please verify that nothing is preventing access to",`<a class="underline" href="${t}" target="_blank">${t}</a>,`,"such as ad-blockers or firewall rules.</p>"].join(" ")})}return d.Tb(e),console.error(e),this.onConnectionFailure({title:"Unknown Failure",content:["<p>Unexpected error occured while connecting to the runner frame.","If the problem persists, please let us know any details by opening an issue on",'<a class="underline" href="https://github.com/codewars/codewars.com" target="_blank">GitHub</a>.</p>'].join(" ")})}}destroyConnection(){if(this.connection){try{this.connection.promise.catch((()=>{})),this.connection.destroy()}catch(e){if(e.code!==vt.jK.ConnectionDestroyed)throw e}this.connection=null,this.connectionDestroyed=!0,this.unloadFrame()}}unloadFrame(){const e=this.element.get(0);e.removeAttribute("src");const t=e.cloneNode();e.parentNode.replaceChild(t,e),this.element=o()(t)}reconnect(){this.destroyConnection(),this.connect(this.src)}async onConnectionFailure({title:e,content:t}){const s=document.createElement("div");s.innerHTML=t;switch(await xt()({title:e,content:s,icon:"error",buttons:{reconnect:!0}})){case"reconnect":return this.reconnect(),this.getChild();default:return null}}}class kt extends U{constructor(e,t){super(e,t),this.runner=new yt(this.element.find("iframe"),{_app:this._app}),this.runner.setTheme(this._app.darkMode),this._controllers.push(this.runner),this.options.box&&(this.box=new Ee(this.element,{successMessage:this.options.successMessage,failMessage:this.options.failMessage,warnClassName:"info",displayDuration:0,showClose:this.options.showClose}),this._controllers.push(this.box))}showStatus(e){this.box&&this.runner.request&&(this.runner.request.fixture&&""!==this.runner.request.fixture?this.box.showResult(e,null,0):this.box.warn("No tests cases provided",0))}}kt.prototype.events={"iframe message.notifyResponse"(){this.showStatus(this.runner.response&&this.runner.response.result&&this.runner.response.result.completed)},"#app dark-mode-toggled"(e,t,s){this.runner.setTheme(s)}},kt.defaults={showClose:!1,successMessage:je,failMessage:["Incorrect!","Nope! Try again."],box:!0};class Ct extends U{constructor(e,t){super(e,t)}showRunResult(e){let t=e.closest(".run-result");0===t.length&&(t=e.closest(".panel").find(".run-result")),t.removeClass("is-hidden"),this.result=t.data("runResult"),this.panel=new kt(t,{_app:this._app,box:!1}),this.panel.runner.expand(),this._controllers.push(this.panel),setTimeout((()=>{this.panel.runner.display(this.result)}),500);const s=this.result.output||this.result.response&&this.result.response.result&&this.result.response.result.output;s&&this.panel.runner.element.height(Math.min(30*s.length+200,400))}}Ct.prototype.events={".code-snippet-list-item.is-collapsed click"(e){e.removeClass("is-collapsed")},".code-snippet-list-item.is-collapsed a click"(e,t){t.preventDefault()},"a.js-show-fixture click"(e){e.closest(".panel").find(".code-snippet-fixture-details").show(),e.closest("li").hide()},"a.js-show-run-result click"(e){this.showRunResult(e),e.closest("li").hide()},".run-result-link a click"(e){const t=e.closest(".run-result-link").hide();this.showRunResult(t.next())}};class Tt extends U{constructor(e,t){super(e,t);const s=new Ct(this.element,{_app:this._app});this._controllers.push(s)}}const St=e=>{Et(`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}`)},Et=(e,t={})=>{const s=t.width||550,i=t.height||450,n=t.left||Math.round(screen.width/2-s/2),a=t.top||Math.round(screen.height/2-i/2);window.open(e,"_blank",`left=${n},top=${a},width=${s},height=${i},personalbar=0,toolbar=0,scrollbars=1,resizable=1`)};class $t extends U{constructor(e,t){super(e,t),this._app.data.permissions&&!1!==this._app.data.permissions.save||o()(".js-edit-challenge").remove()}}$t.prototype.events={".js-share-email click"(e,t){window.open(e.attr("href"),"mail"),t.preventDefault(),t.stopPropagation()},".js-share-twitter click"(e){St(e.data("share-text"))},".js-share-facebook click"(e){((e={})=>{const t=encodeURIComponent(e.imageUrl||o()('meta[property="og:image"]').attr("content")),s=encodeURIComponent(e.url||o()('meta[property="og:url"]').attr("content")),i=encodeURIComponent(e.title||o()('meta[property="og:title"]').attr("content")),n=encodeURIComponent(e.body||o()('meta[property="og:description"]').attr("content"));Et(`https://www.facebook.com/sharer/sharer.php?s=100&p[url]=${s}&p[images][0]=${t}&p[title]=${i}&p[summary]=${n}`,e)})({title:e.data("share-title"),body:e.data("share-body")})}};class jt extends U{constructor(e,t){super(e,t),this.renderViews();const s=new ht(this.element,{_app:this._app}),i=new $t(this.element.find(".js-train-social"),{_app:this._app});this._controllers.push(s,i)}}jt.prototype.events={".js-unlock-test-cases click"(e){l().post(this._app.route("unlock_test_cases"),{},{responseType:"text"}).then((e=>{pt(e.data)}))}};const Ot=(e,t)=>{var s,i,n,a,o,r,l,c,d,h,u;return i=(s=At).setupOpts(t),n=e.serializeArray().map((e=>({name:e.name,value:e.value.replace(/\r\n/g,"\n")}))),s.readCheckboxUncheckedValues(n,i,e),a={},n.forEach((t=>{o=t.name,r=t.value,c=s.extractTypeAndNameWithNoType(o),d=c.nameWithNoType,(h=c.type)||(h=s.attrFromInputWithName(e,o,"data-value-type")),s.validateType(o,h,i),"skip"!==h&&(u=s.splitInputNameIntoKeysArray(d),l=s.parseValue(r,o,h,i),!l&&s.shouldSkipFalsy(e,o,d,h,i)||s.deepSet(a,u,l,i))})),a},At={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},boolean:function(e){return-1===["false","null","undefined","","0"].indexOf(e)},null:function(e){return-1===["false","null","undefined","","0"].indexOf(e)?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},auto:function(e){return At.parseValue(e,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(e){var t,s,i,n,a;for(t in null==e&&(e={}),i=At.defaultOptions||{},s=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","skipFalsyValuesForTypes","skipFalsyValuesForFields","customTypes","defaultTypes","useIntKeysAsArrayIndex"],e)if(-1===s.indexOf(t))throw new Error("serializeJSON ERROR: invalid option '"+t+"'. Please use one of "+s.join(", "));return a=(n=function(t){return!1!==e[t]&&""!==e[t]&&(e[t]||i[t])})("parseAll"),{checkboxUncheckedValue:n("checkboxUncheckedValue"),parseNumbers:a||n("parseNumbers"),parseBooleans:a||n("parseBooleans"),parseNulls:a||n("parseNulls"),parseWithFunction:n("parseWithFunction"),skipFalsyValuesForTypes:n("skipFalsyValuesForTypes"),skipFalsyValuesForFields:n("skipFalsyValuesForFields"),typeFunctions:Object.assign({},n("defaultTypes"),n("customTypes")),useIntKeysAsArrayIndex:n("useIntKeysAsArrayIndex")}},parseValue:function(e,t,s,i){var n,a;return n=At,a=e,i.typeFunctions&&s&&i.typeFunctions[s]?a=i.typeFunctions[s](e):i.parseNumbers&&n.isNumeric(e)?a=Number(e):!i.parseBooleans||"true"!==e&&"false"!==e?i.parseNulls&&"null"==e?a=null:i.typeFunctions&&i.typeFunctions.string&&(a=i.typeFunctions.string(e)):a="true"===e,i.parseWithFunction&&!s&&(a=i.parseWithFunction(a,t)),a},isObject:function(e){return e===Object(e)},isUndefined:function(e){return void 0===e},isValidArrayIndex:function(e){return/^[0-9]+$/.test(String(e))},isNumeric:function(e){return e-parseFloat(e)>=0},optionKeys:function(e){return Object.keys(e)},readCheckboxUncheckedValues:function(e,t,s){var i,n,a;null==t&&(t={}),i="input[type=checkbox][name]:not(:checked):not([disabled])",s.find(i).add(s.filter(i)).each((function(s,i){if(n=o()(i),null==(a=n.attr("data-unchecked-value"))&&(a=t.checkboxUncheckedValue),null!=a){if(i.name&&-1!==i.name.indexOf("[]["))throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+i.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");e.push({name:i.name,value:a})}}))},extractTypeAndNameWithNoType:function(e){var t;return(t=e.match(/(.*):([^:]+)$/))?{nameWithNoType:t[1],type:t[2]}:{nameWithNoType:e,type:null}},shouldSkipFalsy:function(e,t,s,i,n){var a=At.attrFromInputWithName(e,t,"data-skip-falsy");if(null!=a)return"false"!==a;var o=n.skipFalsyValuesForFields;if(o&&(-1!==o.indexOf(s)||-1!==o.indexOf(t)))return!0;var r=n.skipFalsyValuesForTypes;return null==i&&(i="string"),!(!r||-1===r.indexOf(i))},attrFromInputWithName:function(e,t,s){var i;return i='[name="'+t.replace(/(:|\.|\[|\]|\s)/g,"\\$1")+'"]',e.find(i).add(e.filter(i)).attr(s)},validateType:function(e,t,s){var i,n;if(i=(n=At).optionKeys(s?s.typeFunctions:n.defaultOptions.defaultTypes),t&&-1===i.indexOf(t))throw new Error("serializeJSON ERROR: Invalid type "+t+" found in input name '"+e+"', please use one of "+i.join(", "));return!0},splitInputNameIntoKeysArray:function(e){var t;return At,""===(t=(t=e.split("[")).map((e=>e.replace(/\]/g,""))))[0]&&t.shift(),t},deepSet:function(e,t,s,i){var n,a,o,r,l,c;if(null==i&&(i={}),(c=At).isUndefined(e))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!t||0===t.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");n=t[0],1===t.length?""===n?e.push(s):e[n]=s:(a=t[1],""===n&&(l=e[r=e.length-1],n=c.isObject(l)&&(c.isUndefined(l[a])||t.length>2)?r:r+1),""===a||i.useIntKeysAsArrayIndex&&c.isValidArrayIndex(a)?!c.isUndefined(e[n])&&Array.isArray(e[n])||(e[n]=[]):!c.isUndefined(e[n])&&c.isObject(e[n])||(e[n]={}),o=t.slice(1),c.deepSet(e[n],o,s,i))}},Ft=e=>"object"===typeof e&&null!==e&&"progress"===e._type;class Dt{static find(e){return this.requests.find((t=>t.dmid===e))}static register(e){f.connect(e),f.register("private","defer_response",(e=>{const t=Dt.find(e.dmid);t?t.handleData(e):Dt.data[e.dmid]=e}),e)}static push(e,t){this.register(t),this.requests.push(e)}static remove(e){const t=this.requests.indexOf(e);t>=0&&this.requests.splice(t,1)}constructor({url:e,method:t,data:s,timeout:i,deferred:n},a){if(Dt.push(this,a),"function"!==typeof n)throw new TypeError("deferred must be a function");this.start=Date.now(),this.timeout=i,this.handler=n,this.pollDuration=2500,l()({url:e,method:t,data:s}).then((e=>{const t=e.data;if(t.dmid){this.dmid=t.dmid;const e=Dt.data[t.dmid];e?this.handleData(e):(this.status="polling",this.poll())}else this.handleData(t)}))}handleData(e){if(Ft(e))return;if("complete"===this.status)return;const t=this.handler,s=e=>{t(e),this.status="complete",delete Dt.data[this.dmid],Dt.remove(this)};e&&e.cached?this.getCache(s):s(e)}poll(){setTimeout((()=>{"polling"===this.status&&this.getCache((e=>{Ft(e)?Date.now()-this.start<this.timeout?this.poll():this.handleData():this.handleData(e)}))}),this.pollDuration)}cancel(){this.status="cancelled"}getCache(e){this.dmid&&"complete"!==this.status&&l().get(`/api/v1/deferred/${this.dmid}`).then((t=>{const s=t.data;s&&e(s)}))}}Dt.data={},Dt.requests=[];var It=s(1657);const Mt=async()=>{new It.Z.Tour({useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0},scrollTo:{behavior:"smooth",block:"center"},classes:"codewars",arrow:!1,buttons:[{text:"Back",action(){return this.back()}},{text:"Next",action(){return this.next()}}]},steps:[{title:"Getting Started",text:"Let's go through what each component is for.",buttons:[{text:"OK",action(){return this.next()}}]},{title:"Name",text:"The name is used to uniquely identify a kata.\nThe best practice is to use a name that gives other users a good idea of what type of challenge they will be getting themselves into.",attachTo:{element:'[data-tour="name"]',on:"bottom-start"},buttons:[{text:"Next",action(){return this.next()}}]},{title:"Discipline",text:'\n<div class="prose">\n<p>The discipline is the category that the kata belongs to.\nYou should pick the category that best describes what the kata is intended to focus on.</p>\n<ul>\n<li>Fundamentals: Focus on core language and API knowledge</li>\n<li>Algorithms: Focus on the logic required to complete the task</li>\n<li>Bug Fixes: Focus on fixing the code</li>\n<li>Refactoring: Focus on transforming and improving the code</li>\n<li>Puzzles: Focus on creativity and solving puzzles</li>\n</ul>\n</div>\n',attachTo:{element:'[data-tour="discipline"]',on:"auto"}},{title:"Description",text:"Use this editor to add description of the kata in Markdown.",attachTo:{element:'[data-tour="description"]',on:"auto"}},{title:"Language",text:"Select the language you want to use here.",attachTo:{element:'[data-tour="language"]',on:"bottom-start"}},{title:"Complete Solution",text:"A working solution for your kata. Make sure to write a correct and maintainable code.",attachTo:{element:'[data-tour="complete-solution"]',on:"bottom-start"}},{title:"Initial Solution",text:"The code users start from when training on your kata.",attachTo:{element:'[data-tour="initial-solution"]',on:"bottom-start"}},{title:"Preloaded",text:"Optional code that can be provided for different purposes. For example, reducing boilerplate.",attachTo:{element:'[data-tour="preloaded"]',on:"bottom-start"}},{title:"Test Cases",text:"The test cases are the set of tests that users need to pass in order to complete your kata.",attachTo:{element:'[data-tour="test-cases"]',on:"bottom-end"}},{title:"Example Test Cases",text:"The example test cases are the set of tests that users can edit while solving your kata.",attachTo:{element:'[data-tour="sample-tests"]',on:"bottom-start"}},{title:"Examples",text:"Try inserting an example to get you started.",attachTo:{element:'[data-tour="example"]',on:"bottom-end"},buttons:[{text:"Back",action(){return this.back()}},{text:"OK",action(){return this.next()}}]}]}).start()};class Rt extends U{constructor(e,t){super(e,t),this.renderViews();const s=["answer","fixture","setup","package","example_fixture"];if(this._app.data.languages&&!this._app.data.languagesDecoded){for(const e of Object.keys(this._app.data.languages)){const t=this._app.data.languages[e];s.forEach((e=>{t[e]=decodeURIComponent(t[e])}))}this._app.data.languagesDecoded=!0}Dt.register(this._app.ablyConfig);const i=o()("form");i.length>0&&i.get(0).reset(),this.outputPanel=new kt("#code_results",{_app:this._app,showClose:!0});const n={_app:this._app,change:e=>{e.isDirty()&&!this.languageBeingSet&&(this.dirty=!0)},stashGroup:this._app.data.id||"newkata"};this.cache=u(n.stashGroup),this.codeSetup=new Ve("#code_setup",n),this.codeAnswer=new Ve("#code_answer",n),this.codeFixture=new Ve("#code_fixture",n),this.codeExampleFixture=new Ve("#code_example_fixture",n),this.codePackage=new Ve("#code_package",n),this.editors=[this.codeSetup,this.codeAnswer,this.codeFixture,this.codeExampleFixture,this.codePackage],this.markdownEditor=new Ue("#description",{_app:this._app,stashGroup:n.stashGroup}),this._controllers.push(this.outputPanel,...this.editors,this.markdownEditor),this.cache.isEmpty()?this.setLanguage():this._app.confirmModal.show({titleHtml:"We found un-saved edits",messageHtml:"You have local edits that have not been saved. What would you like to do with them?",cancelHtml:"Discard",confirmHtml:"Keep",cancel:()=>{this.emptyStashes(),this.setLanguage()},confirm:()=>{this.dirty=!0,this.setLanguage()}}),this.dirty=!1,this._app.data.showIntro&&setTimeout((()=>Mt()),1e3)}getFormData(){const{code_challenge:e}=Ot(o()("form.simple_form[action]"),{parseBooleans:!0});return{languages:this._app.data.languages,language:this._app.data.language,code_challenge:e}}getVersion(){return o()(".lang-dd:visible dd.is-active").data("version")}setVersion(e){this._app.data.languages[this._app.data.language].default_version=e||this.getVersion()}setLanguage(e){null==e&&(e=this._app.data.language),this._app.data.language=e,o()(".lang-dd").hide(),o()(`#${e}_version`).show();let t=this._app.data.languages[e];t||(this._app.data.languages[e]=t={name:e}),this.setVersion();const s=(s,i,n)=>{if(i.save(),setTimeout((()=>i.setMode(e,"answer"===s||"setup"===s)),0),i.setReadOnly(n),i.options.save=()=>t[s]=i.getValue(),i.setValue(t[s],`${e}_${s}`,!0),this._app.data.languageErrors&&(o()("#languages .has-error").removeClass("has-error"),this._app.data.languageErrors[e]))for(let t of this._app.data.languageErrors[e]){const e=`#code_${t.name}`;Vt(e,t.message,{ignoreMsg:!0}),o()(`.tabs a[href='${e}']`).closest("dd").addClass("has-error")}},i=this._app.data.lockedFixtures.indexOf(e)>=0,n=o()(".icon-moon-lock");i?n.show():n.hide(),this.languageBeingSet=!0,s("setup",this.codeSetup),s("answer",this.codeAnswer),s("fixture",this.codeFixture,i),s("example_fixture",this.codeExampleFixture),s("package",this.codePackage),this.languageBeingSet=!1,this.markdownEditor.setStashId("description"),this.markdownEditor.setLanguage(e),v(this._app.route("edit",{language:e}))}save(e){this._app.data.published?this.publish(e):(this.beforeSubmit(),l().post(this._app.route("save"),this.getFormData(),{responseType:"text"}).then((t=>{this.emptyStashes(),pt(t.data),"function"===typeof e&&e()})))}beforeSubmit(){for(const e of this.editors)e.save();this.markdownEditor.editor.exitFullScreen()}publish(e){var t,s;this.beforeSubmit(),t={url:this._app.route("publish"),method:"POST",data:this.getFormData(),timeout:5e4,deferred:t=>{if(t&&t.html){this.emptyStashes();const s=window.location.href;n().controller.cache.put(s,n().Snapshot.wrap(t.html));const i=o()('meta[name="csrf-token"]').attr("content");document.addEventListener("turbolinks:render",(()=>{o()("meta[name=csrf-token]").attr("content",i)}),{once:!0}),n().visit(s,{action:"restore"}),"function"===typeof e&&e()}else this._app.confirmModal.show({titleHtml:"<i class='icon-moon-warning'></i> Publishing Timed Out!",messageHtml:"The server timed out while trying to publish your changes."})}},s=this._app.ablyConfig,new Dt(t,s),this._app.confirmModal.show({hideActions:!0,titleHtml:`<div class="inline-block w-8 pr-2">${Nt}</div>Please wait while we publish`,messageHtml:"We are validating your code and publishing your changes. This shouldn't take too long."})}emptyStashes(){this.cache.clear()}validateCode(){this.running=!0;const e=o()("#code_results .alert-box");e.is(":visible")||xe(e.get(0),{duration:100});const t={language:this._app.data.language,code:this._activeSolution(),fixture:this._activeTest(),setup:this.codePackage.getValue(),languageVersion:this.getVersion(),testFramework:this._app.data.testFrameworks[this._app.data.language]};this.outputPanel.runner.run(t)}handleResponse(){}insertExample(e){const t=()=>{const t=this._app.route("language_example",{language:this._app.data.language,category:e});l().get(t).then((e=>{const t=e.data;t.success&&(this.codeAnswer.setValue(t.answer),this.codeFixture.setValue(t.fixture),this.codeSetup.setValue(t.setup))}))};this.codeAnswer.getValue()||this.codeSetup.getValue()||this.codeFixture.getValue()?this._app.confirmModal.show({titleHtml:'<i class="icon-moon-warning"></i> Possible loss of data!',messageHtml:"You are about to replace your current code with example code. Are you sure you want to discard your changes?",confirmHtml:"Yes, go ahead and replace with example code",confirm:t}):t()}_activeSolution(){const e=document.querySelector('[data-editor-group="solutions"] .is-active .code-editor');switch(e&&e.id){case"code_setup":return this.codeSetup.getValue();case"code_answer":case"code_package":default:return this.codeAnswer.getValue()}}_activeTest(){const e=document.querySelector('[data-editor-group="tests"] .is-active .code-editor');switch(e&&e.id){case"code_example_fixture":return this.codeExampleFixture.getValue();case"code_fixture":default:return this.codeFixture.getValue()}}}Rt.prototype.events={"window beforeunload"(e,t){if(this.dirty)return t.preventDefault(),"You risk losing your progress!"},"window keydown"(e,t){return 8!==t.keyCode||o()(t.target).is("input, textarea")?83===t.keyCode&&t.metaKey?(this.save(),t.preventDefault(),!1):void 0:(t.preventDefault(),!1)},"#validate_answer click"(e,t){t.preventDefault(),this.validateCode()},"#code_answer texteditor.submit, #code_fixture texteditor.submit, #code_package texteditor.submit, #code_example_fixture texteditor.submit"(){this.validateCode()},"#insert_example click"(e,t){t.preventDefault(),this.insertExample(o()("#code_challenge_category").val())},"#categories li click"(e,t){o()("#code_challenge_category").val(e.data("value")),o()("#categories li").removeClass("is-active"),e.addClass("is-active")},"#language_dd dd click"(e,t){this.setLanguage(e.data("language"))},".lang-dd dd click"(e,t){this.setVersion()},"#revert click"(e,t){t.preventDefault(),this.emptyStashes(),n().visit()},"#retire click"(){this._app.confirmModal.show({titleHtml:"Are you sure you want to retire this kata?",messageHtml:"This cannot be undone via the UI",confirmHtml:"Retire it",confirm:()=>{l().post(this._app.route("retire")).then((e=>{e.data.success&&n().visit()}))}})},"#save click"(e,t){t.preventDefault(),this.save()},"#preview click"(e,t){t.preventDefault();const s=()=>n().visit(this._app.route("preview",{language:this._app.data.language}));this.dirty?this._app.confirmModal.show({titleHtml:"You have un-saved changes",messageHtml:"You must save your changes before previewing. Do you want to continue?",confirmHtml:"Yes, I want to save changes and continue",confirm:()=>{this.save(s)}}):s()},"#publish click"(e,t){t.preventDefault(),this.publish()},"#unpublish click"(e,t){t.preventDefault(),this.beforeSubmit(),l().post(this._app.route("unpublish"),this.getFormData(),{responseType:"text"}).then((e=>{this.emptyStashes(),pt(e.data)}))},"#delete click"(e,t){t.preventDefault(),this._app.confirmModal.show({titleHtml:'<i class="icon-moon-warning"></i> Are you sure you want to delete this code kata?',messageHtml:"You will not be able to undo this action",confirmHtml:"Yes, I want to delete this kata",confirm:()=>{l().delete(this._app.route("destroy"),{responseType:"text"}).then((e=>{pt(e.data)}))}})},"#code_answerLabel click"(){setTimeout((()=>{this.codeAnswer.refresh(),this.codeAnswer.resize()}),0)},"#initial_setupLabel click"(){setTimeout((()=>{this.codeSetup.refresh(),this.codeSetup.resize()}),0)},"#code_packageLabel click"(){setTimeout((()=>{this.codePackage.refresh(),this.codePackage.resize()}),0)},"#code_fixtureLabel click"(){setTimeout((()=>{this.codeFixture.refresh(),this.codeFixture.resize()}),0)},"#code_exampleFixtureLabel click"(){setTimeout((()=>{this.codeExampleFixture.refresh(),this.codeExampleFixture.resize()}),0)},"input change"(){this.dirty=!0},"textarea change"(){this.dirty=!0},"select change"(){this.dirty=!0},"#language_dd i.remove click"(e,t){t.stopPropagation(),t.preventDefault();const s=e.closest("dd").data("language"),i=e.closest("dd").text(),n=this._app.data.languages[s];this._app.confirmModal.show({titleHtml:`<i class='icon-moon-warning'></i> Are you sure you want to delete ${i}?`,messageHtml:"This action is destructive. All data related to this language will be deleted from the record.",confirmHtml:"Yes, I want to delete this language",confirm:()=>{const t=()=>{if(o()(e).closest("dd").removeClass("has-value"),this._app.data.languages[s]=null,this._app.data.language===s){for(let e of this.editors)e.setValue("");this.setLanguage()}};n&&n.id?l().delete(this._app.route("remove_language",{language:s})).then((e=>{e.data.success&&t()})):t()}})},"#runner_frame message.notifyResponse"(){this.running&&this.outputPanel.runner.response&&(this.running=!1,this.handleResponse())}};const Vt=(e,t,s)=>{let i,n;null==s&&(s={});const a=o()(e),r=a.closest(".field")[t?"addClass":"removeClass"]("has-error");let l=r.find("small");const c=a.closest("form").find(".alert-box.error");return c.find(`[data-selector='${e}']`).remove(),s.fieldName&&c.find(`[data-field='${s.fieldName}']`).remove(),t?(0===l.length&&(l=o()("<small></small>"),r.find(".field_value").append(l)),ve(l.html(t).get(0)),n=s.fieldLabel||Lt(r),s.ignoreMsg||(i=o()("<li></li>"),i.attr("data-selector",e),i.html(`${n} ${t}`),s.msgClass&&(void 0).msg.addClass(s.msgClass),c.find("ul").append(i),ve(c.get(0)))):(l.hide(),0!==c.find("li").length||s.ignoreMsg||c.hide()),{$field:a,$container:r,$small:l,labelText:n,$msg:i,$msgBox:c}},Lt=e=>{let t=o()(e);t.is(".field")||(t=t.closest(".field"));return t.find("label").clone().find("*").remove().end().text()},Nt='\n<svg viewbox="0 0 57 57" stroke="currentColor" class="text-cw-red">\n<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd">\n  <circle cx="5" cy="50" r="5">\n    <animate attributeName="cy" begin="0s" dur="2.2s" values="50;5;50;50" calcMode="linear" repeatCount="indefinite"/>\n    <animate attributeName="cx" begin="0s" dur="2.2s" values="5;27;49;5" calcMode="linear" repeatCount="indefinite"/>\n  </circle>\n  <circle cx="27" cy="5" r="5">\n    <animate attributeName="cy" begin="0s" dur="2.2s" from="5" to="5" values="5;50;50;5" calcMode="linear" repeatCount="indefinite"/>\n    <animate attributeName="cx" begin="0s" dur="2.2s" from="27" to="27" values="27;49;5;27" calcMode="linear" repeatCount="indefinite"/>\n  </circle>\n  <circle cx="49" cy="50" r="5">\n    <animate attributeName="cy" begin="0s" dur="2.2s" values="50;50;5;50" calcMode="linear" repeatCount="indefinite"/>\n    <animate attributeName="cx" from="49" to="49" begin="0s" dur="2.2s" values="49;5;27;49" calcMode="linear" repeatCount="indefinite"/>\n  </circle>\n  </g>\n</svg>\n';class Pt{constructor(e){e=e||window.location.href,this.url=decodeURIComponent(e);const t=this.url.split("?");this.path=t[0];const s=2===t.length?t[1]:"";this.params={},s&&s.split("&").forEach((e=>{const t=e.split("=");this.params[t[0]]=t[1]}))}build(){const e=C(this.params),t=e?`?${e}`:"";return this.path+t}}class Ut extends U{constructor(e,t){super(e,t),this.waypoint(),this.checkWaypoint()}checkWaypoint(){var e,t;e=this.$waypoint,t=e=>{e&&setTimeout((()=>this.loadNext()),0)},e.height()&&Ht(e.get(0))?e.data("waypoint-in-view")||(t(!0,e),e.data("waypoint-in-view",!0)):e.data("waypoint-in-view")&&(t(!1,e),e.data("waypoint-in-view",!1))}waypoint(){this.$waypoint=this.element.find(this.options.waypointSelector)}replaceLoad(e,t){null==e&&(e=0),null==t&&(t=this.options.url),this.options.url=t;const s=new Pt(t);s.params.page=e,l().get(s.build(),{responseType:"text"}).then((e=>{this.element.html(e.data),this._updateUi(),this.waypoint()}))}loadNext(){const e=this.$waypoint.data("page"),t=new Pt(this.options.url);t.params.page=e,l().get(t.build(),{responseType:"text"}).then((e=>{this.$waypoint.replaceWith(e.data),window.requestAnimationFrame((()=>{this.waypoint(),this._updateUi(),this.options.loaded&&this.options.loaded(this),o()("#app").trigger("infinitescrollcontent")}))}))}_updateUi(){Ke(),et(),Qe(),Be(this._app),rt(),at()}}Ut.prototype.events={"a.js-infinite-button click"(e){this.$waypoint=e,e.html("Loading...").addClass("is-disabled"),this.loadNext()},".js-infinite-button a click"(e){this.$waypoint=e.closest(".js-infinite-button"),e.html("Loading...").addClass("is-disabled"),this.loadNext()},"window scroll"(){this.checkWaypoint()}},Ut.defaults={waypointSelector:".js-infinite-marker"};const Ht=e=>{const t=e.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.top<(window.innerHeight||document.documentElement.clientHeight)};class qt extends U{constructor(e,t){super(e,t),this.start=null,this.end=null,this.values=[],this.element.find("li.is-active").each(((e,t)=>{const s=o()(t),i=s.index();null==this.start&&(this.start=i),i>this.end&&(this.end=i),this.values.push(s.data("range-value"))}))}resetState(){this.hoverEnd=null,this.mouseDown=!1,this.refresh()}clear(){this.start=null,this.end=null,this.refresh()}refresh(){this.values=[];let e=this.start,t=null!=this.hoverEnd?this.hoverEnd:this.end;null!=t?e>t&&(e=t,t=this.start):t=e,this.element.find("ul").children().each(((s,i)=>{const n=o()(i);s===e||s>e&&s<=t?(n.addClass("is-active"),this.values.push(n.data("range-value"))):n.removeClass("is-active")}))}}qt.prototype.events={mouseleave(){this.resetState()},mouseup(){this.resetState()},"li mouseover"(e){this.mouseDown&&(this.hoverEnd=e.index(),this.refresh())},"li mousedown"(e,t){if(1===t.which){const t=e.index();t===this.start?(this.start=null,this.end=null,e.removeClass("is-active")):(this.start=t,this.end=null,e.addClass("is-active")),this.mouseDown=!0}},"li mouseup"(e,t){if(1===t.which){const s=e.index();null!=this.start&&s!==this.start&&(this.end=s),this.resetState(!0),t.stopPropagation(),this.element.trigger("change",{range:this})}}};class Wt extends U{constructor(e,t){super(e,t),this._app.currentUser.hideAds&&o()("#carbonads-container").hide(),this.ranksRange=new qt("#ranks"),this.markCompleted(),this.infiniteScroll=new Ut("section.items-list",{_app:this._app,loaded:()=>{this.markCompleted()}}),this._controllers.push(this.ranksRange,this.infiniteScroll),w().q&&o()("#filters input").trigger("focus")}filterUrl(e){const t={q:e||o()("#search-input").val(),r:this.ranksRange.values,tags:this._app.data.tags,xids:o()("#ids_filter").val(),beta:o()("#beta_filter").val(),category:o()("#category_filter").val(),order_by:o()("#order_by").val()};return Object.keys(t).forEach((function(e){t[e]||"q"===e||delete t[e]})),this._app.route("search",{language:o()("#language_filter").val()},t)}search(e){null==e&&(e=o()("#search-input").val()),e=e.replace(/#/g,""),this.filter(e)}filter(e){n().clearCache(),n().visit(this.filterUrl(e))}markCompleted(){null!=this._app.data.completedCodeChallengeIds&&this._app.data.completedCodeChallengeIds.forEach((e=>{o()(`#${e} .js-check.is-hidden`).removeClass("is-hidden")}))}}Wt.prototype.events={"#search click"(){this.search()},"#search-input keypress"(e,t){13===t.keyCode&&(t.preventDefault(),this.search())},".suggestions a.keyword-tag click"(e){this.search(e.text())},"#filters change"(){this.filter()}};class zt extends U{constructor(e,t){super(e,t)}configureIde(){if(this.outputPanel){this.outputPanel.destroy();const e=this._controllers.indexOf(this.outputPanel);-1!==e&&this._controllers.splice(e,1),this.outputPanel=null}this.outputPanel=new kt("#code_results",{_app:this._app}),this._controllers.push(this.outputPanel),this.setBindings(this._app.localStorage.get("editorKeyMap"))}toggleBindings(e){null==e&&(e=this._app.data.mode),this.setBindings(this.keybinds!==e?e:"default")}setBindings(e){this.element.find("#vim_mode, #emacs_mode").removeClass("is-active"),"default"!==e&&this.element.find(`#${e}_mode`).addClass("is-active"),null!=this.editors&&this.editors.forEach((t=>t.setBindings(e))),o()(".markdown-editor").each((function(){const t=o()(this).data("editor");null!=t&&t.editor.setBindings(e)})),this.keybinds=e,this._app.data.mode=e}toggleTabs(){const e=o()('a[data-tab="description"]');e.parent().is(".is-active")?o()('a[data-tab="output"]').trigger("click"):e.trigger("click")}toggleFocusedEditor(){this.editor.focused&&this.fixture?this.fixture.focus():this.editor.focus()}isOutputVisible(){return o()("#output_frame").is(":visible")}showOutput(){o()('a[data-tab="output"]').trigger("click")}showOutputWaiting(e){this.showOutput(),this.editor.setBorder(),this.fixture&&this.fixture.setBorder()}showResults(e,t){o()(".btn.js-run").removeClass("is-disabled"),this.showOutputWaiting(),t&&this.setEditorBorder(t,e)}setEditorBorder(e,t){e.setBorder(t?"green":"red")}reset(){this._app.confirmModal.show({titleHtml:"Reset your solution and example test cases?",messageHtml:"This will replace your solution and example test cases with the default setup. Are you sure?",confirmHtml:"Yes. Do it!",confirm:()=>{this.editor.setValue(this.language.setup),this.fixture.setValue(this.language.exampleFixture)}})}getSetupCode(){return null}getLanguage(){return this.language.languageName}getCode(){if(this.editor)return this.editor.getValue()}getFixture(){if(this.fixture)return this.fixture.getValue()}getTestFramework(){return this.language&&this.language.testFramework}run(e={}){this.running=!0;const t=Object.assign({language:this.getLanguage(),code:this.getCode(),fixture:this.getFixture(),setup:this.getSetupCode(),testFramework:this.getTestFramework()},e);this.outputPanel.runner.run(t)}handleResponse(){(this.fixture||this.editor).messages.hide(),o()(".js-run").removeClass("is-disabled")}defaultFixtureText(e){return this.editor.defaultFixtureText(e)}}zt.prototype.events={"window popstate, window beforeunload"(){this.editor&&(this.editor.updateStash(),this.fixture.updateStash())},"window keydown"(e,t){if(8===t.keyCode&&!o()(t.target).is("input, textarea"))return t.preventDefault(),!1},"#fixture_help click"(){this._app.confirmModal.show({cancelHtml:"Got It",titleHtml:"Test Cases Help",messageHtml:"<p>The test cases section is provided so that you can use Test Driven Development while coding your solution. For some kata, authors may have provided some example test cases to get you started. When you click \"Submit\" your solution will be validated against the kata author's test cases, which are usually more thorough than the example tests cases that may be provided. <br><br>You run your tests by clicking the \"Run Tests\" button. You can also use the <span class='text-ui-text-lc'>Cmd/Control key + '</span> shortcut to run your test cases.</p> <p>Please read the documentation for <a href='https://docs.codewars.com/languages' class='is-alt' target='_blank'>languages and test frameworks</a>.</p>"})},"div#fixture texteditor.submit"(){this.validate()},"#validate_btn click"(){this.validate()},"#maximize_layout click"(){this.setLayout("max")},"#minimize_layout click"(){this.setLayout("min")},"#vim_mode click"(){this.toggleBindings("vim")},"#emacs_mode click"(){this.toggleBindings("emacs")},"#runner_frame message.notifyReceipt"(e,t){this.running&&(o()(".btn.js-run").addClass("is-disabled"),this.showOutputWaiting())},"#runner_frame message.notifyResponse"(){this.running&&this.outputPanel.runner.response&&(this.running=!1,this.handleResponse())}};class Bt extends zt{constructor(e,t){super(e,t),this.languages={},this.play()}setLayout(e){switch(e){case"max":o()("body").addClass("maximized").addClass("no-sidenav");break;case"min":o()("body").removeClass("maximized").removeClass("no-sidenav");break;case"h":o()("#description_area").find("ul.tabs-content").data("ignoreVerticalFill",!1).css({height:"",maxHeight:"",overflow:""}),o()("#play").data("ignoreVerticalFill",!1).css({height:""});break;case"v":o()("#description_area").find("ul.tabs-content").data("ignoreVerticalFill",!0).css({height:"auto",maxHeight:"75vh",overflow:"auto"}),o()("#play").data("ignoreVerticalFill",!0).css({height:"auto"})}this.layout=e,setTimeout((()=>o()(window).trigger("resize")),100)}validate(e={}){this.showOutputWaiting(),this.fixture.messages.hide(),this.run(Object.assign({languageVersion:this.language.activeVersion,relayId:this.language.solutionId,ciphered:["setup"]},e))}attempt(){this.getCode()?(o()("#attempt_btn").addClass("is-disabled"),this.attempting=!0,this.validate({ciphered:["setup","fixture"],fixture:this._app.data.languageInfo.fixture})):this.editor.messages.fail(this.editor.emptyCodeMsg())}handleResponse(){(this.fixture||this.editor).messages.hide();const e=this.outputPanel.runner,t=this.attempting;this.attempting=!1,this.editor.messages.hide();let s=!1,i=null;e.response&&"execution success"===e.response.type&&(s=e.response.result.completed,l().post(this._app.route("notify",{solutionId:this.language.solutionId}),{token:e.response.token,testFramework:e.request.testFramework,code:e.request.code,fixture:e.request.fixture,languageVersion:this.language.activeVersion}).then((i=>{const n=i.data;s&&n.success&&t&&(this.editor.markClean(),this.editor.messages.working(`<i class='icon-moon-circle-check is-green-text is-nudged-down'></i> ${k(je)} You may take your time to refactor/comment your solution. Submit when ready.`),this._app.data.published&&(this.readyCode=e.request.code,o()("#submit_btn").removeClass("is-hidden"),o()("#attempt_btn").hide()))}),(e=>{window.alert("There was a server issue while sending the request. Please try again."),d.$e((s=>{s.setTags({attempting:t+""}),s.setExtras({description:"Error while posting play notification",error:e,attempting:t,solutionId:this.language.solutionId}),d.uT("Failed to notify response")}))})),i=this.editor,t||this.getFixture()&&""!==this.getFixture&&(i=this.fixture)),this.showResults(s,i)}submit(){this.readyCode&&this.readyCode===this.editor.getValue()&&(this.editor.messages.working("Submitting your final solution..."),l().post(this._app.route("finalize",{solutionId:this.language.solutionId})).then((e=>{const t=e.data;t.success?setTimeout((()=>{n().visit(this._app.route("solutions",{language:this._app.data.activeLanguage}))}),1500):this.editor.messages.fail(t.debug||"There was an issue submitting your final solution")})))}skip(){this._app.data.published&&l().post(this._app.route("skip",this.language),{language_name:this._app.data.activeLanguage}).then((e=>{n().visit(e.data.route)}))}backToEditor(){n().visit(this._app.route("editor",{language:this._app.data.activeLanguage}))}surrender(){this._app.confirmModal.show({titleHtml:"Unlock Solutions",messageHtml:"This will cause you to forfeit your ability to earn honor/rank for this kata. Are you sure?",confirmHtml:"Yes, show me the solutions",confirm:()=>{l().post(this._app.route("forfeit"),{},{responseType:"text"}).then((e=>{pt(e.data);const t=e.headers["turbolinks-location"];t&&(e=>{window.history.pushState(window.history.state,document.title,e)})(t)}))}})}getSetupCode(){const e=this._getLanguage();return e&&e.package||""}play(){this.isPlaying=!0,this._playLanguage()}_playLanguage(e){null==e&&(e=this._app.data.activeLanguage),o()(`.js-${this.languageName}`).hide(),o()(`.js-${e}`).show(),this.languages[e]?this._setLanguage(e):l().post(this._app.route("session",{language:e})).then((t=>{this.started||(this.started=!0),this.languages[e]=t.data,this._setLanguage(e)})).catch((e=>{this._app.alerts.fail("The kata failed to load. Please try reloading the page.")}))}_getLanguage(e){return null==e&&(e=this._app.data.activeLanguage),this.languages[e]}_setLanguage(e){const t=this.languages[e];t.views=t.views||0,t.views++,this._app.data.languageInfo=t,this.language=t,this.languageName=e,t.newPlay=!1,this.showPlay()}showPlay(){o()("#play").show(),o()(".language-tabs a").each(((e,t)=>o()(t).attr("href",null))),this.render(),this.playVisible=!0,o()(window).trigger("resize")}render(){this.renderViews(),this.configureEditors(),this.configureIde(),this.initMarkdown(),setTimeout((()=>this.afterRender()),100)}afterRender(){const e=!this.language.solutionId&&this.language.recently_attempted||this.language.views>1;this.editor.setValue(this.language.workingCode||this.language.setup,`${this.language.resultId}-${this.languageName}`,e),setTimeout((()=>this.editor.setMode(this._app.data.activeLanguage,!0)),0),this.editor.focus();const t=this.language.workingFixture||this.language.exampleFixture||this.defaultFixtureText(this.languageName);this.fixture.setValue(t,`${this.language.resultId}-${this.languageName}-fixture`,e),this.fixture.setMode(this._app.data.activeLanguage),o()("#active_version_label").text(o()("#language_version dd.is-active").text()),o()(window).width()<768&&this.setLayout("v")}configureEditors(){const e=me.keyMap.default===me.keyMap.macDefault?"Cmd":"Ctrl",t={};t[`${e}-'`]=()=>this.validate(),t[`${e}-Alt-Enter`]=()=>this.validate(),t[`${e}-;`]=()=>this.attempt(),t[`${e}-I`]=()=>this.toggleTabs(),t[`${e}-Alt-I`]=()=>this.toggleTabs(),t[`${e}-U`]=()=>this.toggleFocusedEditor(),t[`${e}-Alt-U`]=()=>this.toggleFocusedEditor(),this.editor=new qe("div#code",{_app:this._app,mode:this._app.data.activeLanguage,stashGroup:this._app.data.id,extraKeys:t,commands:{save:()=>this.validate()}}),this.fixture=new qe("div#fixture",{_app:this._app,mode:this._app.data.activeLanguage,stashGroup:this._app.data.id,extraKeys:t,commands:{save:()=>this.validate()}}),this.editors=[this.editor,this.fixture]}initMarkdown(){this.markdownDisplay=new B("#description",{_app:this._app,language:this._app.data.activeLanguage}),this.markdownDisplay.setMarkdown(this._app.data.description),this.markdownDisplay.setLanguage(this.languageName)}}Bt.prototype.events=Object.assign({},zt.prototype.events,{"window resize"(e,t){o()(window).width()<768?"v"!==this.layout&&this.setLayout("v"):"h"!==this.layout&&this.setLayout("h")},"#language_dd dd click"(e,t){v(e.data("href")),this._app.data.activeLanguage=e.data("value"),this.isPlaying&&this._playLanguage()},"#play_btn click"(){this.play()},"#skip_btn click"(){this.skip()},"#edit_draft_btn click"(){this.backToEditor()},"div#code texteditor.submit"(){this.readyCode&&this.readyCode===this.editor.getValue()?this.submit():this.attempt()},"div#code texteditor.change"(){this.readyCode&&setTimeout((()=>{this.readyCode===this.editor.getValue()?(o()("#attempt_btn").hide(),o()("#submit_btn").removeClass("is-hidden")):(o()("#submit_btn").addClass("is-hidden"),o()("#attempt_btn").show(),this.attempting||this.editor.messages.hide())}),0)},"#reset_btn:not(.is-disabled) click"(){this.reset()},"#attempt_btn:not(.is-disabled) click"(){this.attempt()},"#submit_btn:not(.is-disabled) click"(){this.submit()},"#surrender_btn click"(){this.surrender()},"#language_version dd.is-active click"(e){this.language.activeVersion=e.data("version")}}),Bt.prototype.filters={active_label(){const e=this.language.languageVersions;if(!e)return;const t=e.find((e=>this.language.activeVersion===e.id));if(t&&t.label)return t.label;const s=e[e.length-1];return s&&s.label},version_class(e){return this.language.activeVersion===e.context.id?"is-active":e.context.supported?void 0:"is-disabled"},version_title(e){if(!e.context.supported)return"This version is not available"}};class Gt extends U{constructor(e,t){super(e,t),this._app.currentUser.hideAds&&o()("#carbonads-container").hide();const s=new $t(this.element.find(".js-train-social"),{_app:this._app});this.markdownDisplay=new B("#description",{_app:this._app,language:this._app.data.activeLanguage}),this.markdownDisplay.setMarkdown(this._app.data.description),this._controllers.push(s,this.markdownDisplay)}}class Kt extends U{constructor(e,t){super(e,t),this.renderViews();const s=new ht(this.element,{_app:this._app}),i=new $t(this.element.find(".js-train-social"),{_app:this._app}),n=new ut(this.element,{_app:this._app});this.infiniteScroll=new Ut("#solutions_list",{_app:this._app}),this._controllers.push(s,i,n,this.infiniteScroll)}}Kt.prototype.events={"#app infinitescrollcontent"(){D(o()("view:not(.js-rendered)"))},".js-show-invalid click"(e){const t=o()("<span>Loading...</span>");e.replaceWith(t);const s=new Pt;s.params.invalid_solutions="true",l().get(s.build(),{responseType:"text"}).then((e=>{const s=e.data;be(t.get(0)),o()("#invalid_solutions").replaceWith(s)}))},".js-show-dups click"(e){_t(e,e.closest("li").find(".js-variations"))},"#show_invalid_solutions click"(e){e.closest("p").hide(),xe(o()("#invalid_solutions").get(0))},".js-admin-action click"(e){l().post(e.data("href")).then((e=>{const t=e.data;alert("Action "+(t.success?"successfully queued":"failed"))}))},".js-unlock-solutions click"(e){l().post(this._app.route("unlock_solutions"),{},{responseType:"text"}).then((e=>{pt(e.data)}))},".js-unlock-test-cases click"(e){l().post(this._app.route("unlock_test_cases"),{},{responseType:"text"}).then((e=>{pt(e.data)}))}};class Yt extends U{constructor(e,t){super(e,t);const s=new Ct(this.element,{_app:this._app});this._controllers.push(s)}}class Jt extends zt{constructor(e,t){super(e,t),this.fields=this._app.data.fields.code_snippet,this._app.data.activeCode="code",this._app.data.activeFixture="fixture",o()("#translation_details dd a:first").trigger("click");const s=new Ct(this.element,{_app:this._app});this._controllers.push(s)}ready(){setTimeout((()=>this.renderViews()),0)}canSave(){return!!this.canRun()&&(this._app.data.isTranslation?this.fields.code.value:!!this.fields.code.value)}canRun(){return this.hasCode()&&!this.running&&!this.publishing}isSupportedLanguage(e){return null==e&&(e=this.getLanguage()),this._app.data.supportedLanguages.indexOf(e)>=0}isTddLanguage(){return this._app.data.tddLanguages.indexOf(this.getLanguage())>=0}isTddEnabled(){return this._app.data.tdd&&this.isTddLanguage()}updateTags(){if(this.tags===this.fields.user_tags.value)return;const e=this.tags=this.fields.user_tags.value;null!=this.mapTags&&this.mapTags.abort(),this.mapTags=we(100,(()=>{this.mapTags=null,l().post(this._app.route("map_topics"),{query:e}).then((e=>{const t=e.data;this._app.data.mappedTags=t.tags;const s=o()("#tags"),i=o()(s.data("template"));(i.data("template")||new E(i,{_app:this._app})).render(s,s.data("context"))}))}))}updateTitle(){D(o()("#title"))}updateButtons(e){(e||this.canSave()!==this._app.data.canSave)&&(this._app.data.canSave=this.canSave(),D(o()("#buttons")))}activeCodeEditor(){switch(this._app.data.activeCode){case"code":return this.editor;case"setup":return this.setupCode;case"package":return this.package}}toggleFocusedEditor(){this.activeCodeEditor().focused&&this.fixture?this.fixture.focus():this.activeCodeEditor().focus()}toggleTabs(){const e=o()("#panel_toggles li.is-active");let t=e.next();0===t.length&&(t=e.siblings().eq(0)),t.find("a").trigger("click")}configureEditor(e,t){e&&(this._app.data.publishedForks&&e.setReadOnly(!0),e.options.stashGroup=this._app.data.id,e.setOption("commands",{save:()=>this.validate()}),e.setMode(this.getLanguage(),t),e.setExtraKeys({"Cmd-S":()=>{this._app.data.published?this.publish():this.save()},"Cmd-I":()=>this.toggleTabs(),"Cmd-U":()=>this.toggleFocusedEditor()}),this.editors.push(e))}configureEditors(){this.editors=[],this.code=this.editor=o()("#code_snippet_code_field").data("editor"),this.editor&&(setTimeout((()=>this.configureEditor(this.editor,!0)),0),this.editor.focus()),this.fixture=o()("#code_snippet_fixture_field").data("editor"),this.fixture&&(this.configureEditor(this.fixture),this.fixture.emptyCodeMsg=()=>"You are using TDD. You must provide test cases before you can run your code. You can turn TDD mode off using the switch in the upper right corner."),this.package=o()("#code_snippet_package_field").data("editor"),this.configureEditor(this.package),this.setupCode=o()("#code_snippet_setup_code_field").data("editor"),this.configureEditor(this.setupCode),this.exampleFixture=o()("#code_snippet_example_fixture_field").data("editor"),this.configureEditor(this.exampleFixture)}render(){this.updateButtons(!0),this.updateTitle(),D(o()("#buttons, #edit, #editors, #options_bar, #language_info")),at()}setTestFramework(e){if(!(e=e||this.fields.test_framework.value||o()("#test_framework dd").data("framework")))return;let t=o()(`dd[data-framework='${e}']`);0===t.length&&(t=o()("dd[data-framework]").eq(0)),t.trigger("click").trigger("click")}getLanguage(){return this.fields.language.value||this._app.data.language}getLanguageVersion(){return this.fields.language_version.value}getLanguageInfo(e){return null==e&&(e=this.getLanguage()),this._app.data.versionInfo[e]}setLanguageVersion(e,t){const s=this.fields.language.value;if(e&&e===t)e!==s?this.setLanguageVersion(s,e):this.setLanguageVersion(null,e);else if(this._app.data.versionInfo[e])if(e===this.fields.language.originalValue)this.setLanguageVersion(this.fields.language_version.originalValue,e);else{const t=this.getLanguageInfo(e);if(t){const s=t.find((e=>e.default));this.setLanguageVersion(s&&s.id,e)}else this.setLanguageVersion(null,e)}else this.fields.language_version.value=e||!s?e:null!=this._app.data.versionInfo[s]?this._app.data.versionInfo[s][0].id:void 0}setLanguage(e){if(e&&this.getLanguage()!==e||!this.languageSet){this.languageSet=!0,this.resetFixtures(),this.fields.language.value=e,this.setLanguageVersion(e),this.setTestFramework();const t=this.fields.language.value;this._app.data.language=t,this.render(),null!=this.editors&&this.editors.forEach((e=>e.setMode(t))),this.isSupportedLanguage()?o()("#output_btn").show():o()("#output_btn").hide().hasClass("is-active")&&o()("#edit_btn a").trigger("click")}this.defaultFixtures()}setEditorBorder(e,t){}hasCode(){return!(!this.editor||!this.editor.getValue())}getCode(){return"setup"!==this._app.data.activeCode||this.publishing?this.editor&&this.editor.getValue():this.setupCode&&this.setupCode.getValue()}fixtureEditors(){return[this.exampleFixture,this.fixture]}resetFixtures(){if(!this.fixture)return;const e=this.getLanguage();this.fixtureEditors().forEach((t=>{t.getValue()===t.defaultFixtureText(e)&&t.setValue("")}))}defaultFixtures(){if(!this.fixture)return;const e=this.getLanguage();this.fixtureEditors().forEach((t=>{""===(t.getValue()||"")&&t.setValue(t.defaultFixtureText(e))}))}getFixture(){if(this.fixture)return"example_fixture"===this._app.data.activeFixture?this.exampleFixture.getValue():this._app.data.isTranslation||this.isTddEnabled()?this.fixture.getValue():void 0}getPackage(){return this.package?this.package.getValue():this.fields.package.value}getTestFramework(){return this.fields.test_framework.value||this._app.data.defaultFrameworks[this.getLanguage()]}validate(){this.isSupportedLanguage()&&(o()("#output_btn").trigger("click"),this.run({language:this.getLanguage(),languageVersion:this.getLanguageVersion()+"",setup:this.getPackage(),relayId:this._app.data.id}))}save(e){this._app.alerts.working("Saving..."),o()("#code_snippet_language").val(this.getLanguage()),o()("#code_snippet_language_version").val(this.getLanguageVersion()),l()({url:this._app.data.new?this._app.route("create"):this._app.route("update",{id:this._app.data.id}),method:this._app.data.new?"post":"put",data:Ot(o()("form"),{parseBooleans:!0})}).then((t=>{const s=t.data;this.dirty=!1,this._app.alerts.hide(),this._app.data.fields=s.fields,this._app.data.errors=s.errors,s.success?(s.id&&(this._app.data.id=s.id),this._app.data.new&&s.url?n().visit(s.url):(s.url&&v(s.url),this.updateTitle(),"function"===typeof e&&e())):(this.publishing=!1,o()("#edit_btn a").trigger("click")),this.updateButtons(!0),this.updateTitle(),D(o()("#editors, #options_bar, #language_info")),at()}))}publish(){this._app.alerts.working("Publishing..."),this.editor&&this.editor.messages.hide(),this.fixture&&this.fixture.messages.hide(),o()(".js-run").addClass("is-disabled"),this.publishing=!0,this.save((()=>{this.validate()}))}handleResponse(){if(this.updateButtons(!0),!this.publishing)return;let e=this.outputPanel.runner.response;if(!e||!e.token)return this.running=!1,this.publishing=!1,this.updateButtons(!0),void window.alert("Something went wrong, please try republishing again");this.showOutputWaiting("Publishing..."),o()(".js-run").removeClass("is-disabled"),this.publishing=!1,e={token:e.token,run_result:JSON.stringify({response:{result:e.result}})},l().post(this._app.route("publish",{id:this._app.data.id}),e).then((e=>{const t=e.data;o()("#publish_btn").removeClass("is-disabled"),!this._app.data.allowFailedTests&&!t.completed||t.message?(this._app.alerts.warn("Kumite was published with failed tests!"),this.editor.messages.hide(),this.showResults(t)):n().visit(this._app.route("show",{id:this._app.data.id}))}))}unpublish(){l().post(this._app.route("unpublish",{id:this._app.data.id})).then((e=>{e.data.success&&n().visit()}))}}Jt.prototype.filters={"tdd_language?"(){return this.isTddLanguage()},"tdd_enabled?"(){return this.isTddEnabled()},"active_language_supported?"(){return this.isSupportedLanguage()},"can_save?"(){return this.canSave()},"has_code?"(){return this.hasCode()},"can_run?"(){return this.canRun()},language_versions(){return this.getLanguageInfo()},active_language(){return this.getLanguage()},active_version(){return this.getLanguageVersion()},active_version_label(){const e=this.getLanguageVersion();let t=this.getLanguageInfo();if(t)return t=t.find((t=>t.id===e)),t&&t.label||e}},Jt.prototype.events=Object.assign({},zt.prototype.events,{"window beforeunload"(e,t){if(this.dirty)return t.preventDefault(),"You have unsaved changes!"},"#editors view:render"(){this.configureEditors(),this.setLanguage(this.getLanguage()),this.setTestFramework()},"#edit view:render"(){this.configureIde()},"#languages dd click"(e){const t=o()("#languages dd.is-active");this.setLanguage(t.data("language"))},"#versions dd click"(e){this.setLanguageVersion(e.data("version"))},"#tdd_mode:not(.is-disabled) click"(e){this._app.data.tdd=!this._app.data.tdd,D(o()("#options_bar, #editors")),at()},"#edit_btn click"(){setTimeout((()=>D(o()("#edit"))),0)},"#save_btn click"(){this.save()},"#publish_btn:not(.is-disabled) click"(){this.publish()},"#unpublish_btn click"(){this.unpublish()},"#convert_btn click"(){this._app.confirmModal.show({titleHtml:"Are you sure you want to convert?",messageHtml:"This will create a new kata using the data in this kumite. The kumite will be unpublished/hidden.",cancelHtml:"Cancel",confirmHtml:"Do it!",cancel:()=>{},confirm:()=>{o()("#buttons .btn").addClass("is-disabled"),this.save((()=>{o()("#buttons .btn").addClass("is-disabled"),window.requestAnimationFrame((()=>{l().post(this._app.route("convert")).then((e=>{const t=e.data;t.data&&t.data.url&&n().visit(t.data.url)}))}))}))}})},"texteditor.change"(){this.updateButtons(!0),this.dirty=!0},"#code_snippet_title change, #code_snippet_title keyup"(){this.updateTitle()},"#code_snippet_user_tags change, #code_snippet_user_tags keyup"(){this.updateTags()},"#code_snippet_secret change, #code_snippet_secret click"(){this.updateTitle()},"texteditor.submit"(){this.hasCode()&&this.validate()},"dd[data-framework] click"(e){o()("#code_snippet_test_framework").val(e.data("framework")).trigger("change")},"#code_container dd a click"(e){this._app.data.activeCode=e.data("tab"),this.updateButtons(!0)},"#fixture_container dd a click"(e){this._app.data.activeFixture=e.data("tab")},".js-details-link click"(){o()("#edit_btn a").trigger("click")}});class Qt extends U{constructor(e,t){super(e,t);const s=new Ct(this.element,{_app:this._app});this._controllers.push(s)}filterUrl(e){const t={q:e||o()("#search-input").val(),personal:1===o()("#personal input:checked").length,secrets:1===o()("#secrets input:checked").length,language:this._app.data.language};return Object.keys(t).forEach((function(e){t[e]||"q"===e||delete t[e]})),this._app.route("search",null,t)}search(e){null==e&&(e=o()("#search_bar input").val()),this.filter(e)}filter(e){n().clearCache(),n().visit(this.filterUrl(e))}}Qt.prototype.events={"#search click"(){this.search()},"#personal input change"(){this.search()},".js-lang click"(e){const t=e.data("lang");this._app.data.language=t===this._app.data.language?null:t,this.search()},"#search-input keypress"(e,t){13===t.keyCode&&(t.preventDefault(),this.search())}};class Xt extends U{constructor(e,t){super(e,t)}}Xt.prototype.events={".diff .js-expand-collapsed-line click"(e){const t=e.closest("tr");t.replaceWith(t.find("td.is-hidden table tr"))}};class Zt extends U{constructor(e,t){super(e,t),this.listItem=new Ct(this.element,{_app:this._app}),this.diffs=new Xt(this.element),this._controllers.push(this.listItem,this.diffs)}ready(){const e=w();if(e.sel){0===o()(`#${e.sel}`).trigger("click").length&&this.activateRoot()}else this.activateRoot()}activateRoot(){o()("#snippet_list .title-container:first").trigger("click")}}function es(e,t){if(e.response){const s=e.response.data;401===e.response.status?this._app.alerts.fail(s.reason.replace(/^User .+:/,`Failed to ${t}:`)):this._app.alerts.fail(s.reason||s.message)}else e.request?this._app.alerts.fail("No response was received. Please try again."):this._app.alerts.fail(e.message||"Unknown Error")}Zt.prototype.events={"#show_description a click"(){xe(o()("#show_description").hide().next().get(0))},"#branches a.js-new-branch:not(.is-disabled) click"(e){n().visit(o()("article a.js-new-branch").attr("href"))},"a.js-approve:not(.is-disabled) click"(e,t){t.preventDefault(),this._app.confirmModal.show({titleHtml:"Are you sure you want to approve this translation?",messageHtml:"This cannot be undone, you will be merging this version directly into the code challenge. Are you sure?",cancelHtml:"Nevermind",confirmHtml:"I'm sure",confirm:()=>{l().post(e.attr("href"),{event:"approve"}).then((e=>{const t=e.data;t.success?(this._app.alerts.success("Successfully enqueued a job to merge approved translation. This can take a few minutes to complete."),setTimeout((()=>n().visit()),500)):this._app.alerts.fail(t.message||t.reason)})).catch((e=>{es.call(this,e,"approve")}))}})},"a.js-reject:not(.is-disabled) click"(e,t){t.preventDefault(),this._app.confirmModal.show({titleHtml:"Are you sure you want to reject this translation?",messageHtml:"This cannot be easily undone, you will be marking this translation as rejected and removing it from this list. Are you sure?",cancelHtml:"Nevermind",confirmHtml:"I'm sure",confirm:()=>{l().post(e.attr("href"),{event:"reject"}).then((e=>{const t=e.data;t.success?(this._app.alerts.success("Successfully rejected a translation."),setTimeout((()=>n().visit()),500)):this._app.alerts.fail(t.message||t.reason)})).catch((e=>{es.call(this,e,"reject")}))}})},".tree-container .title-container:not(.is-active) click"(e){const t=w();t.sel=e.attr("id"),v(`${location.pathname}?${C(t)}`),o()(".tree-container .title-container.is-active").removeClass("is-active"),e.addClass("is-active"),this.viewData=e.data("view-data"),this.viewData&&(D(o()("#details, #tabs, #diff, #code_blocks"),this.viewData),D(o()("#comments view"),this.viewData.discourse),o()(".js-new-branch").toggleClass("is-disabled","draft"===this.viewData.state)),0===o()("#tabs dd.is-active").length&&o()("#tabs dd:first a").trigger("click")},"#tabs dd a click"(e){this._app.data.activeTab=e.data("tab"),o()("#comments > h4").toggle("comments"!==this._app.data.activeTab)},".accordion li click"(e){e.parent().find(".active .content").hide().parent("li").removeClass("active");const t=e.children(".content").first();t.show(0,(()=>{t.parent("li").addClass("active")}))}};class ts extends U{constructor(e,t){super(e,t);const s=new Ct(this.element,{_app:this._app});this._controllers.push(s)}}class ss extends U{constructor(e,t){super(e,t),setTimeout((()=>{this.markdownEditor=new Ue("#description",{_app:this._app,stashGroup:"collection"}),this._controllers.push(this.markdownEditor)}),0)}}class is extends U{constructor(e,t){super(e,t),this.infiniteScroll=new Ut("section.items-list",{_app:this._app}),this._controllers.push(this.infiniteScroll)}filterUrl(e){const t={q:e||o()("#search-input").val(),created_by:o()("#created_by").val(),order_by:o()("#order_by").val()};return Object.keys(t).forEach((function(e){t[e]||"q"===e||delete t[e]})),this._app.route("search",null,t)}search(e){null==e&&(e=o()("#search-input").val()),this.filter(e)}filter(e){o()("#search").attr("disabled",""),n().clearCache(),n().visit(this.filterUrl(e))}}is.prototype.events={"#search click"(){this.search()},"#search-input keypress"(e,t){13===t.keyCode&&(t.preventDefault(),this.search())},"#filters change"(){this.filter()}};class ns extends U{constructor(e,t){super(e,t),this.activateCurrentOrFirst(),this._app.data.isAuthor&&(o()(".for-collection-creator").removeClass("is-hidden"),o()("body").addClass("creator-view"))}totalItems(){return o()("[data-items-count]").data("itemsCount")}moveBy(e,t){const s=e.closest(".list-item-kata").prop("id");l().post(this._app.route("move",{id:s}),{delta:t}).then((e=>{n().clearCache(),n().visit()}))}activeLanguage(){const e=o()("dd[data-language].is-active");if(e.length)return{id:e.data("language"),name:e.text()}}activeLanguageItems(){const e=this.activeLanguage();return e?o()(`a[data-language='${e.id}']`).length:0}activateCurrentOrFirst(){let e=o()(`dd[data-language='${this._app.currentUser.current_language}']`);e.length||(e=o()("dd[data-language]")),e.trigger("click").trigger("click")}trainNow(e,t){l().post(this._app.route("train"),{all_kata:t,language:e}).then((e=>{const t=e.data;t.route&&n().visit(t.route)}))}}ns.prototype.events={".js-train click"(){const e=this.activeLanguage();1===this.totalItems()||this.activeLanguageItems()===this.totalItems()?this.trainNow(e.id,!1):this._app.confirmModal.show({titleHtml:"Which kata do you want to train on?",messageHtml:[`You prefer to train on ${e.name}.`,"Not all kata in this collection are available in that language.","Which kata should we add to your training queue?"].join(" "),confirmHtml:`${e.name} Kata Only`,cancelHtml:"All Kata",confirm:()=>this.trainNow(e.id,!0),cancel:()=>this.trainNow(e.id,!1)})},".js-remove click"(e){this._app.confirmModal.show({titleHtml:"Are you sure you want to remove?",messageHtml:"You can add it again later by finding it within the library.",confirmHtml:"Yes, remove",confirm:()=>{const t=e.closest(".list-item-kata");this._app.collectionModal.removeChallenge(this._app.data.collection,t.prop("id"),(()=>{ye(t.get(0))}))}})},".js-move-up click"(e){this.moveBy(e,-1)},".js-move-down click"(e){this.moveBy(e,1)},".js-delete-collection click"(){l().delete(this._app.route("collection")).then((e=>{n().visit("/collections")}))}};class as extends U{constructor(e,t){super(e,t),this.loadTrainerChallenge(),this.discourseScroll=new Ut(".comments-list",{_app:this._app}),this._controllers.push(this.discourseScroll),o()(".medium-feed-link a").prop("target","blog")}loadDiscourse(e){v(this._app.route("discourse",{view_id:e})),this.discourseScroll.replaceLoad(),o()("#discourse_filters .is-active").removeClass("is-active"),o()(`#discourse_filters [data-view-id='${e}']`).addClass("is-active")}trainerRouteParams(){return{language:o()("#trainer_language dd.is-active").data("language")||this._app.currentUser.current_language,strategy:o()("#trainer_strategy dd.is-active").data("strategy")}}train(e){if(this.trainerData){const e=this.trainerRouteParams();e.id=this.trainerData.id,e.id&&(n().clearCache(),n().visit(this._app.route("train",e)))}else e||this.loadTrainerChallenge(!0,!0)}loadTrainerChallenge(e,t){const s=o()("#personal_trainer_next_challenge").data("view");if(!s)return;const i=this.trainerRouteParams(),n=this._app.route("peek",i);l().get(n,{params:{dequeue:!!e}}).then((e=>{const i=e.data;s.render({data:i}),this.trainerData=i,t&&this.train(!1)}))}}as.prototype.events={".personal-trainer .dropdown dd:not(.is-active) click"(e){this.loadTrainerChallenge()},"#personal-trainer-play click"(e){this.train()},"#personal-trainer-skip click"(e){this.loadTrainerChallenge(!0)},"#tell_me_more_referrals click"(e){o()("#referral").hide(),o()("#referrals").show()},"#discourse_filters a:not(.is-active) click"(e,t){this.loadDiscourse(e.data("view-id"))}};class os extends U{constructor(e,t){super(e,t),this.challenge=this._app.data.challenge,this.challenge&&(this.editor=new qe("#code_editor",{_app:this._app,allowFullScreen:!1,lineNumbers:!1}),this.markdownDisplay=new B("#description",{_app:this._app}),this.runner=new yt("#runner_frame",{_app:this._app}),this.runner.setTheme(!0),this._controllers.push(this.editor,this.markdownDisplay,this.runner),this.setCodeChallenge())}attempt(){const e={code:this.editor.getValue(),language:this._app.data.language,source:"landing",ciphered:["setup","fixture"],languageVersion:this.session.activeVersion,setup:this.session.package,fixture:this.session.fixture,testFramework:this.session.testFramework,relayId:this.session.solutionId};e.code?(this.runner.run(e),o()(".output").show(),o()("#attempt_btn").addClass("is-disabled"),o()("#try_again_btn").addClass("is-disabled")):this.editor.messages.fail(this.editor.emptyCodeMsg())}handleResponse(){o()("#attempt_btn").removeClass("is-disabled"),o()("#try_again_btn").removeClass("is-disabled"),this.runner.response&&"execution success"===this.runner.response.type&&this.runner.response.result&&this.runner.response.result.completed&&(o()("#try_again_btn").hide(),o()("#success_msg b").html(k(["Great Job!","Well Done!","Solid!","Impressive!"])),o()("#success_msg").show(),l().post(this._app.route("notify",{solutionId:this.session.solutionId}),{token:this.runner.response.token,testFramework:this.runner.request.testFramework,code:this.runner.request.code,fixture:this.runner.request.fixture,languageVersion:this.runner.request.languageVersion}).then((e=>{setTimeout((()=>n().visit()),1e3)})))}setCodeChallenge(){this.markdownDisplay.setMarkdown(this.challenge.description),o()("#other_languages, #code_editor").show(),l().post(this._app.route("session",{language:this._app.data.language})).then((e=>{this.session=e.data,o()("#attempt_btn").removeClass("is-disabled")})),this.editor.setValue(this.challenge.setup),this.editor.setMode(this._app.data.language),this.editor.focus()}}os.prototype.events={"#attempt_btn:not(.is-disabled) click"(){this.attempt()},"#code_editor codeeditor.submit"(){this.session&&this.attempt()},".enlist-heading a.btn click"(){o()("#step_start").show(),o()("#landing").addClass("sign-up")},"#step_signup form submit"(e){o()("#enlist_btn").addClass("is-disabled")},"#step_start [data-language] click"(e,t){n().visit(`?language=${e.attr("data-language")}`)},"#try_again_btn click"(){ye(o()(".output").get(0))},"#runner_frame message.notifyResponse"(){this.handleResponse()}};class rs extends U{constructor(e,t){super(e,t)}save(){const e=o()(".user_experience input:checked").val();if(e){const t={weekly_newsletter:!!o()("#user_weekly_newsletter_true:checked").val(),experience:e,languages:o()(".icon-list a.is-active").map(((e,t)=>o()(t).data("language"))).toArray()};l().post(this._app.route("save"),t).then((e=>{e.data.success?(this._app.alerts.success('<i class="icon-moon-check"></i> Settings saved'),setTimeout((()=>n().visit(this._app.route("post_save"))),500)):this._app.alerts.fail("Failed to save settings. Please try again")}))}else o()(".radio_buttons").addClass("has-error")}}rs.prototype.events={".js-save click"(){this.save()},".icon-list a click"(e){e.toggleClass("is-active")}};class ls extends U{constructor(e,t){super(e,t)}}ls.prototype.events={"#delete_account click"(e,t){t.preventDefault(),this._app.confirmModal.show({titleHtml:"Are you sure?",messageHtml:"You are about to delete everything you have worked so hard for. If all you wish to do is stop receiving notification emails you can simply turn them off without deleting your account.",cancelHtml:"Nooo stop! I was just kidding!",confirmHtml:"Yep, I'm serious about doing this",confirm:()=>{l().delete("/user").then((e=>{e.data.success&&n().visit("/")}))}})},"#forgot_password click"(e,t){t.preventDefault(),this._app.alerts.working("Requesting password instructions..."),l().post(e.attr("href")+".json").then((e=>{this._app.alerts.success("Password email instructions have been sent to your email. You must logout first before clicking the reset link within the email.",1e4)}))},"#edit_user submit"(e,t){t.preventDefault(),o()("#flash").remove();const{user:s}=Ot(o()(e.get(0)));l().put("/users",{user:s}).then((e=>{n().clearCache(),n().visit()}))},".js-resend-confirmation:not(.is-disabled) click"(e,t){t.preventDefault(),e.addClass("is-disabled");const s=o()("meta[name=csrf-param]").attr("content"),i=o()("meta[name=csrf-token]").attr("content"),n=o()([`<form method="post" action="${e.data("href")}">`,'<input name="_method" value="POST" type="hidden" />',`<input name="${s}" value="${i}" type="hidden" />`,"</form>"].join(""));n.hide(),n.appendTo("body"),n.trigger("submit")}};class cs extends U{constructor(e,t){super(e,t),this.diffs=new Xt(this.element),this._controllers.push(this.diffs)}}const ds=(e,t)=>{const s=document.createElement("script");s.onerror=e=>{throw new URIError(`${e.target.src} failed to load`)},s.onload=t,document.body.appendChild(s),s.src=e};class hs extends U{constructor(e,t){super(e,t),this.stripe=null,ds("https://js.stripe.com/v3/",(()=>{l().get("/subscription/key").then((e=>{this.stripe=window.Stripe(e.data.pubKey),o()("#subscribe.is-disabled").removeClass("is-disabled").addClass("is-green")}))}))}}hs.prototype.events={".js-radio click"(e){o()(".js-radio.checked").removeClass("checked").find("i").removeClass("icon-moon-radio-on").addClass("icon-moon-radio-off"),e.addClass("checked").find("i").addClass("icon-moon-radio-on").removeClass("icon-moon-radio-off")},"#subscribe:not(.is-disabled) click"(e){o()("#subscribe").addClass("is-disabled");const t=o()(".js-radio.checked").data(),s=o()("#coupon").val();l().post("/subscription/session",{price_id:t.priceId,coupon_id:s}).then((e=>{this.stripe.redirectToCheckout({sessionId:e.data.sessionId}).then((e=>{e.error&&alert(e.error.message)})).catch((e=>{console.error(e)}))})).catch((e=>{o()("#subscribe").removeClass("is-disabled"),e.response?alert(e.response.data.reason):alert("Something went wrong, please try again.")}))}};class us extends U{constructor(e,t){super(e,t),this.stripe=null,ds("https://js.stripe.com/v3/",(()=>{l().get("/subscription/key").then((e=>{this.stripe=window.Stripe(e.data.pubKey),o()("#update_payment_method.is-disabled").removeClass("is-disabled")}))}))}}us.prototype.events={"#update_payment_method:not(.is-disabled) click"(e){o()("#update_payment_method").addClass("is-disabled"),l().post("/subscription/edit/session").then((e=>{this.stripe.redirectToCheckout({sessionId:e.data.sessionId}).then((e=>{e.error&&alert(e.error.message)})).catch((e=>{console.error(e)}))})).catch((e=>{o()("#update_payment_method").removeClass("is-disabled"),e.response?alert(e.response.data.reason):alert("Something went wrong, please try again.")}))},"#reactivate:not(.is-disabled) click"(e){e.addClass("is-disabled"),l().post("/subscription/edit/renewal").then((e=>{Turbolinks.visit()})).catch((t=>{e.removeClass("is-disabled"),t.response?alert(t.response.data.reason):alert("Something went wrong, please try again.")}))},"#cancel:not(.is-disabled) click"(e){e.addClass("is-disabled"),l().delete("/subscription/edit/renewal").then((e=>{Turbolinks.visit()})).catch((t=>{e.removeClass("is-disabled"),t.response?alert(t.response.data.reason):alert("Something went wrong, please try again.")}))}};class ps extends U{constructor(e,t){if(super(e,t),this.infiniteScroll=new Ut(".items-list",{_app:this._app}),this._controllers.push(this.infiniteScroll),this._app.data.next_rank_color){const e=o()("#honor_chart");e.length&&!e.attr("data-donut-chart")&&(!function(e,t){const s=document.querySelector(e),i=Object.assign({value:50,radius:50,thickness:10,bg:"rgba(255,255,255,0.125)",color:"#333",transition:"all 1s cubic-bezier(0.57, 0.13, 0.18, 0.98)"},t||{}),n=2*Math.PI*i.radius,a=n-n*(i.value/100),o=2*i.radius+i.thickness,r=document.createDocumentFragment(),l=u(o);l.appendChild(p()),l.appendChild(m()),r.appendChild(l),s.appendChild(r),s.innerHTML=s.innerHTML;const c=s.querySelector(".donut-fill");function d(e,t={}){return h(document.createElementNS("http://www.w3.org/2000/svg",e),t)}function h(e,t={}){for(const s of Object.keys(t))e.setAttribute(s,t[s]);return e}function u(e){return d("svg",{class:"donut",xmlns:"http://www.w3.org/2000/svg",viewbox:`0 0 ${e} ${e}`,transform:"rotate(270)",preserveAspectRatio:"xMidYMid meet"})}function p(){return d("circle",{class:"donut-bg",cx:"50%",cy:"50%",r:i.radius,fill:"transparent",stroke:i.bg,"stroke-width":i.thickness,"stroke-dasharray":n})}function m(){const e=d("circle",{class:"donut-fill",cx:"50%",cy:"50%",r:i.radius,fill:"transparent",stroke:i.color,"stroke-width":i.thickness,"stroke-dashoffset":n,"stroke-dasharray":n});return e.style.opacity=0,e}c.style.transition=i.transition,window.requestAnimationFrame((()=>{h(c,{"stroke-dasharray":n,"stroke-dashoffset":a}),c.style.opacity=1}))}("#honor_chart",{value:Math.max(0,Math.min(99.9,this._app.data.rank_progress+1)),radius:200,thickness:50,bg:"var(--color-donut-chart-bg)",color:$e[this._app.data.next_rank_color]}),e.attr("data-donut-chart",!0))}if(this._app.data.stats_refreshing){const e=f.register("stats_refresh",this._app.data.profile.username,(()=>{n().visit()}),this._app.ablyConfig);"function"===typeof e&&this._unregisters.push(e),l().get(this._app.route("check_stats")).then((e=>{e.data.ready&&mt(window.location.pathname)}))}o()("[data-meter]").each(((e,t)=>{const s=o()(t);window.requestAnimationFrame((()=>{s.prepend('<div class="honor-breakdown-item-meter absolute top-0 left-0 h-full inline-block transition-width ease-in-out duration-1500" style="width: 0">'),s.find(".honor-breakdown-item-meter").width(`${s.attr("data-meter")}%`)}))}))}}ps.prototype.events={".js-reload-action:not(.js-working) click"(e){e.text("Working..."),e.addClass("js-working"),l().post(e.data("href")).then((e=>n().visit()))},"#tell_me_more_referrals click"(e){o()("#referral").hide(),o()("#referrals").show()},"#toggle_relationship click"(e){l().post(this._app.route("toggle_relationship")).then((t=>{const s=t.data;s.success&&(s.following?(e.find("span").text("Unfollow"),e.addClass("is-red-text").removeClass("is-green-text")):(e.find("span").text("Follow"),e.addClass("is-green-text").removeClass("is-red-text")))}))},".js-delete-collection click"(e){this._app.confirmModal.show({titleHtml:"Are you sure you want to delete this collection?",messageHtml:"You will not be able to undo this operation. Are you sure?",confirmHtml:"Yes, delete it",confirm:()=>{const t=this._app.route("collection",{id:e.data("collectionId")});l().delete(t).then((t=>{ye(e.closest(".list-item-collection").get(0))}))}})}};class ms extends U{constructor(e,t){super(e,t),o()(`[data-username='${this._app.currentUser.username}']`).addClass("is-current-player")}}class gs extends U{constructor(e,t){if(super(e,t),this._app.data.refreshing){const e=f.register("compare_refresh",this._app.currentUser.username,(e=>{e.username===this._app.data.username&&mt(window.location.pathname)}),this._app.ablyConfig);"function"===typeof e&&this._unregisters.push(e),l().get(this._app.route("check")).then((e=>{e.data.ready&&mt(window.location.pathname)}))}}search(){const e=Object.assign({},w(),{r:o()("#rank").val(),l:o()("#language").val(),q:o()("#search-input").val(),page:null});for(const t of Object.keys(e))null===e[t]&&delete e[t];n().clearCache(),n().visit(`${window.location.pathname}?${C(e)}`)}}gs.prototype.events={"#search click"(){this.search()},"#rank change"(){this.search()},"#language change"(){this.search()},"#search-input keypress"(e,t){13===t.keyCode&&(t.preventDefault(),this.search())}};class fs extends U{constructor(e,t){super(e,t),this.store=ws.get("personal_collections",{ablyConfig:this._app.ablyConfig,url:this._app.route("collections"),realtime:"collection"})}destroy(){this.hide(),super.destroy()}disableBtns(){this.element.find("a").addClass("is-disabled")}show(e){this.data={current:e,loading:!0},this.element.show(),this.refresh(),this.store.getAll((e=>{this.data.collections=e,this.data.adding=!1,this.data.loading=!1,this.refresh()}))}hide(){this.element.hide()}findCollectionChallenge(e,t){if(null==t&&(t=this.data.current&&this.data.current.id),e.code_challenges)return e.code_challenges.find((e=>e.code_challenge_id===t))}addChallenge(e,t){null==t&&(t=this.data.current.id);const s=this._app.route("collection_code_challenge",{collectionId:e.id,id:""});l().post(s,{id:t})}removeChallenge(e,t,s){null==t&&(t=this.data.current.id);const i=this._app.route("collection_code_challenge",{collectionId:e.id,id:t});l().delete(i).then((e=>{"function"===typeof s&&s()}))}refresh(){this.element.is(":visible")&&this.renderViews()}createCollection(e,t){null==e&&(e=this.element.find("form input").val()),null==t&&(t=this.data.current.id),l().post(this._app.route("collections"),{name:e,code_challenge_id:t}).then((e=>{this.hide()}))}}fs.prototype.events={"#app store.personal_collections.changed"(){this.refresh()},"body .js-add-to-collection click"(e){const t=e.data("challenge");this.show(t)},"a.js-done click"(){this.hide()},"a.js-add-toggle click"(e){const t=e.closest("li").data("context");this.disableBtns(),this.findCollectionChallenge(t)?this.removeChallenge(t):this.addChallenge(t)},"a.js-add click"(){this.data.adding=!0,this.refresh()},"a.js-create click"(){this.disableBtns(),this.createCollection()}},fs.prototype.filters={"enough_honor?"(){return this._app.currentUser.honor>=20},"added?"(e){return!!this.findCollectionChallenge(e.context)},done_label(e){return this.data.adding?"Cancel":"Done"}};const _s={};class ws{static get(e,t){t.name=e;let s=_s[e];return s||(s=_s[e]=new ws(t)),s}constructor(e={}){this.options=e,this.ablyConfig=e.ablyConfig}getAll(e){this.items?e(this.items):l().get(this.options.url).then((t=>{const s=t.data;this.response=s,this.items=s.items,e(this.items),this.options.realtime&&(f.register("private",`${this.options.realtime}_saved`,this.handleModelSaved.bind(this),this.ablyConfig),f.register("private",`${this.options.realtime}_destroyed`,this.handleModelDestroyed.bind(this),this.ablyConfig))}))}handleModelSaved(e){if(this.items&&e.id){const t=this.items.find((t=>t.id===e.id));if(t){for(const s of Object.keys(t))e.hasOwnProperty(s)||delete t[s];Object.assign(t,e),this.storeChanged("updated",t)}else this.items.push(e),this.storeChanged("added",e)}}handleModelDestroyed(e){const t=this.items.findIndex((t=>t.id===e.id));if(-1!==t){const e=this.items[t];this.items.splice(t,1),this.storeChanged("destroyed",e)}}storeChanged(e,t){const s=this.options.name||this.options.realtime;o()("#app").trigger(`store.${s}.changed`,{store:this,model:t})}}class vs extends U{constructor(e,t){super(e,t),this._app.votes.updateVotes()}setFilter(e,t,s){e.closest(`.comment-${t}-filters`).find(".is-active").removeClass("is-active"),e.addClass("is-active");const i=e.closest(".comments");"all"===e.data(t)?i.find(" > ul > li.comment").show():(i.find(" > ul > li.comment").hide(),i.find(`[data-${t}="${e.data(t)||s}"]`).show())}collapseComment(e){Ss(Es(e,{collapsed:!0}))}newComment(e,t){const s=e.closest(".comment");t=t||s.find(".nested-comments").first(),this.getActionsBar(e).hide(),this.closeNewComments(e);let i=t.find("ul.comments-list > .new-comment");const n=()=>i.find("textarea").each(((e,t)=>t.focus()));i.length>0?Ts(i)?i.is(":visible")?ye(i.get(0),{finish:()=>{rt(),Cs(i,200),this.getActionsBar(i).show(),setTimeout(n,100)}}):xe(i.get(0),{finish:()=>{rt(),Cs(i,200),setTimeout(n,100)}}):(Cs(i,200),n()):(t.show(),i=Ss($s(o()("<li></li>").appendTo(t.children("ul.comments-list")),{nest_level:1,active:!0}),"#_comment_new",{parentContext:s.data("context")}),Ts(i)?xe(i.hide().get(0),{finish:rt}):Cs(i,200),setTimeout(n,400))}showNewCommentModal(e={}){this._app.confirmModal.show({titleHtml:e.title||"Please leave a comment",confirmHtml:e.confirmHtml||"Post Comment",cancel:e.cancel,view:t=>{const s={active:!0,label:e.label,allowedLabels:e.label?[e.label]:[],modal:!0};new ze(t,{template:"#_comment_new_modal",focusEditor:!0,data:s}).render()},confirm:()=>{this.saveComment(this._app.confirmModal.view.element.find(".new-comment"),e.comments),"function"===typeof e.confirm&&e.confirm()}})}saveComment(e,t){if(this.isPosting)return;const s=this.newCommentInfo(e);if(!s.data.markdown)return;const i=s.$container.attr("id");s.data.parent_comment_id=s.parentCommentId;const n=this._app.route(s.commentUrl,{comment_id:i||""});this.isPosting=!0,i?l().put(n,s.data).then((e=>{const t=e.data;t.success&&(s.$container.find(".js-spoiler-flag input").prop("checked",!1),Ss($s(s.$container,t.comment),"#_comment_item")),this.isPosting=!1})).catch((e=>{this.isPosting=!1,Os.call(this,e)})):this.addNewComment(n,s,t)}markCommentClosed(e){if(this.isPosting)return;const t=this.newCommentInfo(e),s=this._app.route(t.commentUrl,{comment_id:t.parentCommentId})+"/close";(t.data.markdown||"admin"===this._app.currentUser.role)&&(this.isPosting=!0,this.addNewComment(s,t))}newCommentInfo(e){const t=e.closest(".new-comment"),s=t.closest(".comment"),i=1===t.closest(".modal").length?"issue":null;return{$container:t,$parentComment:s,parentCommentId:s.attr("id"),commentUrl:t.closest(".comments[data-comment-url]").data("commentUrl"),data:{markdown:t.data("editor").getValue(),masked:!0===t.find(".js-spoiler-flag input").prop("checked"),label:t.find(".dropdown dd.is-active").data("value")||i}}}addNewComment(e,t,s){null==s&&(s=t.$container),l().post(e,t.data).then((e=>{const i=e.data;if(i.success){t.$container.find(".js-spoiler-flag input").prop("checked",!1);if(0===t.$parentComment.length){const e=o()("<li></li>");e.insertAfter(s.next()),t.$container.removeClass("is-active").find("dd.js-default").trigger("click");const n=Ss($s(e,i.comment),"#_comment_item");n.hide(),ve(n.get(0),{finish:rt}),t.$container.data("editor").setValue("");const a=ys(s).data("context");a&&a.comments&&a.comments.unshift(i.comment)}else Ss($s(t.$parentComment,i.comment))}this.isPosting=!1})).catch((e=>{this.isPosting=!1,Os.call(this,e)}))}closeNewComments(e){e.closest(".comments").find(".js-cancel").trigger("click")}getActionsBar(e){return e.closest(".comment").find(".js-actions-bar")}hasUserCommented(e,t){return null==e&&(e=this._app.currentUser.username),(t=t||o()(".comments")).find(`h6:visible a[href*='${e}']`).length>0}focus(e){try{o()(`${e} .js-expand-nested`).trigger("click");let t=o()(`${e}.comment`);t.is(":visible")||(t.parent().closest(".comment").find(".js-expand-nested").trigger("click"),t=o()(`${e}.comment`)),t.addClass("is-focused"),1===t.length&&t.get(0).scrollIntoView()}catch(t){console.log(t)}}}function bs(e){const t=0===e.indexOf("@")?ys(this).data("context"):xs(this).data("context"),s=this.data("context");if(t&&s){const i=t[e.substr(1)];if(i){const e=i.indexOf(s);e>=0&&i.splice(e,1)}}return this}vs.prototype.events={".comments .js-collapse-all click"(e){e.closest(".comments").find(".comment").each(((e,t)=>{const s=o()(t);s.find(".js-collapse:visible").length>0&&window.requestAnimationFrame((()=>this.collapseComment(s)))}))},".comments .js-collapse-nested click"(e){this.collapseComment(e.closest(".comment"))},".comments .comment .js-expand-nested click"(e){Ss(Es(e.closest(".comment"),{collapsed:!1}))},".js-show-commenter-solution click"(e){let t=e.closest(".comment");const s=t.data("context");s.show_solutions?Ss(Es(t,{show_solutions:!1})):s.solutions?Ss(Es(t,{show_solutions:!0})):l().post(this._app.route("user_solution",{userId:s.user_id})).then((e=>{const s=e.data;t=Ss(Es(t,{solutions:[s],show_solutions:!0})),et(t)})).catch((e=>{Os.call(this,e)})),ot()},".js-new-comment-thread-link click"(){Cs(o()(".comments > .comments-list > .new-comment"),600)},".comments .js-show-comments:not(.is-disabled) click"(e,t){const s=e.closest(".comments").find("ul.comments-list").first();e.addClass("is-disabled"),e.data("open")?ye(s.get(0),{finish:()=>{e.removeClass("is-disabled"),rt(),e.data("open",!1)}}):xe(s.get(0),{finish:()=>{e.removeClass("is-disabled"),rt(),e.data("open",!0)}})},".comments .comment .js-reply click"(e,t){let s=e.closest(".comment");s.find(".js-expand-nested").is(":visible")&&(s=Ss(Es(s,{collapsed:!1}))),this.newComment(s)},".comments .new-comment .js-expand click"(e,t){t.preventDefault(),t.stopPropagation();const s=e.closest(".new-comment");s.data("editor").editor.enterFullScreen(),s.find("dl.tabs > dd:first a").trigger("click"),setTimeout((()=>e.parent().removeClass("is-active")),0)},".comments a.js-remove click"(e,t){this._app.confirmModal.show({messageHtml:"You sure you want to remove this comment?",confirm:()=>{const t=e.closest(".comments[data-comment-url]"),s=e.closest(".comment"),i=this._app.route(t.data("commentUrl"),{comment_id:s.attr("id")});l().delete(i).then((e=>{const t=e.data;s.find("figure").hide(),t.success&&ye(s.get(0),{finish:()=>{bs.call(s,"@comments").remove(),rt()}})})).catch((e=>{Os.call(this,e)}))}})},".js-show-spoiler click"(e){const t=e.closest(".comments[data-comment-url]");let s=e.closest(".comment");const i=this._app.route(t.data("commentUrl"),{comment_id:s.attr("id")})+"/content";s=Ss(Es(s,{markdown:"<i>Loading...</i>"})),l().get(i).then((e=>{const t=e.data;Ss(Es(s,{markdown:t.markdown,markdown_html:t.markdownHtml}))})).catch((e=>{Os.call(this,e)}))},".comments a.js-flag click"(e,t){const s=e.closest(".comments[data-comment-url]"),i=e.closest(".comment"),n=this._app.route(s.data("commentUrl"),{comment_id:i.attr("id")})+"/flag";l().post(n,{type:e.data("flag")}).then((e=>{const t=e.data;t.success?(this._app.alerts.success(`Successfully ${t.verb} comment`),t.comment?$s(i,t.comment):i.data("context").masked=t.flagged,Ss(i)):this._app.alerts.fail(t.reason||t.message||"Was unable to flag comment. Try again later.")})).catch((e=>{Os.call(this,e)}))},".comments a.js-edit click"(e,t){this.getActionsBar(e).hide(),this.closeNewComments(e),Ss(e.closest(".comment"),"#_comment_new")},".comments a.js-cancel click"(e,t){const s=e.closest(".new-comment"),i=s.data("context");i.id?Ss(s,"#_comment_item"):1===i.nest_level?ye(s.get(0),{duration:200,finish:()=>{s.remove(),this.getActionsBar(s).show(),rt()}}):s.removeClass("is-active")},".comments a.js-post click"(e,t){e.closest(".new-comment").find(".js-resolved").is(":checked")?this.markCommentClosed(e):this.saveComment(e)},".comments .new-comment texteditor.submit"(e,t){const s=e.closest(".modal");s.length>0?s.find("li.confirm a.btn").trigger("click"):e.closest(".new-comment").find(".js-post").trigger("click")},".comments .new-comment .preedit input focus"(e,t){this.closeNewComments(e);const s=e.closest(".new-comment");s.addClass("is-active"),s.data("editor").focus(),0===s.closest(".js-scroll-area").length&&o()(window).trigger("resize"),Cs(s,600)},".comments .comment-label-filters a:not(.is-active) click"(e){this.setFilter(e,"label","no-label")},".comments .comment-state-filters a:not(.is-active) click"(e){this.setFilter(e,"state")},".comments .js-comment-id-link click"(e,t){o()(".comment.is-focused").removeClass("is-focused");const s=e.closest(".comment");s.addClass("is-focused"),1===s.length&&s.get(0).scrollIntoView()}};const xs=e=>e.parents('[data-context="root"]').eq(0),ys=e=>e.parents("[data-context-key], [data-context], [data-template-selector]").eq(0),ks=(e,t=0)=>{let s,i;const n=e.closest(".js-scroll-area");n.length>0?(s=n.scrollTop()+n.offset().top,i=n.height()):(s=o()(window).scrollTop(),i=o()(window).height()+s);const a=e.height(),r=e.offset().top+t,l=r+a;return l>i?s+(l-i):r<s&&r},Cs=(e,t=600)=>{if(0===e.length)return;const s=ks(e);!1!==s&&((e,t,s)=>{if(!e)return;const i=e.scrollTop;Se({step:s=>{e.scrollTop=s*(t-i)+i},duration:s})})(e.closest(".js-scroll-area, body").get(0),s,t)},Ts=e=>0!==e.length&&!1===ks(e),Ss=(e,t,s={})=>{const i=e.data("view")||e.closest("view").data("view");if(i)return s.rootData=s.rootData||i.data,i.renderPartial(e,t,s)},Es=(e,t)=>e.data("context",Object.assign(e.data("context")||{},t)),$s=(e,t)=>e.data("context",js(e.data("context")||{},t)),js=(e,t)=>{for(const s of Object.keys(e))t.hasOwnProperty(s)||delete e[s];return Object.assign(e,t)};function Os(e){e.response?401===e.response.status?this._app.alerts.fail("Unauthorized: "+e.response.data.reason.replace(/^User .+:/,"").trim()):this._app.alerts.fail(e.response.data.reason):e.request?this._app.alerts.fail("No response was received. Please try again."):this._app.alerts.fail(e.message||"Unknown Error")}class As extends U{constructor(e,t){super(e,t);const s=Object.assign({backdrop:!0,keyboard:!0,show:!0},this.element.data(),this.options);this.modal=new Fs(this.element,s),this.element.data("modal",this.modal),s.show&&this.modal.show()}destroy(){this.hide(),super.destroy()}messageEl(){return this.element.find(".modal-body")}show(e={}){if((e=Object.assign({},this.options,e)).cancelHtml||e.confirm||e.altConfirm||(e.cancelHtml="OK"),e.titleHtml&&this.element.find("h4").html(e.titleHtml),this.view=null,e.view){const t=o()('<div class="view"></div>').appendTo(this.messageEl().html(""));this.view=e.view(t)}else e.messageHtml&&this.messageEl().html(e.messageHtml);e.cancelHtml&&this.element.find("li.cancel a").html(e.cancelHtml),e.confirm?e.confirmHtml&&this.element.find("li.confirm").show().find("a").html(e.confirmHtml):this.element.find("li.confirm").hide(),e.altConfirm&&e.altConfirmHtml?this.element.find("li.alt-confirm").show().find("a").addClass(e.altConfirmClass).html(e.altConfirmHtml):this.element.find("li.alt-confirm").hide().find("a").attr("class","button");const t=this.element.find(".modal-footer, .modal-header .close");e.hideActions?t.hide():t.show(),this.showOptions=e,this.modal.show()}hide(){this.modal.hide()}}As.prototype.events={'*[data-dismiss="modal"] click'(e,t){null!=this.showOptions&&this.showOptions.cancel&&this.showOptions.cancel(t)},"li.alt-confirm a click"(e,t){this.modal.hide(),null!=this.showOptions&&this.showOptions.altConfirm&&this.showOptions.altConfirm(t)},'*[data-confirm="modal"] click, li.confirm a click'(e,t){this.modal.hide(),null!=this.showOptions&&this.showOptions.confirm&&this.showOptions.confirm(t)}},As.defaults={backdrop:!0,show:!1,keyboard:!1,confirm:null,cancel:null,titleHtml:null,messageHtml:null,cancelHtml:"Cancel",confirmHtml:"Confirm"};class Fs{constructor(e,t){this.options=t,this.$element=o()(e).on("click.dismiss.modal",'[data-dismiss="modal"]',this.hide.bind(this))}toggle(){return this.isShown?this.hide():this.show()}show(){this.isShown||(o()("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),Vs.call(this),Ms.call(this,(()=>{const e=this.$element.hasClass("fade");this.$element.parent().length||this.$element.appendTo(document.body),this.$element.show(),e&&this.$element.get(0).offsetWidth,this.$element.addClass("in"),e?this.$element.one("transitionend",(()=>{this.$element.trigger("shown")})):this.$element.trigger("shown")})))}hide(e){e&&e.preventDefault(),this.isShown&&(this.isShown=!1,o()("body").removeClass("modal-open"),Vs.call(this),this.$element.trigger("hide").removeClass("in"),this.$element.hasClass("fade")?Ds.call(this):Is.call(this))}}function Ds(){const e=setTimeout((()=>{this.$element.off("transitionend"),Is.call(this)}),500);this.$element.one("transitionend",(()=>{clearTimeout(e),Is.call(this)}))}function Is(){this.$element.hide().trigger("hidden"),Ms.call(this)}function Ms(e){if(this.isShown&&this.options.backdrop){const t=this.$element.hasClass("fade")?"fade":"";this.$backdrop=o()(`<div class="modal-backdrop ${t}"></div>`).appendTo(document.body),"static"!=this.options.backdrop&&this.$backdrop.on("click",this.hide.bind(this)),t&&this.$backdrop.get(0).offsetWidth,this.$backdrop.addClass("in"),t?this.$backdrop.one("transitionend",e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),this.$element.hasClass("fade")?this.$backdrop.one("transitionend",Rs.bind(this)):Rs.call(this)):e&&e()}function Rs(){this.$backdrop.remove(),this.$backdrop=null}function Vs(){this.isShown&&this.options.keyboard?o()(document).on("keyup.dismiss.modal",(e=>27===e.which&&this.hide())):this.isShown||o()(document).off("keyup.dismiss.modal")}class Ls extends U{constructor(e,t){super(e,t)}toggle(e){const t=e&&!e.is(".is-focused");o()(".dropdown.is-focused").removeClass("is-focused"),t&&e.addClass("is-focused")}}Ls.prototype.events={".dropdown click"(e){this.toggle(e)},click(e,t){0===o()(t.target).closest(".dropdown").length&&this.toggle()},".dropdown dd:not(.is-disabled) click"(e){const t=e.closest(".dropdown");t.children("span").html(e.find("> span").html()||e.html()),t.find("dd.is-active").removeClass("is-active"),e.addClass("is-active"),void 0!==e.data("load")&&e.data("href")&&n().visit(e.data("href"))}};class Ns extends U{constructor(e,t){super(e,t)}}Ns.prototype.events={".form-field input focus"(e){e.closest(".form-field").addClass("active")},".form-field input blur"(e){e.closest(".form-field").removeClass("active")},".form-field .prefix i click"(e){const t=e.closest(".form-field").find("input").get(0);null!=t&&t.focus()}};class Ps extends U{constructor(e,t){super(e,t),this.adjustMaxHeight()}adjustMaxHeight(){o()(".menu-body").css("max-height",o()(window).height()-o()("#main_header").height())}}Ps.prototype.events={"window resize"(){this.adjustMaxHeight()},"#main_header .has-menu click"(e){o()(window).width()<768&&e.toggleClass("active")},"#header_profile_link click"(e){if(o()(window).width()<768)return e.parent(".has-menu").toggleClass("active"),!1},"body .sidenav-nubbin click"(){o()("#app").toggleClass("shift-right")},".js-sign-out click"(e){n().clearCache();const t=o()('<form method="post" action="/users/sign_out"></form>'),s=['<input name="_method" value="DELETE" type="hidden" />',`<input name="${o()("meta[name=csrf-param]").attr("content")}" value="${o()("meta[name=csrf-token]").attr("content")}" type="hidden" />`].join("");t.hide().append(s).appendTo("body"),t.trigger("submit")}};class Us extends U{constructor(e,t){super(e,t),this.updateVotes()}updateVotes(e){null==e&&(e=this._app.data&&this._app.data.label_votes),e&&e.forEach((e=>{const t=this.element.find(`[data-vote-ref-id='${e.refId}']`);0!==t.length&&e.labels.forEach((e=>{t.find(`.vote-label[data-label='${e}']`).addClass("is-voted")}))}))}}Us.prototype.events={"#app infinitescrollcontent"(){this.updateVotes()},"a.vote-label click"(e,t){const s=e.closest(".vote-labels"),i={refId:s.data("vote-ref-id"),label:e.data("label")},n=s.closest("[data-labels-vote-url]").data("labels-vote-url")||"label_vote",a=this._app.route(n,i);e.hasClass("is-voted")?l().delete(a).then((t=>{const s=t.data;s.success&&(e.removeClass("is-voted"),e.find("span").html(s.totalVotes))})):l().post(a).then((t=>{const i=t.data;i.success&&(e.find("span").html(i.totalVotes),s.find(".is-voted").trigger("click"),e.addClass("is-voted"))}))}};class Hs extends U{constructor(e,t){super(e,t),null!=this._app.currentUser&&this._app.currentUser.username&&!this._app.currentUser.guest&&(this.deferred=we(1e3,(()=>{this.nextPopupNotification()})))}destroy(){super.destroy(),this.deferred&&(this.deferred.abort(),this.deferred=null)}maybeCheckNext(){o()("#popup-notification-container").data("notification-sticky")||(this.deferred=we(500,(()=>{this.nextPopupNotification()})))}nextPopupNotification(e){this.deferred=null,l().post(this._app.route("unread_popup_notifications"),{href:location.href,data:this._app.data,default_popup_id:e},{responseType:"text"}).then((e=>{const t=e.data;t&&"string"===typeof t&&window.requestAnimationFrame((()=>{o()("#popup-notification-container").remove();const e=o()(t).appendTo("#app").hide();setTimeout((()=>xe(e.get(0))),250)}))}))}markAllRead(){this.markReadWait=null,this.markedRead=!0;const e=o()("#notification_count"),t={ids:e.data("unread-ids")};t.ids&&l().post(this._app.route("mark_notifications_read"),t).then((t=>{be(e.get(0))}))}}Hs.prototype.events={"#notifications_drawer mouseenter"(){this.markedRead||(null!=this.markReadWait&&this.markReadWait.abort(),this.markReadWait=we(700,(()=>this.markAllRead())))},"#notifications_drawer mouseleave"(){null!=this.markReadWait&&this.markReadWait.abort()},"#popup-notification-container .popup-toast a.close click"(){this.maybeCheckNext(),function(e,t,s){const i=document.querySelector(e);i.classList.add("animated",t),i.addEventListener("animationend",(function e(){i.classList.remove("animated",t),i.removeEventListener("animationend",e),"function"===typeof s&&s(i)}))}("#popup-notification-container","fadeOutDown",(e=>{e.parentNode.removeChild(e)}))},"#popup-notification-container .js-show-dialog click"(){o()("#popup-notification-container").removeClass("toast").addClass("dialog")},"#popup-notification-container .popup-dialog .js-close click"(){this.maybeCheckNext();const e=o()("#popup-notification-container");be(e.get(0),{finish:()=>{e.remove()}})},"#popup-notification-container .js-tweet click"(e){St(e.data("tweet"))}};class qs extends U{constructor(e,t){super(e,t),this.syncStarred()}refreshList(){const e=this.element.find(".stars-item .menu-body");0!==e.length&&l().get(this._app.route("user_stars"),{responseType:"text"}).then((t=>{e.html(t.data)}))}toggleCodeChallengeStar(e){const t=e.parent(),s=t.data("id");l().post(this._app.route("star_code_challenge",{id:s})).then((s=>{s.data.success&&(this.updateCodeChallengeStar(t,e.hasClass("js-add-code-challenge-star")),this.refreshList())}))}updateCodeChallengeStar(e,t){t?(e.find(".js-add-code-challenge-star").hide(),e.find(".js-remove-code-challenge-star").show()):(e.find(".js-add-code-challenge-star").show(),e.find(".js-remove-code-challenge-star").hide())}syncStarred(){this._app.currentUser&&this._app.currentUser.starred_code_challenge_ids&&this._app.currentUser.starred_code_challenge_ids.forEach((e=>{this.updateCodeChallengeStar(o()(`[data-id='${e}']`),!0)}))}}qs.prototype.events={".js-add-code-challenge-star click"(e){this.toggleCodeChallengeStar(e)},".js-remove-code-challenge-star click"(e){this.toggleCodeChallengeStar(e)},infinitescrollcontent(){this.syncStarred()}};class Ws extends U{constructor(e,t){super(e,t)}_resetTabs(e){const t=e.closest("dl.tabs");let s=t.closest(".tabs:not(dl)");0===s.length&&(s=t.parent()),t.is(".is-vertical")&&(s=s.parent());const i=s.find("ul.tabs-content").first();t.find("dd.is-active").removeClass("is-active"),i.find("> li.is-active").removeClass("is-active");const n=e.closest("dd");return setTimeout((()=>n.addClass("is-active")),0),{$tab:n,$content:i}}}Ws.prototype.events={".tabs dd:not(.is-active) a[data-tab]:not(.is-disabled) click"(e,t){const s=this._resetTabs(e);t.preventDefault(),s.$content.find(`[data-tab='${e.data("tab")}']`).first().addClass("is-active"),"off"!==e.closest(".tabs").data("updateLayout")&&rt()}};const zs="dark-mode",Bs="theme-transition";class Gs extends U{constructor(e,t){super(e,t),this.isDark=!1,this.initDarkMode()}initDarkMode(){if(document.getElementById("landing"))return;const e=localStorage.getItem(zs);if(null!==e)return this.toggleDarkMode("true"===e);this.toggleDarkMode(!0)}toggleDarkMode(e){this.isDark=!!e,document.documentElement.classList.toggle("dark",this.isDark),localStorage.setItem(zs,this.isDark+""),this._app.darkMode=this.isDark,o()("#app").trigger("dark-mode-toggled",[this.isDark])}}Gs.prototype.events={".js-toggle-dark-mode click"(e){document.documentElement.classList.add(Bs);const t=document.documentElement.classList.contains("dark");this.toggleDarkMode(!t),n().clearCache(),setTimeout((()=>{document.documentElement.classList.remove(Bs)}),1e3)}};class Ks extends U{constructor(e,t){super(e,t),this.updateVotes()}updateVotes(e){null==e&&(e=this._app.data&&this._app.data.votes),e&&e.forEach((e=>{const t=this.element.find(`.voter[data-vote-ref-id='${e.refId}']`);t.data("vote-value",e.value);t.find(`.vote[data-vote-value='${e.value}']`).addClass("is-active")}))}updateScore(e,t,s,i){if(t===i)return;e.find(".vote").removeClass("is-active");const n=e.find(".score");switch(t){case 1:e.find('.vote[data-vote-value="1"]').addClass("is-active");break;case-1:e.find('.vote[data-vote-value="-1"]').addClass("is-active")}n.html(s)}}Ks.prototype.events={"#app infinitescrollcontent"(){this.updateVotes()},".voter .vote click"(e,t){const s=e.closest(".voter"),i={refId:s.data("vote-ref-id"),value:parseInt(e.data("vote-value"),10)};e.is(".is-active")&&(i.value=0);const n=s.closest("[data-vote-url]").data("vote-url")||"vote";l().post(this._app.route(n,i)).then((t=>{const n=t.data;n.success&&(e.toggleClass("is-active"),this.updateScore(s,i.value,n.score,s.data("vote-value")||0),s.data("vote-value",i.value))}))}};class Ys{static setup(e){return null!==this.instance?this.instance.update(e):this.instance=new Ys(e),this.instance}constructor(e){this.localStorage=u("app"),this.darkMode=!1,this.assignConfig(e),this.initSentry(),ei(),this.configureControls(),this.configureAxios(),this.setPageController(e.pageControllerName),this.configureSentry(),this.afterLoad()}update(e){this.assignConfig(e),this.destroyControls(),this.configureControls(),this.setPageController(e.pageControllerName),this.configureSentry(),this.afterLoad()}assignConfig(e){this.currentUser=e.currentUser,this.routes=e.routes,this.data=e.data,this.ablyConfig={key:e.ablyKey,clientId:e.currentUser&&e.currentUser.id,privateChannelName:e.privateChannelName},this.env=e.env,this.release="e2b3be851739bc6af998c42c9aec644ea688aaf9"}destroyControls(){for(const e of Zs)this[e]&&!this[e].destroyed&&(this[e].destroy(),this[e]=null);(()=>{for(const e of document.querySelectorAll(nt))e._tippy&&e._tippy.destroy()})()}configureControls(){this.header=new Ps("#main_header"),this.confirmModal=new As("#confirm_modal"),this.collectionModal=new fs("#collection_modal",{_app:this}),this.alerts=new Ee("#global_alerts",{useSlide:!0});const e=o()("#app");this.tabs=new Ws(e),this.dropdowns=new Ls(e),this.votes=new Ks(e,{_app:this}),this.comments=new vs(e,{_app:this}),this.labelVotes=new Us(e,{_app:this}),this.forms=new Ns(e),this.notifications=new Hs(e,{_app:this}),this.stars=new qs(e,{_app:this}),this.theme=new Gs(e,{_app:this}),Ke(),et(),Qe(),Be(this),rt(),setTimeout((()=>{at()}),1e3)}setPageController(e){this.controller&&!this.controller.destroyed&&(this.controller.destroy(),this.controller=null);const t=ti(e);t&&(this.controller=new t("#app",{_app:this}))}configureAxios(){l().defaults.headers.common["x-requested-with"]="XMLHttpRequest",l().interceptors.request.use((e=>(e.headers["x-csrf-token"]=Js(),this.currentUser.jwt&&(e.headers.authorization=this.currentUser.jwt),Xs({type:e.method,url:e.url,data:e.data}),e)),(e=>Promise.reject(e))),l().interceptors.response.use((e=>(Qs(e.headers["x-csrf-token"]),e)),(e=>(e.response&&Qs(e.response.headers["x-csrf-token"]),Promise.reject(e))))}initSentry(){c.S1({dsn:"https://dc778a04207f4100809dddc5f47d43fb@sentry.io/116947",environment:this.env,release:this.release,enabled:["production","staging"].includes(this.env),ignoreErrors:[/NS_ERROR_NOT_INITIALIZED/,"top.GLOBALS","Can't execute code from a freed script","\u041d\u0435 \u0443\u0434\u0430\u0435\u0442\u0441\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u0438\u0437 \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f","No se puede ejecutar c\xf3digo de un script liberado"],blacklistUrls:[/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/extensions\//i,/^chrome:\/\//i,/js\.intercomcdn\.com/i,/ravenjs/i]})}configureSentry(){d.e((e=>{this.currentUser&&e.setUser({email:this.currentUser.email,username:this.currentUser.username,pro:this.currentUser.subscriber,current_language:this.currentUser.current_language}),e.setExtras({data:this.data,routes:this.routes})})),d.n_({message:`${document.title}`,category:"Page Loaded",data:this.data})}afterLoad(){this.controller&&"function"===typeof this.controller.ready&&this.controller.ready(),rt(),this.currentUser.hideAds&&o()("#_carbonad").hide(),n().scrollTop>0&&(document.scrollingElement.scrollTo(0,n().scrollTop),n().scrollTop=0),f.connect(this.ablyConfig)}route(e,t,s){let i=this.routes[e]||e;if(i.startsWith("/")&&(i=`${window.location.protocol}//${window.location.host}${i}`),s&&(i+=i.includes("?")?"&":"?",i+=decodeURIComponent(C(s))),!i)return"";if(t)for(const n of Object.keys(t))i=i.replace(new RegExp(`%7B${n}%7D`,"g"),t[n]);return i}}Ys.instance=null;const Js=()=>o()("meta[name='csrf-token']").attr("content"),Qs=e=>{e&&o()("meta[name=csrf-token]").attr("content",e)},Xs=e=>{d.n_({message:"Ajax Send",category:"xhr",data:{type:e.type,url:e.url,data:e.data}})},Zs=Object.freeze(["confirmModal","header","collectionModal","alerts","tabs","dropdowns","votes","comments","labelVotes","forms","notifications","stars","theme"]),ei=()=>{n().scrollTop=0,document.addEventListener("turbolinks:click",(e=>{if(e.target.matches('[data-turbolinks-scroll="false"]')){const e=document.scrollingElement.scrollTop;e>0&&(n().clearCache(),n().scrollTop=e)}}),!1);const e=()=>{o()("html").toggleClass("scrolling",o()(window).scrollTop()>5)};o()(window).on("scroll",((e,t=null)=>{let s;return(...i)=>{s&&window.cancelAnimationFrame(s),s=window.requestAnimationFrame((()=>{e.call(t,...i)}))}})(e)),e(),o()(window).on("resize",Ke),document.addEventListener("turbolinks:before-cache",(()=>{o()("#carbonads").remove()})),o()(document).on("click",".alert-box a.close",(e=>{e.preventDefault();const t=o()(e.target).closest(".alert-box");be(t.get(0),{finish:()=>{t.remove()}})}))},ti=e=>{switch(e){case"Articles.BlogController":return lt;case"Articles.DocsController":return ct;case"Articles.ForumController":return dt;case"CodeChallenges.CodeSnippetsController":return Tt;case"CodeChallenges.DiscussController":return jt;case"CodeChallenges.EditorController":return Rt;case"CodeChallenges.ListController":return Wt;case"CodeChallenges.PlayController":return Bt;case"CodeChallenges.ShowController":return Gt;case"CodeChallenges.SolutionsController":return Kt;case"CodeChallenges.TranslationsController":return Yt;case"CodeChallengeSolutionGroups.ShowController":return wt;case"CodeSnippets.EditController":return Jt;case"CodeSnippets.IndexController":return Qt;case"CodeSnippets.ShowController":return Zt;case"CodeSnippets.TranslationsController":return ts;case"Collections.EditController":return ss;case"Collections.IndexController":return is;case"Collections.ShowController":return ns;case"Dashboard.IndexController":return as;case"Landing.IndexController":return os;case"PersonalTrainer.SetupController":return rs;case"Revisions.IndexController":return cs;case"Subscription.IndexController":return hs;case"Subscription.EditController":return us;case"UsersComparisons.ShowController":return gs;case"Users.ShowController":return ps;case"Users.RankingsController":return ms;case"Registrations.EditController":return ls;default:return null}};var si=s(2380),ii=s(9074);const ni=si.Mx.start(),ai=s(1676);ni.load((0,ii.X)(ai)),window.App=Ys,n().start()}},e=>{"use strict";e.O(0,[152],(()=>{return t=8721,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=application-dc6acbc2af83f4b8e580.js.map